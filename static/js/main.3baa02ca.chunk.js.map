{"version":3,"sources":["Fire.js","ContextAPI.js","components/Sidebar.js","components/Forgotpassword.js","components/Login.js","components/Users.js","components/Userrow.js","components/Hoverabletexticonflexrow.js","components/Contextmenu.js","components/Elapsedtime.js","components/Recorder.js","components/Hoverableiconsdiv.js","components/msgcomponents/Iframe.js","components/msgcomponents/Img.js","components/msgcomponents/File.js","components/msgcomponents/Recording.js","components/Gifs.js/Search.js","components/Hoverablebutton.js","components/Gifs.js/Gif.js","components/msgcomponents/Contextoptions.js","components/msgcomponents/Threedots.js","components/Dialogue.js","components/Userprofile.js","components/Adduser.js","components/Inputs.js","components/settings/Account.js","components/Switches.js","components/Input.js","components/Button.js","components/settings/Personalization.js","components/settings/Infocontainer.js","components/settings/Aboutchatuser.js","components/settings/Preferences.js","components/settings/Themes.js","components/settings/Actions.js","components/settings/Support.js","components/Usersettings.js","components/Calendars.js","components/Hoverlink.js","components/Home.js","components/Notifications.js","components/Paths.js","components/Chatviewrow.js","components/Body.js","components/StartConvo.js","App.js","index.js"],"names":["firebaseApp","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","db","firestore","ContextApp","createContext","ContextAppProvider","props","user","auth","currentUser","useState","darkmode","setDarkmode","widemode","setWidemode","chatcolor","setChatcolor","themecolor","setThemecolor","notifi","setNotifi","emoji","msg","notificont","setNotificont","collection","doc","uid","onSnapshot","snap","data","customization","color","Provider","value","children","Sidebar","useContext","updateProfile","chatFuncDisplay","handleLogout","setChatview","setChatstarted","userimg","setUserimg","username","setUsername","loader","setLoader","useEffect","userinfo","cover","name","className","class","src","alt","activeClassName","exact","to","onClick","Forgotpassword","email","setEmail","onSubmit","e","preventDefault","type","placeholder","onChange","target","sendPasswordResetEmail","then","window","alert","catch","err","code","errormsg","message","Login","loginwithYahoo","loginwithFacebook","loginwithGoogle","setName","setlName","lname","password","setPassword","handleLogin","handleSignup","hasAccount","setHasAccount","emailError","passwordError","path","style","display","loading","textAlign","cursor","marginBottom","Users","convoinfo","setConvoinfo","el","setChatuser","chatuser","recipimg","setRecipimg","recipname","setRecipname","sendername","setSendername","setActivestatus","senderimg","setSenderimg","setLoading","setMsg","reg","determineMsgtype","undefined","base64","file","audio","match","RegExp","$1","replace","_","text","img","trim","recipientid","online","creatorid","convoid","msgs","messages","length","slice","dangerouslySetInnerHTML","__html","senderid","lastMsg","Userrow","keyword","setUserlist","convos","setConvos","id","allconvos","sort","a","b","lastmsgdate","map","userlist","forEach","msgids","includes","push","setAdduser","onFocus","Hoverabletexticonflexrow","icon","classNames","functionOne","Contextmenu","themebool","emojibool","setUpdatedMsg","copy","contextmenu","setContextmenu","contextstyle","msgid","visible","setVisible","setMsgs","contextmenuSelector","useRef","history","useLocation","useHistory","sendReaction","opt","itemindex","indexOf","reaction1","update","reaction2","emojisrow","allemojisrow","document","addEventListener","current","ref","onContextMenu","left","top","onMouseOver","onMouseLeave","CSSTransition","in","timeout","unmountOnExit","r","createRange","querySelector","selectNode","getSelection","removeAllRanges","addRange","execCommand","copyFunc","splice","setThemebool","setEmojibool","emojitype","location","reload","goForward","goBack","ElapsedTime","Iconspecial","styled","i","Recorder","progressbar","progresswidth","record","setRecord","clicked","setClicked","reset","setReset","stop","RecordState","STOP","time","setTime","intervalId","setIntervalId","startRecord","START","setInterval","prev","state","onStop","audioData","require","storage","reader","FileReader","readAsDataURL","blob","onloadend","url","filename","mimeType","base64data","result","fetch","res","arrayBuffer","buf","File","storageRef","put","on","percentage","bytesTransferred","totalBytes","height","msgobject","bucket","reaction","msgdate","Timestamp","now","read","editing","nobackground","FieldValue","arrayUnion","clearInterval","Button","button","Icon","Span","span","Hoverableicondiv","inputref","sendFile","setImg","special","setState","lnk","setState2","handleEvent","setTimeout","zIndex","accept","Iframe","link","controls","allowFullScreen","Img","fontSize","position","href","Recording","video","playBtn","progress","onLoadedData","duration","toFixed","onTimeUpdate","currentTime","width","ended","updateProgress","paused","play","pause","togglePlayPause","Math","round","determineMinSecH","Search","search","setSearch","fetchData","setTitle","Hoverablebutton","Gif","setGif","notifibool","chatimg","React","setData","title","offset","setOffset","limit","setTotalCount","trending","setTrending","trendSearch","setTrendSearch","tSearch","date","serverTimestamp","URL","axios","fetchGif","fetchRes","status","pagination","total_count","content","onTop","scrollTo","behavior","g","notificationobj","notifimsg","notifidate","sender","displayName","gif","notifiid","notifications","sendGif","images","fixed_height","fixed_width","t","toUpperCase","s","Contextoptions","function1","re","stopPropagation","Threedots","emojis","setEmojis","msgidedit","setMsgidedit","allemojis","contextoption","emojiref","threedots","data-id","copyMsg","Dialogue","msgstring","setMsgstring","setUpdateelapsed","typing","setTyping","setRecipcity","setRecipcountry","setNotifibool","setEmojitype","setUserchatcolor","setShowinput","updatedMsg","theme","setTheme","setMsgid","chatname","setChatname","setChatimg","setChatcity","setChatcountry","chatactive","setChatactive","nickname","setNickname","emojipicker","setEmojipicker","diag","typerRef","imageRegexB","ytVidId","sm","determineClass","modal","setModal","imgsrc","setImgSrcModal","allmsgs","reverse","customcontext","getBoundingClientRect","currentTarget","getAttribute","pageY","pageX","editMsg","contextMenu","contentEditable","backgroundColor","closest","contains","setAttribute","clickHandler","ReactTimeAgo","toDate","marginLeft","files","idxDot","lastIndexOf","extFile","substr","toLowerCase","iconsrow","scrollto","sendMessage","scrollIntoView","block","emojipickerref","zoomamount","setZoomamount","zoom","timer","city","country","get","use","customizedconvo","notifications2","nickname1","notifications1","nickname2","padding","render","backgroundImage","onKeyUp","keyCode","shiftKey","triggerSend","onInput","focus","role","aria-label","sendEmoji","hideScrollbars","onEmojiClick","event","emojiobject","Userprofile","recipcity","recipcountry","recipjob","setRecipjob","recipnumber","setRecipnumber","recipemail","setRecipemail","recipwebsite","setRecipwebsite","extend","setExtend","active","setActive","job","phone","website","toLocaleLowerCase","Adduser","allusers","setRecipientname","setRecipientid","setMessage","msgpersonids","adduser","setKeyword","determineDisplay","border","cssText","pattern","allusersrow","test","Input","input","Inputs","disabled","determineDelete","age","setAge","setCity","phonenumber","setPhonenumber","setWebsite","setCountry","required","min","delete","Account","uploaded","setUploaded","setCover","setJob","userobj","setDisabled","uploadImg","removeImg","Switches","checked","setChecked","setValue","changeCSSVar","onBlur","state1","setState1","setState3","addstyle","state3","stylebtn","Personalization","input1","input2","input3","input4","setInput4","setInput1","setInput2","setInput3","hovered","setHovered","documentElement","setProperty","Infocontainer","variable","margin","Aboutchatuser","setPhone","rel","Preferences","Themes","setThemeimg","themeimg","setEmoji","miniview","setMiniview","convo","Actions","o","Support","Usersettings","settings","linklabel","BrowserHistory","darkmode1","themes","themesrow","clientHeight","clientWidth","activeStyle","link0","link1","link2","link3","marginTop","updateObj","Calendars","calendarEl","getElementById","Calendar","plugins","dayGridPlugin","listPlugin","contentHeight","events","start","Hoverlink","num","txt","clk","Body","setNotifLength","lnks","d","Date","getHours","determineTime","determinetext","Notifications","setNotifications","deleteNotifi","noti","notificationsrow","locale","Paths","chatsettings","onedialogue","userprofile","Home","senderonline","setSenderonline","reciponline","setReciponline","Div","div","unreadmsgs","setMsgpersonids","convolist","setConvolist","setAllusers","recipientname","chatview","chatstarted","chatopen","setChatopen","dialoguerow","usersrow","Chatviewrow","pathname","split","users","right","creatorname","typerid","userref","set","StartConvo","App","setUser","setEmailError","setPasswordError","clearErrors","authListener","onAuthStateChanged","provider","GoogleAuthProvider","addScope","signInWithPopup","additionalUserInfo","isNewUser","credential","accessToken","created","photoURL","phoneNumber","error","OAuthProvider","console","log","profile","yahooresult","idToken","FacebookAuthProvider","usergoogle","errorCode","useBeforeunload","signOut","signInWithEmailAndPassword","createUserWithEmailAndPassword","TimeAgo","addDefaultLocale","en","addLocale","rootElement","ReactDOM"],"mappings":"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","file":"static/js/main.3baa02ca.chunk.js","sourcesContent":["import firebase from 'firebase'\r\n\r\nconst  firebaseApp = firebase.initializeApp ({\r\n  apiKey: \"AIzaSyChwGy1Z1jzlrAxivYaq71r7Nlbc65u_Wo\",\r\n  authDomain: \"chat-3943a.firebaseapp.com\",\r\n  projectId: \"chat-3943a\",\r\n  storageBucket: \"chat-3943a.appspot.com\",\r\n  messagingSenderId: \"53187875245\",\r\n  appId: \"1:53187875245:web:ed73204351ac3b9f709124\",\r\n  measurementId: \"G-028L2BESN6\"\r\n});\r\n\r\nconst db= firebaseApp.firestore()\r\nconst Fire = firebaseApp\r\nexport  {db, Fire}\r\n","import React, { createContext, useState, useEffect } from 'react'\r\nimport { withRouter } from 'react-router-dom'\r\nimport firebase from 'firebase'\r\nimport { db } from './Fire'\r\nexport let ContextApp=createContext()\r\nlet ContextAppProvider=(props)=>{\r\n  const user = firebase.auth().currentUser\r\n  const [darkmode, setDarkmode]=useState(false)\r\n  const [widemode, setWidemode]=useState(false)\r\n  const [chatcolor, setChatcolor]=useState('')\r\n  const [themecolor, setThemecolor]=useState('')\r\n  const [notifi, setNotifi]=useState(false)\r\n  const [notificont, setNotificont]=useState({\r\n    emoji: '',\r\n    msg: ''\r\n  })\r\n  if(user) {\r\n    db.collection('users').doc(user.uid).onSnapshot(snap=>{\r\n      let user = snap.data()\r\n      setDarkmode(user.customization.darkmode)\r\n      setWidemode(user.customization.widemode)\r\n      setChatcolor(user.customization.color)\r\n      setThemecolor(user.customization.themecolor)\r\n    })\r\n  }\r\n  return (\r\n    <ContextApp.Provider value={{darkmode, widemode, chatcolor, themecolor, notificont, notifi, setNotificont, setNotifi}}>\r\n      {props.children}\r\n    </ContextApp.Provider>\r\n  )\r\n}\r\nexport default ContextAppProvider","import React, {useState, useEffect, useContext} from 'react'\r\nimport { BrowserRouter as Router,Switch,Route,Link,NavLink, Redirect } from \"react-router-dom\" \r\nimport firebase from 'firebase'\r\nimport { db } from '../Fire'\r\nimport {ContextApp} from '../ContextAPI'\r\nfunction Sidebar (props) {\r\n  const {darkmode, chatcolor, widemode, themecolor}=useContext(ContextApp)\r\n\r\n  const {updateProfile,chatFuncDisplay,handleLogout, setChatview, setChatstarted}=props\r\n  const [userimg, setUserimg]=useState('')\r\n  const [username, setUsername]=useState('')\r\n  const [loader, setLoader]=useState(true)\r\n  const user = firebase.auth().currentUser\r\n  const [extend, setExtend]=useState(false)\r\n\r\n  useEffect(()=>{\r\n    db.collection('users').doc(user.uid).onSnapshot(snap=>{\r\n      const user = snap.data()  \r\n      setUserimg(user.userinfo.cover)\r\n      setUsername(user.userinfo.name)\r\n      setLoader(false)\r\n    })\r\n  },[userimg])\r\n  return (\r\n   <>\r\n  \r\n    <div className=\"profilepic profilepiccol\">\r\n            {loader?<div className={loader?'loader':'loader'}><div class=\"lds-ring\"><div></div><div></div><div></div><div></div></div></div>:\r\n    <div>\r\n      <img src={userimg} alt=\"\"/>\r\n       {widemode? <p className='widemodeElement'>{username}</p>:''}\r\n    </div>\r\n        }\r\n        </div>\r\n  \r\n        <div className=\"icons\">\r\n            <NavLink activeClassName='activelink' exact to='/home'><span><i class=\"far fa-home\"></i>{widemode?<p className='widemodeElement'>Home</p>:''}</span></NavLink>\r\n            <NavLink activeClassName='activelink' onClick={()=>{chatFuncDisplay()}}  to='/chat'><span><i class=\"far fa-comment-alt\"></i>{widemode?<p className='widemodeElement'>Chat</p>:''}</span></NavLink>\r\n            <NavLink activeClassName='activelink'  to='/notifications'><span><i class=\"far fa-bell\"></i>{widemode?<p className='widemodeElement'>Notifications</p>:''}</span></NavLink>\r\n            <NavLink activeClassName='activelink' to='/podcast'><span><i class=\"fal fa-podcast\"></i>{widemode?<p className='widemodeElement'>Podcast</p>:''}</span></NavLink>\r\n            <NavLink activeClassName='activelink'  to='/settings'><span><i class=\"fal fa-cog\"></i>{widemode?<p className='widemodeElement'>Settings</p>:''}</span></NavLink>\r\n            <NavLink exact to='/' onClick={()=>{handleLogout()}}><span> <i  class=\"fal fa-sign-out-alt\"></i>{widemode?<p className='widemodeElement'>Logout</p>:''}</span></NavLink> \r\n           <a onClick={()=>{updateProfile()}} className='widemodeElement' ><i class={widemode?\"fal fa-chevron-double-right rotate\":'fal fa-chevron-double-right'}></i></a>\r\n        </div>    \r\n       { widemode?'':<><div className='widemodeElement spac'></div>\r\n        <div className='widemodeElement spac'></div></>}\r\n\r\n\r\n  </>\r\n  )\r\n}\r\nexport default Sidebar","import React, {useState, useEffect} from 'react'\r\nimport firebase from 'firebase'\r\nimport { BrowserRouter as Router,Switch,Route,Link,NavLink } from \"react-router-dom\" \r\n\r\nfunction Forgotpassword (props){\r\n  let [email, setEmail]=useState('')\r\n  function sendEmail(){\r\n      if(email!==''){\r\n       firebase.auth().sendPasswordResetEmail(email).then(()=>{\r\n          window.alert('email has been sent')\r\n       })\r\n       .catch(err=>{\r\n          let errorcode = err.code\r\n          let errormsg = err.message\r\n          window.alert(errormsg)\r\n       })\r\n      }else {\r\n        window.alert('Please input an email')\r\n      }\r\n  }\r\nreturn (\r\n  <div className='forgotpassword'>\r\n         <div className='login'>\r\n<div className=\"spacer1\"></div>\r\n\r\n    <div className=\"title\">\r\n    <i class=\"fa-unlock fad\"></i>\r\n      <h1>Forgot Password</h1>\r\n    </div>\r\n    <div className=\"spacer1\"></div>\r\n      <div className=\"logincontainer\">\r\n        <form onSubmit={(e)=>e.preventDefault()}>\r\n          <label >\r\n            <span>Email</span>\r\n            <input type=\"text\" placeholder='example@mail.com' onChange={(e)=>setEmail(e.target.value)}/>\r\n          </label>\r\n            <button className='themeBtn' onClick={()=>sendEmail()}>Send email</button>\r\n         \r\n        </form> \r\n   \r\n       <Link to='/' className='forgotPasswordButton'>Return to login page</Link>\r\n      </div>\r\n    \r\n  </div>\r\n  </div>\r\n)\r\n}\r\nexport default Forgotpassword","import React, {useState, useEffect} from 'react'\r\nimport { BrowserRouter as Router,Switch,Route,Link,NavLink, Redirect } from \"react-router-dom\" \r\nimport {db} from '../Fire'\r\nimport firebase from 'firebase'\r\nimport Forgotpassword from './Forgotpassword'\r\nimport GoogleButton from 'react-google-button'\r\nimport FacebookLogin from 'react-facebook-login/dist/facebook-login-render-props'\r\nimport ReactFacebookLogin from 'react-facebook-login'\r\n\r\nfunction Login(props){\r\n  const {loginwithYahoo,loginwithFacebook,loginwithGoogle,setlName,lname,name, setName, email, setEmail, password, setPassword, handleLogin, handleSignup, hasAccount, setHasAccount, emailError, passwordError } = props\r\n  function determineLoading (){\r\n      if(props.loading) {\r\n       return <div class=\"lds-ring\"><div></div><div></div><div></div><div></div></div>\r\n      }else {\r\n        return 'Log in'\r\n      }\r\n  }\r\n  return (\r\n    <>\r\n     <Route exact path='/'>\r\n     <div className='login'>\r\n    \r\n        <div className=\"title\">\r\n        <i class=\"fal fa-comments\"></i>\r\n        <h1>{hasAccount?'Log In':'Register'}</h1>\r\n        </div>\r\n        <div className=\"spacer1\"></div>\r\n          <div className=\"logincontainer\">\r\n            <form onSubmit={(e)=>e.preventDefault()}>\r\n              <label style={{display: hasAccount?'none': 'flex'}}>\r\n                <span>Name</span>\r\n                <input type=\"text\" placeholder='John Doe' onChange={(e)=>setName(e.target.value)}/>\r\n              </label>\r\n\r\n              <label>\r\n                <span>Email</span>\r\n                <input type=\"text\" value={email} placeholder='store@mail.com' onChange={(e)=>setEmail(e.target.value)}/>\r\n                <p className='errormsgLogin'>{emailError}</p>\r\n              </label>\r\n              <label>\r\n                <span>Password</span>\r\n                <input type=\"password\" placeholder='password' value={password}onChange={(e)=>setPassword(e.target.value)}/>\r\n                <p className='errormsgLogin'>{passwordError}</p>\r\n              </label>\r\n              {hasAccount?\r\n              <div className='btnContainer'>\r\n                <button className='themeBtn' onClick={handleLogin}>{determineLoading()}</button>\r\n             <div className='flex' style={{textAlign: 'center'}}>\r\n             <Link exact to='/forgotpassword' className='forgotPasswordButton' >Forgot your password?</Link>\r\n              <small>Don't have an account<span onClick={()=>setHasAccount(!hasAccount)} style={{cursor: 'pointer'}}>? Register</span></small>\r\n             </div>\r\n                \r\n              </div>:\r\n              \r\n              <div className='btnContainer'>\r\n                  <button className='themeBtn' style={{marginBottom: '10px'}} onClick={handleSignup}>Register</button>\r\n                  <div className='flexrow'>\r\n                  <small>Already have an account<span onClick={()=>setHasAccount(!hasAccount)} style={{cursor:'pointer'}}>? Sign in</span></small>\r\n                  </div>\r\n                  \r\n              </div>}\r\n              <div className='flexrow'>\r\n              <button className='login-btn gog-btn' onClick={loginwithGoogle()}> <i class=\"fab fa-google\"></i></button>\r\n              <button className='login-btn fb-btn' onClick={loginwithFacebook()}><i className=\"fab fa-facebook\"></i></button>\r\n              <button className='login-btn yah-btn' onClick={loginwithYahoo()}><i class=\"fab fa-yahoo\"></i></button>\r\n              </div>\r\n              \r\n            </form> \r\n             \r\n          </div>\r\n        \r\n      </div>\r\n     </Route>\r\n     <Route exact path='/forgotpassword'>\r\n          <Forgotpassword />\r\n     </Route>\r\n     </>\r\n  )\r\n}\r\nexport default Login\r\n","import React, {useState, useEffect} from 'react'\r\nimport { BrowserRouter as Router,Switch,Route,Link,NavLink, Redirect } from \"react-router-dom\" \r\nimport firebase from 'firebase'\r\nimport {db} from '../Fire'\r\nfunction Users (props) {\r\n  // const [name, setName]=useState('')\r\n  // const [img, setImg]=useState('')\r\n  // const [city, setCity]=useState('')\r\n  // const [country, setCountry]=useState('')\r\n  // const [job, setJob]=useState('')\r\n  // const [recipnumber, setRecipnumber]=useState('')\r\n  // const [recipemail, setRecipemail]=useState('')\r\n  // const [recipwebsite, setRecipwebsite]=useState('')\r\n  // const [extend, setExtend]=useState(false)\r\n    const {convoinfo, setConvoinfo, el, setChatuser, chatuser}=props\r\n    const [recipimg, setRecipimg]=useState('')\r\n    // const {recipname, setRecipname, sendername, setSendername}=props\r\n    const [recipname, setRecipname] = useState('')\r\n    const [sendername, setSendername]=useState('')\r\n    const [activestatus, setActivestatus]=useState(false)\r\n    const [senderimg, setSenderimg]=useState('')\r\n    const [loading, setLoading]=useState(true)\r\n    const [msg, setMsg]=useState('')\r\n    const reg = /((?:(?!(?:https?|ftp):\\/\\/[\\S]*\\.(?:png|jpe?g|gif|svg|webp)).)+)|((?:https?|ftp):\\/\\/[\\S]*\\.(?:png|jpe?g|gif|svg|webp)(?:\\?\\S+=\\S*(?:&\\S+=\\S*)*)?)/gm\r\n    function ytVidId(url) {\r\n      var p = /^(?:https?:\\/\\/)?(?:www\\.)?(?:youtu\\.be\\/|youtube\\.com\\/(?:embed\\/|v\\/|watch\\?v=|watch\\?.+&v=))((\\w|-){11})(?:\\S+)?$/;\r\n    return (url.match(p)) ? RegExp.$1 : false\r\n    }\r\n    let user = firebase.auth().currentUser\r\n    function determineMsgtype(msg){\r\n      if(msg.message!==undefined){\r\n        if(msg.base64){\r\n          return `<span style='font-size: 0px; position: absolute'>${msg.message}</span><img src=\"${msg.message}\"/>`\r\n        }else if(msg.file){\r\n        return 'Sent a File'\r\n        }else if(msg.audio){\r\n            return 'Sent a recording'\r\n        }\r\n        else if(ytVidId(msg.message)){\r\n          return 'Sent a Video'\r\n        }\r\n        else {\r\n          return msg.message.replace(reg, (_, text, img) => text ? `<p>${text.trim()}</p>` : `<img src=\"${img}\" />`)\r\n\r\n        }\r\n      }\r\n\r\n    }\r\n    function lastMsg(msg) {\r\n      if(msg) {\r\n        if(msg.senderid===user.uid) {\r\n          return `<p>You:</p> ${determineMsgtype(msg)}`\r\n        }else {\r\n          return determineMsgtype(msg)\r\n       }\r\n      }\r\n     \r\n    }\r\n    useEffect(()=>{\r\n      db.collection('users').doc(el.convoinfo.recipientid).onSnapshot(snap=>{\r\n        const user = snap.data()\r\n        setRecipname(user.userinfo.name)\r\n        setRecipimg(user.userinfo.cover)\r\n        setActivestatus(user.userinfo.online)\r\n        setLoading(false)\r\n      })\r\n      db.collection('users').doc(el.convoinfo.creatorid).onSnapshot(snap=>{\r\n        const user = snap.data()\r\n        setSendername(user.userinfo.name)\r\n        setSenderimg(user.userinfo.cover)\r\n        setLoading(false)\r\n      })\r\n      db.collection('conversations').doc(el.convoinfo.convoid).onSnapshot(snap=>{\r\n        const msgs = snap.data()  \r\n        setMsg(msgs.messages[msgs.messages.length-1])\r\n      })\r\n    },[el.convoinfo.recipientid, el, chatuser])\r\n    return (\r\n   <>\r\n  <NavLink activeClassName='activelink' to={'/chat/'+el.convoinfo.convoid} onClick={()=>{setChatuser(el.convoinfo.creatorid===user.uid?el.convoinfo.recipientid:el.convoinfo.creatorid)}}>\r\n      <div className=\"user\">\r\n          <div className=\"profilepic\">\r\n          {loading?<div class=\"lds-ring\"><div></div><div></div><div></div><div></div></div>: <img src={el.convoinfo.creatorid===user.uid?recipimg:senderimg} alt=\"\"/>}\r\n          </div>\r\n        <div className=\"info flex\">\r\n          <p className='username'>{el.convoinfo.creatorid===user.uid?recipname.length>15?recipname.slice(0, 15)+'...':recipname:sendername.length>15?sendername.slice(0, 15)+'...':sendername}</p>\r\n          <small dangerouslySetInnerHTML={{__html: lastMsg(msg)}}></small>        \r\n          </div>\r\n      </div>\r\n  </NavLink>\r\n  </>\r\n  )\r\n}\r\nexport default Users","import React, {useState, useEffect, useContext} from 'react'\r\nimport { NavLink } from 'react-router-dom'\r\nimport Users from './Users'\r\nimport {db} from '../Fire'\r\nimport firebase from 'firebase'\r\nimport { ContextApp } from '../ContextAPI'\r\n\r\nfunction Userrow (props) {\r\n  const {themecolor}=useContext(ContextApp)\r\n  const [keyword, setKeyword]=useState('')\r\n  const pattern = new RegExp('\\\\b' + keyword.replace(/[\\W_]+/g,\"\"), 'i')\r\n\r\n    const {convoinfo, setConvoinfo, setChatuser, chatuser}= props \r\n    const [userlist, setUserlist]=useState([])\r\n    const [convos, setConvos]=useState([])\r\n    const id =db.collection('users').doc().id\r\n    const  user = firebase.auth().currentUser\r\n    const allconvos = convos && convos.sort((a, b) => b.lastmsgdate - a.lastmsgdate).map(el=>{\r\n      if(user){\r\n          return <Users   chatuser={chatuser} setChatuser={setChatuser} el={el} convoinfo={convoinfo} setConvoinfo={setConvoinfo}/>    \r\n\r\n      }else {\r\n        return null\r\n      }\r\n    })\r\n    useEffect(()=>{\r\n     db.collection('users').doc(user.uid).onSnapshot(user=>{\r\n       const userlist = user.data()\r\n       setUserlist(userlist)\r\n       db.collection('conversations').onSnapshot(snap=>{\r\n         let convos = []\r\n          snap.forEach(doc=>{\r\n            if(userlist.msgids.includes(doc.id)){\r\n              convos.push(doc.data())\r\n            }\r\n          })\r\n          setConvos(convos)\r\n       })\r\n     })\r\n    },[])\r\n  return (\r\n   <>\r\n    <h2>Chats</h2>\r\n     <div className=\"search abs\">\r\n      \r\n       <i class=\"far fa-plus\" style={{color: themecolor}} onClick={()=>props.setAdduser()}></i>\r\n       <input type=\"text\" placeholder='Search' onFocus={()=>props.setAdduser()}/>\r\n     </div> \r\n   \r\n     <div className=\"users\">\r\n     {allconvos}     \r\n     </div>\r\n    \r\n  </>\r\n  )\r\n}\r\nexport default Userrow","import React, { useState, useEffect, useContext } from \"react\";\r\nimport { ContextApp } from \"../ContextAPI\";\r\n\r\nfunction Hoverabletexticonflexrow(props) {\r\n  const { themecolor } = useContext(ContextApp);\r\n  const { icon, classNames, text, functionOne } = props;\r\n  return (\r\n    <div\r\n     \r\n      className={`${classNames} white`}\r\n      onClick={functionOne}\r\n    >\r\n      <i className={\"whiteel fad fa-\" + icon} ></i>\r\n        <p className='white' >{text}</p>\r\n    </div>\r\n  );\r\n}\r\nexport default Hoverabletexticonflexrow;\r\n","import React, { useContext, useEffect, useRef, useState } from 'react'\r\nimport {CSSTransition} from 'react-transition-group'\r\nimport { db } from '../Fire'\r\nimport firebase from 'firebase'\r\nimport { useHistory, useLocation } from 'react-router-dom'\r\nimport { ContextApp } from '../ContextAPI'\r\nimport Hoverabletexticonflexrow from './Hoverabletexticonflexrow'\r\n\r\nfunction Contextmenu(props){\r\n  const user =firebase.auth().currentUser\r\n  const {themebool, emojibool,type,setUpdatedMsg,copy,convoid,contextmenu, setContextmenu, contextstyle, msgid}=props\r\n  const [events, setEvents]=useState(false)\r\n  const [visible, setVisible]=useState(false)\r\n  const emojis = ['smile','angry','sad-cry','surprise']\r\n  const [msgs, setMsgs]=useState([])\r\n  const contextmenuSelector = useRef()\r\n  const location = useLocation()\r\n  const history = useHistory()\r\n  const {themecolor}=useContext(ContextApp)\r\n  const allemojis = [{\r\n    class: 'surprise yellow',\r\n    msg: 'Surprised'\r\n  },{\r\n    class: 'tired blue',\r\n    msg: 'Tired'\r\n  },\r\n  {\r\n    class: 'smile-wink yellow',\r\n    msg: 'Wink'\r\n  },\r\n  {\r\n    class: 'kiss-beam red',\r\n    msg: 'Love'\r\n  },\r\n  {\r\n    class: 'grin-stars yellow',\r\n    msg: 'Stars'\r\n  },\r\n  {\r\n    class: 'grin-squint-tears yellow',\r\n    msg: 'Laugh'\r\n  },\r\n  {\r\n    class: 'grimace yellow',\r\n    msg: 'Grimace'\r\n  }, \r\n  {\r\n    class: 'frown red',\r\n    msg: 'Frown'\r\n  },\r\n  {\r\n    class: 'heart red',\r\n    msg: 'Like'\r\n  }\r\n    ] \r\n \r\n  function sendReaction(opt){\r\n    let messages = {\r\n    reaction: `fad fa-${opt}`\r\n    }\r\n  msgs && msgs.map(msg=>{\r\n      if(msgid===msg.msgid){\r\n        let itemindex = msgs.indexOf(msg)\r\n        if(msg.senderid===user.uid){\r\n          msgs[itemindex].reaction1=`fad fa-${opt}`\r\n          db.collection('conversations').doc(convoid).update({\r\n              messages: msgs\r\n          })\r\n        }\r\n        else {\r\n          msgs[itemindex].reaction2=`fad fa-${opt}`\r\n          db.collection('conversations').doc(convoid).update({\r\n              messages: msgs\r\n          })\r\n        }\r\n      }\r\n  })\r\n    setContextmenu(false)\r\n  }\r\n  function copyFunc(msgid){\r\n    var r = document.createRange()\r\n    let text = document.querySelector(`#${msgid} .msg`)\r\n    r.selectNode(text)\r\n    window.getSelection().removeAllRanges()\r\n    window.getSelection().addRange(r)\r\n    document.execCommand('copy')\r\n    window.getSelection().removeAllRanges()\r\n    setContextmenu(false)\r\n  }\r\n\r\n  function deleteFunc(){\r\n    msgs && msgs.map(msg=>{\r\n      if(msgid===msg.msgid&&msg.senderid===user.uid){\r\n        let itemindex = msgs.indexOf(msg)\r\n        msgs.splice(itemindex, 1) \r\n        db.collection('conversations').doc(convoid).update({\r\n            messages: msgs\r\n        })\r\n      }\r\n  })\r\n    setContextmenu(false)\r\n  }\r\n  function editFunc(){\r\n          let edit = document.querySelector(`#${msgid} p`)\r\n          edit.setAttribute('contentEditable', 'true')\r\n\r\n          edit.oninput=(e)=>{\r\n            setUpdatedMsg(e.currentTarget.textContent)\r\n          }\r\n\r\n          setContextmenu(false)\r\n\r\n    }\r\n  const emojisrow = emojis.map(opt=>{\r\n    return <div onClick={()=>sendReaction(opt)}> <i className={'fad fa-'+(opt==='cry'?'sad-cry':opt)} ></i>  </div>\r\n\r\n  })\r\n  const allemojisrow = allemojis.map(emoji=>{\r\n    return <div onClick={()=>sendReaction(emoji.class)}>\r\n        <i className={emoji.class==='heart red'?'fas fa-'+emoji.class:'fad fa-'+emoji.class}></i>\r\n        <p>{emoji.msg}</p>\r\n    </div>\r\n  })\r\n  document.addEventListener('click', function(e){\r\n      const target = e.target\r\n      if(target!==contextmenuSelector.current){\r\n        setContextmenu(false)\r\n      }\r\n  })\r\n  useEffect(()=>{\r\n    if(type==='msg'){\r\n      db.collection('conversations').doc(convoid).onSnapshot(snap=>{\r\n        setMsgs(snap.data().messages)\r\n      })\r\n    }\r\n   \r\n  },[convoid])\r\n\r\n\r\n  return (\r\n    <>\r\n    {\r\n      type==='msg'?   <div  ref={contextmenuSelector}  onContextMenu={(e)=>e.preventDefault()} className=\"contextmenu bs\" style={{display: contextmenu?'flex':'none', left: contextstyle.left+'px', top: contextstyle.top+'px'}}>\r\n       <div className='emojis'>{emojisrow}</div>\r\n       <div className={'option laugh' } onMouseOver={()=>setVisible(true)} onMouseLeave={()=>setVisible(false)}>\r\n         <i className='fad fa-laugh'></i> <p>Reaction</p>\r\n         <CSSTransition\r\n          in={visible}\r\n          timeout={200}\r\n          classNames=\"drophover\"\r\n          unmountOnExit\r\n          >\r\n        <div className='dropmenu bs'>\r\n        {allemojisrow}\r\n        </div>\r\n        </CSSTransition>\r\n        </div>\r\n    <div className={'option copy'} onClick={()=>copyFunc(msgid)}>\r\n    <i className='fal fa-copy'></i> <p>Copy</p>\r\n   </div>    \r\n   {/* <div className={'option edit'} onClick={()=>editFunc()}>\r\n    <i className='fal fa-edit'></i> <p>Edit</p>\r\n   </div> */}\r\n\r\n   <div className={'option delete'} onClick={()=>deleteFunc()}>\r\n    <i className='fal fa-trash'></i> <p>Delete</p>\r\n   </div>\r\n    </div>\r\n    :type==='settings'?\r\n    <div ref={contextmenuSelector}  onContextMenu={(e)=>e.preventDefault()} className=\"contextmenu bs\" style={{display: contextmenu?'flex':'none', left: contextstyle.left+'px', top: contextstyle.top+'px'}}>\r\n        \r\n        {(emojibool ===true ||  themebool===true ||type==='settings')?'':<>\r\n        <Hoverabletexticonflexrow classNames={'option'} functionOne={()=>props.setThemebool(true)} icon={'adjust'} text={'Theme'}/>\r\n        <Hoverabletexticonflexrow classNames={'option'} functionOne={()=>props.setEmojibool(true)} icon={props.emojitype} text={'Emoji'}/>\r\n        </> }\r\n        <Hoverabletexticonflexrow classNames={'option'} functionOne={()=>window.location.reload()} icon={'sync'} text={'Reload'}/>\r\n        <Hoverabletexticonflexrow classNames={'option'} functionOne={()=>history.goForward()} icon={'long-arrow-alt-right'} text={'Forward'}/>\r\n        <Hoverabletexticonflexrow classNames={'option'} functionOne={()=>history.goBack()} icon={'undo'} text={'Previous'}/>\r\n       \r\n    </div>\r\n    :\r\n    ''\r\n    }\r\n    </>\r\n  )\r\n}\r\nexport default Contextmenu","import React, {useState, useEffect} from 'react'\r\n\r\nfunction ElapsedTime(props) {\r\n \r\n  const [elapsedTime, setElapsedTime] = useState('')\r\n  const [regdate, setRegDate] = useState('')\r\n  const [providedtime, setProvidedTime] = useState(props.providedtime)\r\n\r\n  function msToTime(duration) {\r\n    let date = new Date()\r\n    let minutes = Math.floor((duration / (1000 * 60)) % 60),\r\n    hours = Math.floor((duration / (1000 * 60 * 60)) % 24)\r\n    let pday = providedtime.getDate()\r\n    let pmonth = providedtime.getMonth()\r\n    let pyear = providedtime.getFullYear()\r\n    let day = date.getDate()\r\n    let month = date.getMonth()\r\n    let year = date.getFullYear() \r\n    if(pday===day && pmonth===month && pyear===year && hours < 24) {\r\n      if(hours < 1) {\r\n        if(minutes < 1)\r\n          return \"A few seconds ago\"\r\n        else if (minutes === 1)\r\n          return \"A minute ago\"\r\n        else \r\n          return minutes+\" minutes ago\"\r\n      }\r\n      else if(hours === 1) \r\n        return \"One hour ago\"\r\n      else \r\n        return hours+\" hours ago\"\r\n    }\r\n    else {\r\n      return providedtime.toString().split(' ').slice(1,4).toString().replaceAll(',',' ') \r\n    }\r\n  } \r\n\r\n  useEffect(() => {\r\n    var storedDate = new Date(providedtime)\r\n    var nowDate = new Date()\r\n    var elapsedTime = nowDate.getTime() - storedDate.getTime()\r\n    setElapsedTime(msToTime(elapsedTime))\r\n  },[props.updateelapsed, providedtime])\r\n\r\n  return <>{elapsedTime}</> \r\n}\r\n\r\nexport default ElapsedTime","import React, { Component, useContext, useState } from 'react'\r\nimport { saveAs } from 'file-saver';\r\n\r\nimport AudioReactRecorder, { RecordState } from 'audio-react-recorder'\r\nimport styled from 'styled-components'  \r\nimport { ContextApp } from '../ContextAPI'\r\nimport firebase from 'firebase'\r\nimport { db } from '../Fire'\r\n\r\nconst Iconspecial = styled.i `\r\ncolor: ${props=>props.color};\r\nbackground-color: white;\r\n&:hover {\r\n  color: white;\r\n  background-color:  ${props=>props.color};\r\n}\r\n`\r\nfunction Recorder(props) {\r\n  \r\n  const user = firebase.auth().currentUser\r\n  const {convoid, progressbar, progresswidth}=props\r\n  const {themecolor}= useContext(ContextApp)\r\n  const [record, setRecord] = useState(null)\r\n  const [audio, setAudio] = useState('blob:https://5guz4.csb.app/2ff8746b-44d6-4c3f-b531-480291e7aa84')\r\n  const [update, setUpdate]=useState(0)\r\n  const [clicked, setClicked]=useState(false)\r\n  const [reset, setReset]=useState(false)\r\n  let id = db.collection('conversations').doc().id\r\n\r\n  function start() {\r\n    setRecord(RecordState.START)\r\n  }\r\n \r\n  function stop() {\r\n      setRecord(RecordState.STOP)\r\n  }\r\n  //audioData contains blob and blobUrl\r\n    const onStop = (audioData) => {\r\n    if(!reset){\r\n      var FileSaver = require('file-saver');\r\n      const storageRef =  firebase.storage().ref(`${convoid}/recording.mp3`)\r\n      var reader = new FileReader();\r\n      reader.readAsDataURL(audioData.blob); \r\n      reader.onloadend = function() {\r\n          var base64data = reader.result;                \r\n          function urltoFile(url, filename, mimeType){\r\n            return (fetch(url)\r\n                .then(function(res){return res.arrayBuffer();})\r\n                .then(function(buf){return new File([buf], filename,{type:mimeType});})\r\n            );\r\n        }\r\n        \r\n        //Usage example:\r\n        urltoFile(base64data, 'recording.wav','audio/wav')\r\n        .then(\r\n          function(file){ \r\n\r\n              const storageRef =  firebase.storage().ref(`${convoid}/${id}.wav`)\r\n\r\n    const task =  storageRef.put(file)\r\n      task.on('state_changes',\r\n\r\n        function progress(snap){\r\n          progressbar.current.style.display='flex'\r\n          const percentage =( snap.bytesTransferred/snap.totalBytes)*100\r\n         progresswidth.current.style.height=`${percentage}%`\r\n        }, \r\n        function error(err){\r\n\r\n        },\r\n        function complete(){\r\n  \r\n              let msgobject = {\r\n            message: `https://firebasestorage.googleapis.com/v0/b/${storageRef.bucket}/o/${convoid}%2F${id}.wav?alt=media`,\r\n            reaction: \"\",\r\n            msgdate: firebase.firestore.Timestamp.now(),\r\n            msgid: db.collection(\"conversations\").doc().id,\r\n            read: false,\r\n            senderid: user.uid,\r\n            editing: false,\r\n            nobackground: true,\r\n            emoji: true,\r\n            base64: false,\r\n            audio: true\r\n          };\r\n          db.collection(\"conversations\")\r\n          .doc(convoid)\r\n          .update({\r\n            messages: firebase.firestore.FieldValue.arrayUnion(msgobject)\r\n          });\r\n          progressbar.current.style.display='none'\r\n\r\n    })    \r\n          });\r\n\r\n}\r\n\r\n    }else {\r\n      setReset(false)\r\n    }\r\n  }\r\n  \r\n  const [time, setTime] = useState(0)\r\n  const [intervalId, setIntervalId] = useState();\r\n  function startRecord() {\r\n      start()\r\n      setClicked(true)\r\n      setIntervalId(setInterval(() => {\r\n          setTime(prev => prev + 1)\r\n      }, 1000));\r\n  }\r\n  \r\n  function stopRecord() {\r\n      setTime(0)\r\n      stop()\r\n      setClicked(false)\r\n      clearInterval(intervalId);\r\n  }\r\n  function resetRecord(){\r\n    setReset(true)\r\n    stop()\r\n  }\r\n    return (\r\n      <>\r\n        <AudioReactRecorder state={record} onStop={onStop} />\r\n        {!clicked?<Iconspecial color={themecolor} className='icondiv fal fa-microphone' onClick={()=>{startRecord(); }}></Iconspecial>:\r\n        <div class=\"spinner-wave\" onClick={()=>{stopRecord(); }}>\r\n        <div></div>\r\n        <div></div>\r\n        <div></div>\r\n        <div></div>\r\n        <div></div>\r\n       \r\n        <span className=\"time\">\r\n          {time}\r\n        </span>\r\n        <Iconspecial color={themecolor} className=\"left fal fa-times-circle\" onClick={()=>resetRecord()}></Iconspecial>\r\n\r\n      </div>\r\n      }\r\n        {/* <button onClick={()=>start()}>Start</button>\r\n        <button onClick={()=>stop()}>Stop</button> */}\r\n      </>\r\n    )\r\n  }\r\n\r\nexport default Recorder","import React, { useState, useEffect, useContext } from \"react\";\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n  Link,\r\n  NavLink,\r\n  Redirect\r\n} from \"react-router-dom\";\r\nimport { ContextApp } from \"../ContextAPI\";\r\nimport styled from 'styled-components'  \r\nimport Recorder from \"./Recorder\";\r\n\r\nconst Button =  styled.button `\r\n&:hover {\r\n  background-color: ${props=>props.color}\r\n}\r\n`\r\nconst Icon = styled.i `\r\ncolor: ${props=>props.color};\r\n\r\n`;\r\nconst Iconspecial = styled.i `\r\ncolor: ${props=>props.color};\r\nz-index: 10;\r\nbackground-color: white;\r\n&:hover {\r\n  color: white;\r\n  background-color:  ${props=>props.color};\r\n}\r\n`\r\nconst Span = styled.span `\r\n&:hover {\r\n  background-color: ${props=>props.color}\r\n}\r\n`;\r\nfunction Hoverableicondiv(props) {\r\n  const { inputref,progresswidth, progressbar,convoid,setImg,sendFile,special,icon,type, classNames, setState, state, lnk, setState2, handleEvent } = props;\r\n  const { themecolor } = useContext(ContextApp);\r\n  function chatFuncDisplay(){\r\n    setState2(false);\r\n     setTimeout(()=>{\r\n      setState(false)\r\n     },400)\r\n  }\r\n  return  (\r\n    <>\r\n    { type && type==='link'?    \r\n      <Link  to={lnk} id='sth' onClick={()=>{chatFuncDisplay()}}>\r\n      <Span color={themecolor} className={`icondiv ${classNames}`}>\r\n      <Icon color={themecolor} className={\" fal fa-\" + icon}></Icon>\r\n     </Span>\r\n    </Link>\r\n    :special?\r\n    <label style={{zIndex: 4, cursor: 'pointer'}}>\r\n        {type==='microphone'?<Recorder convoid={convoid} progressbar={progressbar} progresswidth={progresswidth}/>: \r\n        <><input type={type} ref={inputref} className={`${icon}file`}style={{display: 'none'}} onChange={()=>sendFile(icon)} accept={icon==='image'?\"image/*\":icon==='film'?'\"video/mp4,video/x-m4v,video/*, mp4\"':''}/>\r\n         <Iconspecial color={themecolor} className={\"icondiv fal fa-\" + icon} ></Iconspecial></>}\r\n\r\n    </label>\r\n    :\r\n    <Button color={themecolor} className={`icondiv ${classNames}`} onClick={()=>{setState && setState(!state); handleEvent&&handleEvent()}}>\r\n         <Icon color={themecolor} className={\" fal fa-\" + icon} ></Icon>\r\n      </Button>\r\n  }\r\n    </>\r\n\r\n  );\r\n}\r\nexport default Hoverableicondiv;\r\n","import React, {useState, useEffect} from 'react'\r\nimport { BrowserRouter as Router,Switch,Route,Link,NavLink, Redirect } from \"react-router-dom\" \r\n\r\nfunction Iframe (props) {\r\n  const {link, type}= props\r\n  return (\r\n<>\r\n  {\r\n    type==='video'?\r\n      <video controls src={link}  allowFullScreen>\r\n         \r\n      </video>\r\n      :\r\n      <iframe src={link} allowFullScreen>\r\n\r\n      </iframe>\r\n}\r\n</>\r\n  )\r\n}\r\nexport default Iframe","import React, {useState, useEffect} from 'react'\r\nimport { BrowserRouter as Router,Switch,Route,Link,NavLink, Redirect } from \"react-router-dom\" \r\n\r\nfunction Img (props) {\r\n  const {src, link}= props\r\n  return (\r\n    <>\r\n    {link?   <span style={{fontSize: '0px', position:'absolute'}}>{src}</span>:''}\r\n    <img src={src}/>\r\n    </>\r\n  )\r\n}\r\nexport default Img","import React, {useState, useEffect} from 'react'\r\nimport { BrowserRouter as Router,Switch,Route,Link,NavLink, Redirect } from \"react-router-dom\" \r\n\r\nfunction File (props) {\r\n  const {link, name}= props\r\n  return (\r\n\r\n      <a href={link} target='_blank' className='file'><i className='fal fa-file'> </i><span>Download {name}</span></a>\r\n\r\n  )\r\n}\r\nexport default File","import React, {useState, useEffect, useRef} from 'react'\r\nimport { BrowserRouter as Router,Switch,Route,Link,NavLink, Redirect } from \"react-router-dom\" \r\n\r\nfunction Recording (props) {\r\n  const {src}= props\r\n  const video =useRef()  \r\n  const playBtn = useRef()\r\n  const progress = useRef()\r\n  const playPause = useState(false)\r\n  function togglePlayPause(e){\r\n    if(video.current.paused){\r\n      video.current.play()\r\n      e.target.className='fal fa-pause'\r\n    }\r\n    else {\r\n      video.current.pause()\r\n      e.target.className='fal fa-play'\r\n    }\r\n  }\r\nfunction updateProgress(){\r\n    const progresswidth = video.current.currentTime/video.current.duration\r\n    setTime((video.current.duration-video.current.currentTime).toFixed(1))\r\n    progress.current.style.width=progresswidth*100+'%'\r\n    if(video.current.ended){\r\n      playBtn.current.className='fal fa-play'\r\n    }\r\n    }\r\n    const [time, setTime]=useState('')\r\n    function determineMinSecH(time){\r\n      if(time>60){\r\n        return (time / 60).toFixed(0) +' m'\r\n      }else if (time>3600){\r\n        return (time/3600).toFixed(1) + ' h'\r\n      }else {\r\n        return Math.round(time) + ' s'\r\n      }\r\n    }\r\n  return (\r\n    <div className='videoContainer'> \r\n      <video onLoadedData={()=>setTime(video.current.duration.toFixed(1))} onTimeUpdate={()=>updateProgress()} src={src} id='video' ref={video}></video>\r\n        <div className=\"controls\">\r\n          <i className=\"fal fa-play\" ref={playBtn} onClick={(e)=>togglePlayPause(e)}></i>\r\n          <div className=\"progressvideo\">\r\n            <div className=\"progress\" ref={progress}></div>\r\n          </div>\r\n          <small>{determineMinSecH(time)}</small>\r\n        </div>\r\n    </div>\r\n   \r\n  )\r\n}\r\nexport default Recording","import React from 'react'\r\n\r\nexport function Search({search, setSearch, fetchData, setTitle}) {\r\n// Handle Submit\r\nconst handleSubmit = (e)=>{\r\n    // Prevent default\r\n    e.preventDefault();\r\n    // Set Title\r\n    setTitle(search);\r\n    // Fetch\r\n    fetchData(search);\r\n    // Reset form search value\r\n    setSearch('');\r\n}\r\n\r\n// RETURN    \r\n    return (\r\n\r\n            <form className='gif-search flexrow' onSubmit={handleSubmit}>\r\n              <div className=\"gifform flexrow\">\r\n              <button className='themeBtn'>\r\n            <i className=\"fal fa-search\"></i>\r\n            </button>\r\n              <input \r\n            className='inputgif'\r\n            type=\"text\"\r\n            value={search}\r\n            onChange={ e => {setSearch(e.target.value)}}\r\n            placeholder='Search GIFs'\r\n            /> \r\n       \r\n              </div>\r\n            </form>\r\n    )\r\n}\r\n","import React, { useState, useEffect, useContext } from \"react\";\r\n\r\nimport { ContextApp } from \"../ContextAPI\";\r\nimport styled from 'styled-components'\r\nconst Button = styled.button ` \r\nbackground-color: ${props=>props.color};\r\nborder: solid 3px transparent;\r\n  &:hover {\r\n    background-color: white;\r\n    border: solid 3px ${props=>props.color}\r\n  }\r\n`\r\nfunction Hoverablebutton(props) {\r\n  const { themecolor } = useContext(ContextApp);\r\n  const { state, setState, type, text } = props;\r\n\r\n  return (      \r\n      <Button \r\n      color={themecolor}\r\n       className={state===type?'themeBtn active':'themeBtn'}\r\n        onClick={()=>setState(type)}\r\n      > \r\n        {text}\r\n      </Button>\r\n    );\r\n}\r\nexport default Hoverablebutton;\r\n","import React from 'react'\r\nimport axios from 'axios'\r\n\r\nimport {Search} from './Search'\r\nimport Hoverablebutton from '../Hoverablebutton';\r\nimport Hoverableicondiv from '../Hoverableiconsdiv';\r\nimport firebase from 'firebase'\r\nimport {db} from '../../Fire'\r\n\r\nexport default function Gif(props) {\r\n    // STATEs\r\n    const {setGif, convoid, chatuser, notifibool, chatimg}=props\r\n    const [data, setData] = React.useState([]);\r\n    const [title, setTitle] = React.useState('Gif');\r\n    const [loader, setLoader] = React.useState(true);\r\n    const [offset, setOffset] = React.useState(0);\r\n    const [limit, setLimit] = React.useState(10)\r\n    const [totalCount, setTotalCount] = React.useState(0)\r\n    const [search, setSearch] = React.useState('');\r\n    const [trending, setTrending] = React.useState(false)\r\n    const [trendSearch, setTrendSearch] = React.useState(false)\r\n    const [tSearch, setTsearch] = React.useState([])\r\n    const date = firebase.firestore.FieldValue.serverTimestamp()\r\n    const user =firebase.auth().currentUser\r\n//\r\n// ─── FETCH ──────────────────────────────────────────────────────────────────────\r\nconst fetchData = async (title)=>{\r\nlet URL = `https://api.giphy.com/v1/gifs/search?q=${title}&api_key=nn7ZohI4KJCwSXdYVpViEi7RkUmJacV3&limit=${limit}&offset=${offset}`;\r\n// Try and catch\r\ntry{\r\n    let fetchGif = await axios(URL);\r\n    let fetchRes = await fetchGif;\r\n    if(fetchRes.status === 200){\r\n    // Set Data\r\n    setData(fetchRes.data.data)\r\n    // Set Total Count\r\n    setTotalCount(fetchRes.data.pagination.total_count)\r\n    // Set loader false\r\n    setLoader(false)\r\n     // Call new content\r\n     content()\r\n     // Set fetch random false\r\n     if(trending){\r\n     setTrending(false)\r\n    // Reset offset\r\n    setOffset(0)\r\n     }\r\n     // Set trend searching\r\n     setTrendSearch(false)\r\n    \r\n    }\r\n}\r\ncatch(error){\r\n    if(error) throw error\r\n}\r\n\r\n}\r\n// Remove image\r\n// const removeImage = id => {\r\n//     setData(\r\n//      data.filter(gif => gif.id !== id)\r\n//     )\r\n//   }\r\n// USE EFFECT on offset change fetch new data\r\nReact.useEffect(()=>{\r\n\r\n    if(!trending){\r\n    fetchData(title)\r\n    }\r\n},[offset])\r\n\r\n //\r\n // ─── HANDLE DOWNLOAD ────────────────────────────────────────────────────────────\r\n     \r\nconst handleDownload = (url)=>{\r\n    var xhr = new XMLHttpRequest();\r\n    xhr.open(\"GET\", url, true);\r\n    xhr.responseType = \"blob\";\r\n    xhr.onload = function(){\r\n        let urlCreator = window.URL || window.webkitURL;\r\n        let imageUrl = urlCreator.createObjectURL(this.response);\r\n        let tag = document.createElement('a');\r\n        tag.href = imageUrl;\r\n        tag.download = title.charAt(0).toUpperCase() + title.slice(1);\r\n        document.body.appendChild(tag);\r\n        tag.click();\r\n        document.body.removeChild(tag);\r\n    }\r\n    xhr.send();\r\n}\r\n\r\n// Scroll on top function\r\nconst onTop = () => {\r\n    let options = { top: 0, left: 0, behavior: 'smooth' };\r\n    window.scrollTo(options);\r\n}\r\n\r\n// Handle Next Pagination\r\nconst handleNext = ()=>{\r\n    // Set loader true\r\n    setLoader(true);\r\n    // Add one page\r\n    setOffset(offset + limit)\r\n    // Go on top\r\n    onTop()\r\n}\r\n// Handle prev Pagination\r\nconst handlePrev = ()=>{\r\n    // Loader true\r\n    setLoader(true);\r\n    // One page\r\n    setOffset(offset - limit) \r\n    // Go on top\r\n    onTop()\r\n}\r\nfunction sendGif(img){\r\n    let msgobject = {\r\n        message: img,\r\n        reaction1: \"\",\r\n        reaction2: \"\",\r\n        msgdate: firebase.firestore.Timestamp.now(),\r\n        msgid: db.collection(\"conversations\").doc().id,\r\n        read: false,\r\n        senderid: user.uid,\r\n        editing: false,\r\n        nobackground: true,\r\n        emoji: true,\r\n        base64: true\r\n      };\r\n      db.collection(\"conversations\")\r\n        .doc(convoid)\r\n        .update({\r\n          lastmsgdate: date,\r\n          messages: firebase.firestore.FieldValue.arrayUnion(msgobject)\r\n        });\r\n        let notificationobj = {\r\n            notifimsg: img,\r\n            notifidate: firebase.firestore.Timestamp.now(),\r\n            read: false,\r\n            sender: user.displayName,\r\n            gif: true,\r\n            id: convoid,\r\n            senderid: user.uid,\r\n            notifiid: db.collection('users').doc().id          }      \r\n          if(notifibool){\r\n            db.collection('notifications').doc(chatuser).update({\r\n              notifications: firebase.firestore.FieldValue.arrayUnion(notificationobj)\r\n            })\r\n          }\r\n}\r\n //\r\n // ─── RENDER CONTENT ─────────────────────────────────────────────────────────────\r\n     \r\nconst content = () => {\r\n    switch(true) {\r\n    // If loader is true show loader spinner\r\n      case loader:\r\n        return <div>Loading...</div>\r\n    // If data array more than zero loop through\r\n      case data.length > 0:\r\n        return  data.map(g=> {\r\n            return (\r\n                <div className='gif-card' key={g.id}>\r\n                <img className='image' onClick={()=>sendGif(g.images.fixed_height.url)} src={g.images.fixed_width.url} alt=\"gif\"/>\r\n                </div>\r\n            )\r\n        })\r\n\r\n    // Otherwise return default\r\n      default:\r\n        return data\r\n    }\r\n  }\r\n\r\n//\r\n// ─── RETURN ─────────────────────────────────────────────────────────────────────\r\n    \r\nreturn (\r\n    <div className='gif bs'>\r\n        <header>\r\n        <i className=\"fal fa-times\" onClick={()=>setGif(false)}></i>\r\n        <h2>Search GIFs</h2>\r\n        <Search search={search} setSearch={setSearch} fetchData={fetchData} setTitle={setTitle}/>\r\n\r\n        </header>\r\n    \r\n        <div className='gif-wrap'>\r\n      \r\n        {trendSearch ? \r\n        (\r\n            <div className='gif-trend-search'>\r\n            <ul> \r\n            {tSearch.map((t,i)=> <li key={i}><strong>{i + 1}</strong> {t.toUpperCase()}</li>)}\r\n            </ul>\r\n            </div>\r\n        )\r\n        :\r\n        ''\r\n        }\r\n          {content()}\r\n        </div>\r\n        <div className=\"flexrow np-btn\">\r\n        <button className='themeBtn flex' s onClick={handlePrev}><i class=\"fad fa-backward\"></i></button>\r\n        <button className='themeBtn flex' onClick={handleNext}><i class=\"fad fa-forward\"></i></button>\r\n        </div>\r\n\r\n       \r\n    </div>\r\n)\r\n}\r\n","import React, {useState, useEffect} from 'react'\r\nimport { BrowserRouter as Router,Switch,Route,Link,NavLink, Redirect } from \"react-router-dom\" \r\n\r\nfunction Contextoptions (props) {\r\n  const {text,classNames, icon, function1, setState, re}= props\r\n  return (\r\n    <div className={classNames} ref={re &&re}onClick={(e)=>{setState && setState(prev=>!prev);e.stopPropagation(); function1 && function1()}}>\r\n    <i className={icon} ></i>\r\n    </div>\r\n  )\r\n}\r\nexport default Contextoptions","\r\nimport React, {useState, useEffect, useRef} from 'react'\r\nimport { BrowserRouter as Router,Switch,Route,Link,NavLink, Redirect } from \"react-router-dom\" \r\nimport Contextoptions from './Contextoptions'\r\nimport {db} from '../../Fire'\r\nimport Contextmenu from '../Contextmenu'\r\nimport { displayName } from 'react-addons-css-transition-group'\r\nfunction Threedots (props) {\r\n  const {msg, user, msgs, convoid}= props\r\n  const [visible, setVisible]=useState(false)\r\n  const [emojis, setEmojis]=useState(false)\r\n  const [msgidedit, setMsgidedit]=useState('')\r\n  const allemojis = [\r\n  {\r\n    class: 'smile-wink yellow',\r\n    msg: 'Wink'\r\n  },\r\n  {\r\n    class: 'kiss-beam red',\r\n    msg: 'Love'\r\n  },\r\n  {\r\n    class: 'grin-stars yellow',\r\n    msg: 'Stars'\r\n  },\r\n  {\r\n    class: 'grin-squint-tears yellow',\r\n    msg: 'Laugh'\r\n  },\r\n  {\r\n    class: 'frown red',\r\n    msg: 'Frown'\r\n  },\r\n  {\r\n    class: 'heart red',\r\n    msg: 'Like'\r\n  }\r\n    ] \r\n    function sendReaction(opt){\r\n      msgs && msgs.map(msg=>{\r\n          if(msgidedit===msg.msgid){\r\n            let itemindex = msgs.indexOf(msg)\r\n            if(msg.senderid===user.uid){\r\n              msgs[itemindex].reaction1=`fad fa-${opt}`\r\n              db.collection('conversations').doc(convoid).update({\r\n                  messages: msgs\r\n              })\r\n            }else {\r\n              msgs[itemindex].reaction2=`fad fa-${opt}`\r\n              db.collection('conversations').doc(convoid).update({\r\n                  messages: msgs\r\n              })\r\n            }\r\n          }\r\n      })\r\n    }\r\n    const emojisrow = allemojis && allemojis.map(emoji=>{\r\n      return <i  className={'fad fa-'+emoji.class} onClick={()=>{sendReaction(emoji.class); setVisible(false)}}></i>\r\n    })\r\n    const contextoption = useRef()\r\n    const emojiref = useRef()\r\n\r\n  // function reactionMsg(msgid){\r\n  //   msgs && msgs.map(msg=>{\r\n  //     if(msgid===msg.msgid){\r\n  //       let itemindex = msgs.indexOf(msg)\r\n  //       msgs[itemindex].reaction=`fad fa-${opt}`\r\n  //       db.collection('conversations').doc(convoid).update({\r\n  //           messages: msgs\r\n  //       })\r\n  //     }\r\n  // })\r\n  // }\r\n\r\n  function copyMsg(){\r\n    var r = document.createRange()\r\n    let text = document.querySelector(`#${msgidedit} .msg`)\r\n    if(text){\r\n      r.selectNode(text)\r\n      window.getSelection().removeAllRanges()\r\n      window.getSelection().addRange(r)\r\n      document.execCommand('copy')\r\n      window.getSelection().removeAllRanges()\r\n      setVisible(false)\r\n    }\r\n  }\r\n  function deleteMsg(){\r\n    msgs && msgs.map(msg=>{\r\n      if(msgidedit===msg.msgid&&msg.senderid===user.uid){\r\n        let itemindex = msgs.indexOf(msg)\r\n        msgs.splice(itemindex, 1) \r\n        db.collection('conversations').doc(convoid).update({\r\n            messages: msgs\r\n        })\r\n        setVisible(false)\r\n      }\r\n  })\r\n\r\n  }\r\n \r\n  function msgOptions(msg){\r\n\r\n  }\r\n  const threedots = useRef()\r\n  document.addEventListener('click', function(e){\r\n  if(e.target!==threedots.current){\r\n    setVisible(false)\r\n    setEmojis(false)\r\n  }\r\n})\r\n  return (\r\n    <>\r\n      <i ref={threedots}onClick={(e)=>{msgOptions(msg); setMsgidedit(msg.msgid); setVisible(!visible)}} className={msg.senderid === user.uid ?\"fal fa-ellipsis-v-alt rightdots\":'fal fa-ellipsis-v-alt leftdots'}></i>\r\n      <div onContextMenu={(e)=>e.preventDefault()} onClick={(e)=>e.stopPropagation()} className='flexrow optionsEdit' ref={contextoption} data-id={msg.msgid} style={{display: visible?'flex':'none'}}>\r\n      <div className=\"emojisdiv\">\r\n      <Contextoptions classNames={'laugn'} icon={'fad fa-laugh'} setState={setEmojis} re={emojiref}/>\r\n      <div  onClick={(e)=>e.stopPropagation()} className=\"emojisrow flexrow bs\" style={{display: emojis?'flex':'none',  zIndex: 'var(--high-priority)'}}>\r\n        {emojisrow}\r\n      </div>\r\n      </div>\r\n       <Contextoptions classNames={'copy'} icon={'fad fa-copy'} function1={()=>copyMsg()}/>\r\n       <Contextoptions classNames={'delete'} icon={'fad fa-trash'} function1={()=>deleteMsg()}/>\r\n      </div>\r\n    </>\r\n      )\r\n}\r\nexport default Threedots","import React, { useState, useEffect, useRef, useContext } from \"react\";\r\nimport { NavLink, Route, Link } from \"react-router-dom\";\r\nimport Users from \"./Users\";\r\nimport firebase from \"firebase\";\r\nimport { db } from \"../Fire\";\r\nimport Contextmenu from \"./Contextmenu\";\r\nimport { FilePond, File, registerPlugin } from \"react-filepond\";\r\nimport \"filepond/dist/filepond.min.css\";\r\nimport { CSSTransition, TransitionGroup } from \"react-transition-group\";\r\nimport ElapsedTime from \"./Elapsedtime\";\r\nimport { ContextApp } from \"../ContextAPI\";\r\nimport Hoverableicondiv from \"./Hoverableiconsdiv\";\r\nimport InnerImageZoom from \"react-inner-image-zoom\";\r\nimport Iframe from \"./msgcomponents/Iframe\";\r\nimport Img from './msgcomponents/Img'\r\nimport Filemsg from './msgcomponents/File'\r\nimport P from './msgcomponents/P'\r\nimport Recording from \"./msgcomponents/Recording\";\r\nimport Gif from \"./Gifs.js/Gif\";\r\nimport ReactTimeAgo from 'react-time-ago'\r\nimport ReactImageMagnify from 'react-image-magnify';\r\nimport Contextoptions from \"./msgcomponents/Contextoptions\";\r\nimport Threedots from \"./msgcomponents/Threedots\";\r\nimport ScrollContainer from 'react-indiana-drag-scroll';\r\nimport { ReactTinyLink } from 'react-tiny-link'\r\nimport Picker from 'emoji-picker-react';\r\n\r\nfunction Dialogue(props) {\r\n  const {\r\n    themecolor,\r\n    notifi,\r\n    setNotifi,\r\n    notificont,\r\n    setNotificont\r\n  } = useContext(ContextApp);\r\n  const [gif, setGif]=useState(false)\r\n  const [msgs, setMsgs] = useState([]);\r\n  const [msgstring, setMsgstring] = useState(\"\");\r\n  const [updateelapsed, setUpdateelapsed] = useState(0);\r\n  const [typing, setTyping] = useState(false);\r\n  const [realtyping, setRealtyping] = useState(false);\r\n  const [typerid, setTyperid] = useState(\"\");\r\n  const [activestatus, setActivestatus] = useState(false);\r\n  const [recipname, setRecipname] = useState(\"\");\r\n  const [recipimg, setRecipimg] = useState(\"\");\r\n  const [recipcity, setRecipcity] = useState(\"\");\r\n  const [recipcountry, setRecipcountry] = useState(\"\");\r\n  const [userimg, setUserimg] = useState(\"\");\r\n  const [username, setUsername] = useState(\"\");\r\n  const [visible, setVisible] = useState(false);\r\n  const [contextmenu, setContextmenu] = useState(false);\r\n  const [contextstyle, setContextstyle] = useState({\r\n    top: 0,\r\n    left: 0\r\n  });\r\n  const [notifibool, setNotifibool]=useState(true)\r\n  const [emojitype, setEmojitype] = useState(\"\");\r\n  const [loader, setLoader] = useState(true);\r\n  const [loading, setLoading] = useState(true);\r\n  const [chatcolor, setChatcolor] = useState(\"\");\r\n  const [userChatcolor, setUserchatcolor] = useState(\"\");\r\n  const [showinput, setShowinput] = useState(false);\r\n  const [updatedMsg, setUpdatedMsg] = useState(\"\");\r\n  const [emojilist, setEmojilist] = useState(false);\r\n  const [theme, setTheme] = useState(\"\");\r\n  const [msgid, setMsgid] = useState(\"\");\r\n  const [chatname, setChatname] = useState(\"\");\r\n  const [chatimg, setChatimg] = useState(\"\");\r\n  const [chatcity, setChatcity] = useState(\"\");\r\n  const [chatcountry, setChatcountry] = useState(\"\");\r\n  const [chatactive, setChatactive] = useState(\"\");\r\n  const [nickname, setNickname] = useState([]);\r\n  const [emojipicker, setEmojipicker]=useState(false)\r\n  const emojis = []\r\n  const { chatuser, setState, icon, type } = props;\r\n  const { messages } = props.diag;\r\n  const { convoid, creatorid, recipientid } = props.diag.convoinfo;\r\n  const user = firebase.auth().currentUser;\r\n  const date = firebase.firestore.FieldValue.serverTimestamp()\r\n  const typerRef = useRef();\r\n  const id =db.collection('users').doc().id\r\n  const reg = /((?:(?!(?:https?|ftp):\\/\\/[\\S]*\\.(?:png|jpe?g|gif|svg|webp)).)+)|((?:https?|ftp):\\/\\/[\\S]*\\.(?:png|jpe?g|gif|svg|webp)(?:\\?\\S+=\\S*(?:&\\S+=\\S*)*)?)/gm;\r\n  const imageRegexB = /(?:https?|ftp):\\/\\/[\\S]*\\.(?:png|jpe?g|gif|svg|webp)/g;\r\n  var urlreg = /https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_\\+.~#?&//=]*)/g;\r\n  var ureg = /https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_\\+.~#?&//=]*)/g;\r\n\r\n  function ytVidId(url) {\r\n    var p = /(?:https?:\\/\\/)?(?:www\\.)?(?:youtu\\.be\\/|youtube\\.com\\/(?:embed\\/|v\\/|watch\\?v=|watch\\?.+&v=))((\\w|-){11})(?:\\S+)?/;\r\n    return url.match(p) ? RegExp.$1 : false;\r\n  }\r\n\r\n  \r\n  function determineMsgtype(msg) {\r\n    if (msg.base64) {\r\n      return <Img src={msg.message} link={true}/>\r\n     \r\n    }\r\n    else if (msg.file) {\r\n      return <Filemsg name={msg.name} link={msg.message}/>\r\n    } else if (msg.audio) {\r\n      return <Recording src={msg.message}/>\r\n      \r\n    } else if (msg.video){\r\n      return <Iframe type='video' link={msg.message}/>\r\n    }\r\n    else if (ytVidId(msg.message)) {\r\n      return <Iframe link={\"https://www.youtube.com/embed/\" + ytVidId(msg.message)} />\r\n\r\n    }\r\n    // else if(urlreg.test(msg.message)){\r\n    //   const stringWithOnlyURLS = msg.message.match(urlreg).join(' ');\r\n    //   const string = msg.message.replace(stringWithOnlyURLS, ' ')\r\n    //   return <>\r\n    //   <p className='bg'>{string}</p>\r\n    //     <div>\r\n    //     <ReactTinyLink\r\n    //   cardSize=\"small\" \r\n    //   showGraphic={true}\r\n    //   maxLine={2}\r\n    //   minLine={1}\r\n    //   url={stringWithOnlyURLS}\r\n    //   />\r\n    //     </div>\r\n    //   </>\r\n    // }  \r\n    else {\r\n      const sm = msg.message.replace(reg, (_, text, img)  => \r\n      text ?  `<p>${text.trim()}</p>`:`<img src=\"${img}\"/>`\r\n      ) \r\n      return  <div dangerouslySetInnerHTML={{__html:sm}} ></div>\r\n    }\r\n  }\r\n  function determineClass(msg) {\r\n    var urreg = /https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_\\+.~#?&//=]*)/g;\r\n    if(user.uid===msg.senderid){\r\n      if (msg.file) {\r\n        return \"msg file\";\r\n      }else if (msg.video) {\r\n        return 'msg video'\r\n      }\r\n       else if (msg.audio) {\r\n        return \"msg audio\";\r\n      } else if (msg.emoji) {\r\n        return \"msg emojimsg\";\r\n      } else if (msg.nobackground) {\r\n        return \"no-bg msg\";\r\n      } else if (ytVidId(msg.message)) {\r\n        return `msg youtube`;\r\n      }\r\n      //   else if(urreg.test(msg.message)){\r\n      //   return 'msg emojimsg imp'\r\n      // }\r\n      else {\r\n        return \"msg\";\r\n      }\r\n    }else {\r\n      if (msg.file) {\r\n        return \"msg file trans\";\r\n      }else if (msg.video) {\r\n        return 'msg video trans'\r\n      }\r\n       else if (msg.audio) {\r\n        return \"msg audio trans\";\r\n      } else if (msg.emoji) {\r\n        return \"msg emojimsg trans\";\r\n      } else if (msg.nobackground) {\r\n        return \"no-bg msg trans\";\r\n      } else if (ytVidId(msg.message)) {\r\n        return `msg youtube trans`;\r\n      }\r\n      //   else if(urreg.test(msg.message)){\r\n      //   return 'msg emojimsg imp'\r\n      // }\r\n      else {\r\n        return \"msg trans\";\r\n      }\r\n    }\r\n  }\r\n  const [opti, setOpti]=useState(false)\r\n  function msgOptions(msg){\r\n    const allel = document.querySelectorAll('.optionsEdit')\r\n    allel.forEach(el=>{\r\n      el.style.display='none'\r\n    })\r\n    const el = document.querySelector(`div[data-id=\"${msg.msgid}\"]`)\r\n    el.style.display='flex'\r\n  }\r\n  const [modal, setModal] = useState(false);\r\n  const imgsrc = useRef();\r\n  const [imgSrcModal, setImgSrcModal]=useState('')\r\n  function clickHandler(e) {\r\n    const audio = e.target.querySelector(\".controls\");\r\n    const video = e.target.closest(\"VIDEO\");\r\n\r\n    const play = e.target.querySelector(\".fa-play\");\r\n    const el = e.target.closest(\"IMG\");\r\n    if (el && e.currentTarget.contains(el)) {\r\n      setModal(true);\r\n      const imgsrc = document.querySelector(\".modal img\");\r\n      setImgSrcModal(el.getAttribute('src'))\r\n      imgsrc.setAttribute(\"src\", el.getAttribute(\"src\"));\r\n    }\r\n    if (video && e.currentTarget.contains(video)) {\r\n    }\r\n  }\r\n  const allmsgs =\r\n    messages &&\r\n    messages\r\n      .slice(0)\r\n      .reverse()\r\n      .map((msg) => {\r\n        return (\r\n          <div\r\n            id={msg.msgid}\r\n            className={msg.senderid === user.uid ? \"right m\" : \"left m\"}\r\n            onContextMenu={(e) => contextMenu(e)}\r\n          >\r\n            <div className=\"flex\">\r\n              <p\r\n                className={determineClass(msg)}\r\n                contentEditable={false}\r\n                style={\r\n                  msg.nobackground\r\n                    ? { backgroundColor: \"transparent\" }\r\n                    : msg.emoji\r\n                    ? { backgroundColor: \"transparent\" }\r\n                    : ytVidId(msg.message)\r\n                    ? { backgroundColor: \"transparent\" }\r\n                    : msg.senderid === user.uid\r\n                    ? { backgroundColor: chatcolor }\r\n                    : null\r\n                }\r\n                onClick={(e) => clickHandler(e)}\r\n     \r\n              >    { determineMsgtype(msg) }</p>\r\n\r\n             <Threedots msgs={msgs} user={user} msg={msg} convoid={convoid}/>\r\n\r\n                <small\r\n                className={\r\n                  msg.senderid === user.uid\r\n                    ? \"alignRight elapsedtime\"\r\n                    : \"alignLeft elapsedtime\"\r\n                }\r\n              ><ReactTimeAgo date={msg.msgdate.toDate()}/></small>\r\n              <div\r\n                className=\"reaction\"\r\n                style={{ display: (msg.reaction1||msg.reaction2) ? \"flex\" : \"none\", width: (msg.reaction1===''||msg.reaction2==='')?'22px':'42px' }}\r\n              >\r\n                <i className={ msg.reaction1 === \"fad fa-heart\"? \"emoj fas fa-\" + msg.reaction1: \"emoj fad fa-\" + msg.reaction1 }></i>\r\n                <i style={{marginLeft: msg.reaction2===''?'':'5px'}}className={ msg.reaction2 === \"fad fa-heart\"? \"emoj fas fa-\" + msg.reaction2: \"emoj fad fa-\" + msg.reaction2}></i>\r\n              </div>\r\n            </div>\r\n            <img src={msg.senderid === user.uid ? userimg : chatimg} alt=\"\" />\r\n          </div>\r\n        );\r\n      });\r\n  const progressbar = useRef();\r\n  const progresswidth = useRef();\r\n  const [img, setImg] = useState();\r\n  const inputref = useRef()\r\n  function sendFile(type) {\r\n    let file = document.querySelector(`.${type}file`).files[0];\r\n    if (file) {\r\n      var idxDot = file.name.lastIndexOf(\".\") + 1;\r\n      var extFile = file.name.substr(idxDot, file.name.length).toLowerCase();\r\n\r\n      const storageRef = firebase.storage().ref(`${convoid}/${file.name}`);\r\n      const task = storageRef.put(file);\r\n      task.on(\r\n        \"state_changes\",\r\n\r\n        function progress(snap) {\r\n          progressbar.current.style.display = \"flex\";\r\n          const percentage = (snap.bytesTransferred / snap.totalBytes) * 100;\r\n          progresswidth.current.style.height = `${percentage}%`;\r\n        },\r\n        function error(err) {},\r\n        function complete() {\r\n          if (type === \"image\") {\r\n            if (extFile === \"jpg\" || extFile === \"jpeg\" || extFile === \"png\") {\r\n              let msgobject = {\r\n                message: `https://firebasestorage.googleapis.com/v0/b/${storageRef.bucket}/o/${convoid}%2F${file.name}?alt=media`,\r\n                reaction1: \"\",\r\n                reaction2: \"\",\r\n                msgdate: firebase.firestore.Timestamp.now(),\r\n                msgid: db.collection(\"conversations\").doc().id,\r\n                read: false,\r\n                senderid: user.uid,\r\n                editing: false,\r\n                nobackground: true,\r\n                emoji: true,\r\n                base64: true\r\n              };\r\n              let notificationobj = {\r\n                notifimsg: `https://firebasestorage.googleapis.com/v0/b/${storageRef.bucket}/o/${convoid}%2F${file.name}?alt=media`,\r\n                notifidate: firebase.firestore.Timestamp.now(),\r\n                read: false,\r\n                sender: user.displayName,\r\n                base64: true,\r\n                id: convoid,\r\n                senderid: user.uid,\r\n                notifiid: db.collection('users').doc().id              }      \r\n                if(notifibool){\r\n                  db.collection('notifications').doc(chatuser).update({\r\n                    notifications: firebase.firestore.FieldValue.arrayUnion(notificationobj)\r\n                  })\r\n                }\r\n              db.collection(\"conversations\")\r\n                .doc(convoid)\r\n                .update({\r\n                  lastmsgdate: date,\r\n                  messages: firebase.firestore.FieldValue.arrayUnion(msgobject)\r\n                });\r\n            } else {\r\n              setNotifi(true);\r\n              setNotificont({\r\n                emoji: \"fal fa-exclamation-circle\",\r\n                msg: \"Only Images are allowed!\"\r\n              });\r\n              setTimeout(() => {\r\n                setNotifi(false);\r\n              }, 300500);\r\n            }\r\n          } else if (type === \"paperclip\") {\r\n            let msgobject = {\r\n              message: `https://firebasestorage.googleapis.com/v0/b/${storageRef.bucket}/o/${convoid}%2F${file.name}?alt=media`,\r\n              reaction1: \"\",\r\n              reaction2: \"\",\r\n              msgdate: firebase.firestore.Timestamp.now(),\r\n              msgid: db.collection(\"conversations\").doc().id,\r\n              read: false,\r\n              senderid: user.uid,\r\n              editing: false,\r\n              nobackground: true,\r\n              emoji: true,\r\n              file: true,\r\n              name: file.name,\r\n              base64: false\r\n            };\r\n            let notificationobj = {\r\n              notifimsg: `https://firebasestorage.googleapis.com/v0/b/${storageRef.bucket}/o/${convoid}%2F${file.name}?alt=media`,\r\n              notifidate: firebase.firestore.Timestamp.now(),\r\n              read: false,\r\n              sender: user.displayName,\r\n              file: true,\r\n              id: convoid,\r\n              senderid: user.uid,\r\n              notifiid: db.collection('users').doc().id            }      \r\n            if(notifibool){\r\n              db.collection('notifications').doc(chatuser).update({\r\n                notifications: firebase.firestore.FieldValue.arrayUnion(notificationobj)\r\n              })\r\n            }\r\n            db.collection(\"conversations\")\r\n              .doc(convoid)\r\n              .update({\r\n                lastmsgdate: date,\r\n                messages: firebase.firestore.FieldValue.arrayUnion(msgobject)\r\n              });\r\n          } else if (type === \"microphone\") {\r\n          }else if(type==='film') {\r\n              if(extFile==='mp4'||'gif'||'avi'){\r\n                let msgobject = {\r\n                  message: `https://firebasestorage.googleapis.com/v0/b/${storageRef.bucket}/o/${convoid}%2F${file.name}?alt=media`,\r\n                  reaction1: \"\",\r\n                  reaction2: \"\",\r\n                  msgdate: firebase.firestore.Timestamp.now(),\r\n                  msgid: db.collection(\"conversations\").doc().id,\r\n                  read: false,\r\n                  senderid: user.uid,\r\n                  editing: false,\r\n                  nobackground: true,\r\n                  emoji: true,\r\n                  video: true\r\n                };\r\n                let notificationobj = {\r\n                  notifimsg: `https://firebasestorage.googleapis.com/v0/b/${storageRef.bucket}/o/${convoid}%2F${file.name}?alt=media`,\r\n                  notifidate: firebase.firestore.Timestamp.now(),\r\n                  read: false,\r\n                  sender: user.displayName,\r\n                  video: true,\r\n                  id: convoid,\r\n                  senderid: user.uid,\r\n                  notifiid: db.collection('users').doc().id                }      \r\n                if(notifibool){\r\n                  db.collection('notifications').doc(chatuser).update({\r\n                    notifications: firebase.firestore.FieldValue.arrayUnion(notificationobj)\r\n                  })\r\n                }\r\n                db.collection(\"conversations\")\r\n                  .doc(convoid)\r\n                  .update({\r\n                    lastmsgdate: date,\r\n                    messages: firebase.firestore.FieldValue.arrayUnion(msgobject)\r\n                  });\r\n              }else {\r\n\r\n              }\r\n          }\r\n          progressbar.current.style.display = \"none\";\r\n        }\r\n      );\r\n    }\r\n  }\r\n\r\n  const icons = [\r\n    { icon: \"image\", type: \"file\" },\r\n    {icon: 'film', type:'file'},\r\n    { icon: \"paperclip\", type: \"file\" },\r\n    { icon: \"microphone\", type: \"microphone\" },\r\n\r\n  ];\r\n\r\n  let iconsrow = icons.map((icon) => {\r\n    return (\r\n      <Hoverableicondiv\r\n        progressbar={progressbar}\r\n        progresswidth={progresswidth}\r\n        classNames=\"\"\r\n        icon={icon.icon}\r\n        type={icon.type}\r\n        special={true}\r\n        sendFile={sendFile}\r\n        convoid={convoid}\r\n        inputref={inputref}\r\n        \r\n      />\r\n    );\r\n  });\r\n\r\n  function editMsg() {\r\n    msgs &&\r\n      msgs.map((msg) => {\r\n        if (msgid === msg.msgid) {\r\n          let itemindex = msgs.indexOf(msg);\r\n          msgs[itemindex].message = updatedMsg;\r\n          db.collection(\"conversations\").doc(convoid).update({\r\n            messages: msgs\r\n          });\r\n        }\r\n      });\r\n  }\r\n\r\n  function contextMenu(e) {\r\n    let customcontext = document.querySelector(\".contextmenu\");\r\n    const bounding = customcontext.getBoundingClientRect();\r\n    e.preventDefault();\r\n    setMsgid(e.currentTarget.getAttribute(\"id\"));\r\n    setContextmenu(true);\r\n    if (type === \"small\") {\r\n      customcontext.style.top = `${e.pageY - 201}px`;\r\n      customcontext.style.left = `${0}px`;\r\n    } else {\r\n    const bounding = customcontext.getBoundingClientRect()\r\n    customcontext.style.top = `${e.pageY -200}px`;\r\n    customcontext.style.left = `${e.pageX -150 }px`;\r\n    }\r\n\r\n    if (!updatedMsg === \"\") {\r\n      editMsg();\r\n    }\r\n  }\r\n  function sendEmoji(emoji) {\r\n    let msgobject = {\r\n      message: emoji,\r\n      reaction1: \"\",\r\n      reaction2: \"\",\r\n      msgdate: firebase.firestore.Timestamp.now(),\r\n      msgid: db.collection(\"conversations\").doc().id,\r\n      read: false,\r\n      senderid: user.uid,\r\n      editing: false,\r\n      nobackground: false,\r\n      emoji: true\r\n    };\r\n    db.collection(\"conversations\")\r\n      .doc(convoid)\r\n      .update({\r\n        lastmsgdate: date,\r\n        messages: firebase.firestore.FieldValue.arrayUnion(msgobject)\r\n      });\r\n      let notificationobj = {\r\n        notifimsg: emoji,\r\n        notifidate: firebase.firestore.Timestamp.now(),\r\n        read: false,\r\n        sender: user.displayName,\r\n        id: convoid,\r\n        senderid: user.uid,\r\n        notifiid: db.collection('users').doc().id\r\n      }      \r\n      if(notifibool){\r\n        db.collection('notifications').doc(chatuser).update({\r\n          notifications: firebase.firestore.FieldValue.arrayUnion(notificationobj)\r\n        })\r\n      }\r\n    setMsgstring(\"\");\r\n    typerRef.current.setAttribute(\"style\", \"height: 50px\");\r\n  }\r\n  const scrollto = useRef()\r\n  function  sendMessage() {\r\n    scrollto.current.scrollIntoView({ behavior: 'smooth', block: 'start' })\r\n    const imageRegex = /(?:https?|ftp):\\/\\/[\\S]*\\.(?:png|jpe?g|gif|svg|webp)/g;\r\n    if (msgstring.match(imageRegexB) != null) {\r\n      let msgobject = {\r\n        message: msgstring,\r\n        reaction1: \"\",\r\n        reaction2: '',\r\n        msgdate: firebase.firestore.Timestamp.now(),\r\n        msgid: db.collection(\"conversations\").doc().id,\r\n        read: false,\r\n        senderid: user.uid,\r\n        editing: false,\r\n        nobackground: true,\r\n        emoji: false\r\n      };\r\n      db.collection(\"conversations\")\r\n        .doc(convoid)\r\n        .update({\r\n          lastmsgdate: date,\r\n          messages: firebase.firestore.FieldValue.arrayUnion(msgobject)\r\n        });\r\n        let notificationobj = {\r\n          notifimsg: msgstring,\r\n          notifidate: firebase.firestore.Timestamp.now(),\r\n          read: false,\r\n          sender: user.displayName,\r\n          id: convoid,\r\n          senderid: user.uid,\r\n          notifiid: db.collection('users').doc().id,\r\n\r\n        }      \r\n        if(notifibool){\r\n          db.collection('notifications').doc(chatuser).update({\r\n            notifications: firebase.firestore.FieldValue.arrayUnion(notificationobj)\r\n          })\r\n        }else {\r\n          return null\r\n        }\r\n      setMsgstring(\"\");\r\n      typerRef.current.setAttribute(\"style\", \"height: 50px\");\r\n    } else if (msgstring.replace(/\\s/g, \"\").length) {\r\n      let msgobject = {\r\n        message: msgstring,\r\n        reaction1: \"\",\r\n        reaction2: \"\",\r\n        msgdate: firebase.firestore.Timestamp.now(),\r\n        msgid: db.collection(\"conversations\").doc().id,\r\n        read: false,\r\n        senderid: user.uid,\r\n        editing: false,\r\n        nobackground: false,\r\n        emoji: false\r\n      };\r\n      let notificationobj = {\r\n        notifimsg: msgstring,\r\n        notifidate: firebase.firestore.Timestamp.now(),\r\n        read: false,\r\n        sender: user.displayName,\r\n        id: convoid,\r\n        senderid: user.uid,\r\n        notifiid: db.collection('users').doc().id\r\n      }      \r\n      if(notifibool){\r\n        db.collection('notifications').doc(chatuser).update({\r\n          notifications: firebase.firestore.FieldValue.arrayUnion(notificationobj)\r\n        })\r\n      }\r\n      db.collection(\"conversations\")\r\n        .doc(convoid)\r\n        .update({\r\n          lastmsgdate: firebase.firestore.Timestamp.now(),\r\n          messages: firebase.firestore.FieldValue.arrayUnion(msgobject)\r\n        });\r\n      setMsgstring(\"\");\r\n      typerRef.current.setAttribute(\"style\", \"height: 50px\");\r\n    }\r\n  }\r\n  function triggerSend(e) {\r\n    if (e.keyCode === 13 && !e.shiftKey) {\r\n      e.preventDefault();\r\n      sendMessage();\r\n    }\r\n  }\r\n  function formatTextarea() {\r\n\r\n    // setTyping(true)\r\n    // showTypingAnim()\r\n  }\r\n  const emojipickerref = useRef()\r\n  function inputFunc(){\r\n    typerRef.current.focus()\r\n    setEmojipicker(!emojipicker)\r\n  }\r\n  function showTypingAnim() {\r\n    setTyperid(user.uid);\r\n    let infoobj = {\r\n      convoid,\r\n      creatorid,\r\n      recipientid,\r\n      usertyping: typing,\r\n      userref: db.collection(\"users\").doc(recipientid),\r\n      typerid\r\n    };\r\n    db.collection(\"conversations\")\r\n      .doc(convoid)\r\n      .update({\r\n        // convoinfo: infoobj\r\n      })\r\n      .then(() => {\r\n        db.collection(\"conversations\")\r\n          .doc(convoid)\r\n          .onSnapshot((snap) => {\r\n            // setTyperid(snap.data().convoinfo.typerid)\r\n            // setRealtyping(snap.data().convoinfo.usertyping)\r\n          });\r\n      });\r\n  }\r\n  const [zoomamount, setZoomamount]=useState(1)\r\n  function zoom(el){\r\n   if(el.type==='in'){\r\n    setZoomamount(prev=>prev+ 0.1);\r\n   }else {\r\n    if(zoomamount>1){\r\n      setZoomamount(prev=>prev- 0.1);\r\n    }\r\n   }\r\n\r\n  }\r\n  const onEmojiClick = (event, emojiobject)=>{\r\n   setMsgstring(msgstring + emojiobject.emoji)\r\n  }\r\n  useEffect(() => {\r\n    let timer = setInterval(() => {\r\n      setUpdateelapsed((prev) => prev + 1);\r\n    }, 60000);\r\n    return () => {\r\n      clearInterval(timer);\r\n    };\r\n  }, []);\r\n  useEffect(() => {\r\n    let timer = setInterval(() => {\r\n      setTyping(false);\r\n    }, 4000);\r\n    // showTypingAnim()\r\n    return () => {\r\n      clearInterval(timer);\r\n    };\r\n  }, [typing]);\r\n\r\n  useEffect(() => {\r\n    db.collection(\"users\")\r\n      .doc(creatorid)\r\n      .onSnapshot((snap) => {\r\n        const user = snap.data();\r\n        setRecipname(user.userinfo.name);\r\n        setRecipimg(user.userinfo.cover);\r\n        setRecipcity(user.userinfo.city);\r\n        setRecipcountry(user.userinfo.country);\r\n      });\r\n    db.collection(\"users\")\r\n      .doc(recipientid)\r\n      .onSnapshot((snap) => {\r\n        const user = snap.data();\r\n        setUserimg(user.userinfo.cover);\r\n        setUsername(user.userinfo.name);\r\n      });\r\n    db.collection(\"users\")\r\n      .doc(chatuser)\r\n      .onSnapshot((snap) => {\r\n        const user = snap.data();\r\n        setChatname(user.userinfo.name);\r\n        setChatimg(user.userinfo.cover);\r\n        setChatcity(user.userinfo.city);\r\n        setChatcountry(user.userinfo.country);\r\n        setChatactive(user.online);\r\n        setActivestatus(user.userinfo.online);\r\n        setLoading(false);\r\n      });\r\n  }, [creatorid, recipientid, chatuser]);\r\n  useEffect(() => {\r\n    db.collection(\"users\")\r\n      .doc(user.uid)\r\n      .onSnapshot((snap) => {\r\n        const user = snap.data();\r\n        setChatcolor(user.customization.color);\r\n        setUserimg(user.userinfo.cover);\r\n      });\r\n  }, [chatcolor, chatuser]);\r\n  useEffect(() => {\r\n    db.collection(\"users\")\r\n      .doc(chatuser)\r\n      .onSnapshot((snap) => {\r\n        let user = snap.data();\r\n        setUserchatcolor(user.customization.chatcolor);\r\n      });\r\n  }, [chatuser]);\r\n  useEffect(() => {\r\n\r\n    db.collection(\"conversations\")\r\n    .doc(convoid)\r\n    .get().then((snap) => {\r\n      let use = snap.data();\r\n      setMsgs(use.messages);\r\n      setLoader(false);\r\n      setTheme(use.customizedconvo.theme);\r\n      setEmojitype(use.customizedconvo.emoji);\r\n      if(user.uid===props.diag.convoinfo.creatorid) {\r\n        setNotifibool(use.notifications2)\r\n        setNickname(use.nickname1)\r\n      }else {\r\n        setNotifibool(use.notifications1)\r\n        setNickname(use.nickname2)\r\n      }\r\n    }); \r\n\r\n  \r\n  }, [convoid]);\r\n\r\n  return (\r\n\r\n    <>  \r\n\r\n         <div className=\"top br-l\">\r\n        <div className=\"profilepic\">\r\n          <div className=\"relative\">\r\n            {loading ? (\r\n              <div className={\"loader blue reloader\"}>\r\n                <div class=\"lds-ring\">\r\n                  <div></div>\r\n                  <div></div>\r\n                  <div></div>\r\n                  <div></div>\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              [\r\n                <img src={chatimg} alt=\"\" />,\r\n                <div\r\n                  className=\"notifi\"\r\n                  style={{\r\n                    backgroundColor: chatactive ? \"rgb(44, 255, 44)\" : \"#FF3D3D\"\r\n                  }}\r\n                ></div>\r\n              ]\r\n            )}\r\n          </div>\r\n          <div>\r\n            {nickname===''?<p className='username'>{chatname.length>15?chatname.slice(0, 15)+'...':chatname}</p>:<p className='username'>{nickname}</p>}\r\n            <small>{chatactive ? \"Online\" : \"Offline\"}</small>\r\n          </div>\r\n        </div>\r\n        <div className=\"controls\">\r\n          <i class=\"fal fa-phone-alt\" style={{ color: themecolor }}></i>\r\n          <i class=\"fal fa-video\" style={{ color: themecolor }}></i>\r\n          {icon && icon === \"fal fa-times\" ? (\r\n            <i\r\n              className={icon}\r\n              style={{ padding: \"0 5px\", color: themecolor }}\r\n              onClick={() => setState(false)}\r\n            ></i>\r\n          ) : (\r\n            <Link exact to={\"/chatsettings/\" + convoid}>\r\n              <i\r\n                style={{ padding: \"0 5px\", color: themecolor }}\r\n                class=\"fal fa-ellipsis-v\"\r\n              ></i>\r\n            </Link>\r\n          )}\r\n        </div>\r\n      </div>\r\n \r\n      <Route\r\n        render={({ location }) => (\r\n          <div\r\n            className={!theme?\"msgs black\":theme==='https://i.imgur.com/4hzNTTq.png'?'msgs black':'msgs'}\r\n            style={\r\n              theme\r\n                ? { backgroundImage: \"url(\" + theme + \")\" }\r\n                : { backgroundImage: \"url(https://i.imgur.com/4hzNTTq.png)\" }\r\n            }\r\n          >\r\n            <div className=\"grid\">\r\n              <div className=\"scrollto\" ref={scrollto}></div>\r\n\r\n              {loader ? (\r\n                <div className={loader ? \"loader opa\" : \"loader\"}>\r\n                  <div class=\"lds-ring\">\r\n                    <div></div>\r\n                    <div></div>\r\n                    <div></div>\r\n                    <div></div>\r\n                  </div>\r\n                </div>\r\n              ) : (\r\n                allmsgs\r\n              )}\r\n            </div>\r\n          </div>\r\n        )}\r\n      />\r\n   <div className=\"search whiteb br-l\">\r\n    <div className=\"plus\">\r\n      <i\r\n        class={visible ? \"fal fa-minus\" : \"fal fa-plus\"}\r\n        style={{ color: themecolor }}\r\n        onClick={() => setVisible(!visible)}\r\n      ></i>\r\n      <CSSTransition\r\n        in={visible}\r\n        timeout={300}\r\n        classNames=\"iconshover\"\r\n        unmountOnExit\r\n      >\r\n        <div className={\"icons\"}>\r\n          {iconsrow}\r\n          <span className=\"uploader bs\" ref={progressbar}>\r\n            <span className=\"percent\" ref={progresswidth}></span>\r\n          </span>\r\n        </div>\r\n      </CSSTransition>\r\n    </div>\r\n    <div className=\"textarea flexrow\">\r\n    <textarea\r\n      type=\"text\"\r\n      placeholder=\"Send a message...\"\r\n      onKeyUp={(e) => triggerSend(e)}\r\n      ref={typerRef}\r\n      value={msgstring}\r\n      onChange={(e) => {\r\n        setMsgstring(e.target.value);\r\n\r\n      }}\r\n      onInput={()=>formatTextarea()}\r\n\r\n    ></textarea>\r\n    <div className=\"gif_emoji\">\r\n    <i className=\"fal fa-laugh\" onClick={()=>{inputFunc()}}></i>\r\n    <i class=\"fal fa-comment-alt-smile\" onClick={()=>setGif(!gif)}></i>\r\n    </div>\r\n\r\n   </div>\r\n      <div className=\"flexrow\">\r\n      <span\r\n      role=\"img\"\r\n      aria-label=\"emoji\"\r\n      onClick={() => sendEmoji(emojitype)}\r\n      style={{ cursor: \"pointer\" }}\r\n    >\r\n      {emojitype}\r\n    </span>\r\n    <i\r\n      class=\"fal fa-paper-plane\"\r\n      style={{ color: themecolor }}\r\n      onClick={() => {sendMessage();setEmojipicker(false)}}\r\n    ></i>\r\n      </div>\r\n  </div>\r\n \r\n      <Contextmenu\r\n        setShowinput={setShowinput}\r\n        editMsg={editMsg}\r\n        setUpdatedMsg={setUpdatedMsg}\r\n        convoid={convoid}\r\n        type={\"msg\"}\r\n        msgid={msgid}\r\n        setMsgid={setMsgid}\r\n        setContextmenu={setContextmenu}\r\n        contextmenu={contextmenu}\r\n        contextstyle={contextstyle}\r\n      />\r\n\r\n      <CSSTransition in={gif} unmountOnExit classNames='gif' timeout={300}>\r\n        <Gif chatimg={chatimg} setGif={setGif} convoid={convoid} notifibool={notifibool} chatuser={chatuser}/>\r\n      </CSSTransition>\r\n      <CSSTransition\r\n        in={notifi}\r\n        timeout={300}\r\n        classNames=\"displayerror\"\r\n        unmountOnExit\r\n      >\r\n        <div className=\"errormsg bs diagmsg\">\r\n          <i\r\n            className={notificont.emoji}\r\n            style={{ position: \"absolute\", left: \"20px\" }}\r\n          ></i>{\" \"}\r\n          <p>{notificont.msg}</p>\r\n          <i\r\n            className=\"far fa-times\"\r\n            style={{ color: themecolor }}\r\n            onClick={() => setNotifi(false)}\r\n          ></i>\r\n        </div>\r\n      </CSSTransition>\r\n      <CSSTransition in={modal} classNames=\"modal\" timeout={0}>\r\n        <div className=\"modal overflowimgcontainer\">\r\n         <div className=\"buttons\">\r\n         \r\n         <i className=\"fal fa-search-minus\" onClick={()=>zoom({type: 'out'})}></i>\r\n         <i class=\"fal fa-redo-alt\" onClick={()=>setZoomamount(1)}></i>\r\n         <i class=\"fal fa-search-plus\" onClick={()=>zoom({type: 'in'})}></i>\r\n         </div>\r\n          <ScrollContainer className='grabbercontainer' hideScrollbars={true}>\r\n          <img src=\"\" alt=\"\" ref={imgsrc}style={{width: 100*zoomamount+'%', height: 100*zoomamount+'%'}} />\r\n          </ScrollContainer>\r\n          <i className=\"fal fa-times\" onClick={() => {setModal(false); setZoomamount(1)}}></i>\r\n        </div>\r\n      </CSSTransition>\r\n      <CSSTransition in={emojipicker}  classNames='emojipicker' timeout={300} >\r\n       <div className=\"emojipicker\" ref={emojipickerref} onMouseOver={()=>typerRef.current.focus()} onClick={()=>typerRef.current.focus()}>\r\n        <div className=\"times\"> <i className=\"fal fa-times\" onClick={()=>setEmojipicker(false)}></i></div>\r\n       <Picker onEmojiClick={onEmojiClick}/>\r\n       </div>\r\n      </CSSTransition>\r\n    </>\r\n  );\r\n}\r\nexport default Dialogue;\r\n","\r\nimport React, {useState, useEffect, useContext} from 'react'\r\nimport firebase from 'firebase'\r\nimport { db } from '../Fire'\r\nimport { CSSTransition } from 'react-transition-group'\r\nimport { ContextApp } from '../ContextAPI'\r\nfunction Userprofile (props) {\r\n  const link = <a href='google.com'>asd</a>\r\n  const {themecolor}=useContext(ContextApp)\r\n  const user = firebase.auth().currentUser\r\n  const {chatuser}=props\r\n  const {convoid, creatorid, recipientid} = props.diag.convoinfo\r\n  const [recipname, setRecipname]=useState('')\r\n  const [recipimg, setRecipimg]=useState('')\r\n  const [recipcity, setRecipcity]=useState('')\r\n  const [recipcountry, setRecipcountry]=useState('')\r\n  const [recipjob, setRecipjob]=useState('')\r\n  const [recipnumber, setRecipnumber]=useState('')\r\n  const [recipemail, setRecipemail]=useState('')\r\n  const [recipwebsite, setRecipwebsite]=useState('')\r\n  const [extend, setExtend]=useState(false)\r\n  const [active, setActive]=useState(false)\r\n  const [loading, setLoading]=useState(true)\r\n\r\n  useEffect(()=>{\r\n    db.collection('users').doc(chatuser).onSnapshot(snap=>{\r\n        const user = snap.data()\r\n        setRecipname(user.userinfo.name)\r\n        setRecipimg(user.userinfo.cover)\r\n        setRecipcity(user.userinfo.city)\r\n        setRecipcountry(user.userinfo.country)\r\n        setRecipjob(user.userinfo.job)\r\n        setRecipnumber(user.userinfo.phone)\r\n        setRecipemail(user.userinfo.email)\r\n        setRecipwebsite(user.userinfo.website)\r\n        setActive(user.online)\r\n        setLoading(false)\r\n\r\n    })\r\n  },[recipientid, chatuser])\r\n  return (\r\n   <>\r\n    <div className=\"profilepic profilepiccol br-l\">\r\n        <div className='relative'>\r\n        {loading?<div className={'loader blue reloader'}><div class=\"lds-ring\"><div></div><div></div><div></div><div></div></div></div>:[<img src={recipimg} alt=\"\"/>, <div className=\"notifi\" style={{backgroundColor:active?'rgb(44, 255, 44)':'#FF3D3D'}}></div>]}\r\n          \r\n        </div>\r\n        <div>\r\n          <p>{recipname.length>17?recipname.slice(0, 17)+'...':recipname}</p>\r\n          <small>Job: {recipjob===''?'Not provided':recipjob}</small>\r\n        </div>\r\n        <i className=\"fal fa-cog\" style={{color: themecolor}}></i>\r\n    </div> \r\n    <div className=\"personalinfo br-l flex\">\r\n     <div className='flexrow'><p>Personal info</p>\r\n      <i className={extend?`fal fa-chevron-up rotate`:'fal fa-chevron-up'} onClick={()=>setExtend(!extend)}></i>\r\n      </div>\r\n      <CSSTransition in={extend} classNames='extended' timeout={0} unmountOnExit>\r\n        <div className='extendoff'>\r\n        <hr />\r\n         <div className='flex'>\r\n           <div className=\"flexrow flexinfo\"><p>Phone #</p> <p>{recipnumber===''?'N/A':recipnumber}</p></div>\r\n           <div className=\"flexrow flexinfo\"><p>Email</p><p>{recipemail}</p></div>\r\n           <div className=\"flexrow flexinfo\"><p>Country</p><p>{recipcountry===''?'N/A':recipcountry}</p></div>\r\n           <div className=\"flexrow flexinfo\"><p>City</p><p>{recipcity===''?'N/A':recipcity}</p></div>\r\n         </div>\r\n        </div>\r\n      </CSSTransition>\r\n    </div>\r\n    <div className=\"mutualcontacts br-l pdng flexrow\">\r\n    <i class=\"fal fa-users\"></i>\r\n      <p>Mutual Contacts</p>\r\n      <i class=\"fal fa-ellipsis-h-alt\"></i>\r\n      </div>\r\n      <div className=\"br-l pdng flexrow\">\r\n        {recipwebsite.toLocaleLowerCase()==='https://'?<i class=\"fal fa-external-link\"></i>:\r\n          <a href={recipwebsite}><i class=\"fal fa-external-link\"></i></a>}\r\n          <p>View Site</p>\r\n         \r\n      </div>\r\n    </>\r\n  )\r\n}\r\nexport default Userprofile","import React, {useState, useEffect, useContext} from 'react'\r\nimport {ContextApp} from '../ContextAPI'\r\nimport Hoverablebutton from './Hoverablebutton'\r\nfunction Adduser (props) {\r\n  const {themecolor}= useContext(ContextApp)\r\nlet {allusers, setRecipientname,setRecipientid, recipientid, setMessage, sendMessage, msgpersonids, adduser,setAdduser, message} = props\r\nconst [keyword, setKeyword]=useState('')\r\n\r\nfunction determineDisplay(user){\r\n  if(msgpersonids && msgpersonids.includes(user.uid)){\r\n    return <i className=\"fal fa-exclamation-circle\"></i>\r\n  }\r\nelse if(recipientid===user.uid){\r\n  return <i className=\"fal fa-check slct\" ></i>\r\n}else {\r\n  return <span className='slct' style={{color: themecolor, border: 'solid 1px'+themecolor}} onMouseOver={(e)=>e.target.style.cssText=`background-color:${themecolor}; border: solid 1px transparent`} onMouseLeave={(e)=>e.target.style.cssText=`background-color: transparent; border: solid 1px ${themecolor}; color: ${themecolor}`}>Select</span>\r\n}\r\n\r\n}\r\nconst pattern = new RegExp('\\\\b' + keyword.replace(/[\\W_]+/g,\"\"), 'i')\r\nconst allusersrow = allusers && allusers.map(user=>{\r\n  if(pattern.test(user.userinfo.name.toLowerCase())) {\r\n    return  <div className={msgpersonids && msgpersonids.includes(user.uid)?\"profilepic selected\":'profilepic'}>\r\n      <div>\r\n      <img src={user.userinfo.cover?user.userinfo.cover:\"https://www.gettyimages.ca/gi-resources/images/500px/983794168.jpg\"} alt=\"\"/>\r\n       <p>{user.userinfo.name}</p>\r\n      </div>\r\n      <small onClick={msgpersonids && msgpersonids.includes(user.uid)?() => {setAdduser(!adduser);}:() => {setRecipientid(user.uid); setRecipientname(user.userinfo.name)}} className={recipientid===user.uid?\"usersrowselected\":\"\"}>\r\n        {determineDisplay(user)}\r\n      </small>\r\n</div>\r\n  }\r\n  })\r\n  function actions (){\r\n    setMessage('')\r\n    setAdduser(!adduser)\r\n  }\r\n  return (\r\n    <>\r\n    <div className=\"adduser\"onClick={()=>props.setAdduser()}>\r\n      \r\n    </div>\r\n    <div className=\"userlist bs\" >\r\n          <div className=\"hd\">\r\n          <h2>Add Contact</h2>\r\n          <div className=\"search\">\r\n            <input type=\"text\" placeholder='Search' onChange={(e)=>setKeyword(e.target.value)}/>\r\n          </div>\r\n          </div>\r\n          <div className=\"overflow flex\">\r\n       {allusersrow}\r\n          </div>\r\n          <div className=\"search\">\r\n          <input type=\"text\" placeholder='Send a message...' onChange={(e)=>setMessage(e.target.value)} value={message}/>\r\n          <button className=\"themeBtn\"  onClick={()=>{recipientid?sendMessage():actions()}}  style={{color: 'white', border: `solid 3px transparent`, backgroundColor: themecolor}} onMouseOver={(e)=>e.target.style.cssText=`background-color: transparent; border: solid 3px ${themecolor}; color: ${themecolor}`} onMouseLeave={(e)=>e.target.style.cssText=`background-color: ${themecolor}; border: solid 3px transparent; color: white`}>Send Message</button>\r\n          </div>\r\n          <i className=\"fal fa-times\" onClick={()=>props.setAdduser()} style={{color: themecolor}}></i>\r\n      </div>\r\n    \r\n    </>\r\n  )\r\n}\r\nexport default Adduser","import React, {useState, useEffect, useContext} from 'react'\r\nimport { BrowserRouter as Router,Switch,Route,Link,NavLink, Redirect } from \"react-router-dom\" \r\nimport {db} from '../Fire'\r\nimport firebase from 'firebase'\r\nimport {ContextApp} from '../ContextAPI'\r\nimport styled from 'styled-components'  \r\n\r\nconst Input = styled.input ` \r\n      &:valid {\r\n         border: solid 2px ${props=>props.color}\r\n      }\r\n      &:focus {\r\n         border: solid 2px ${props=>props.color}\r\n      }\r\n`\r\nfunction Inputs (props) {\r\n   const {themecolor}=useContext(ContextApp)\r\n    const {disabled, determineDelete, updateProfile,age, setAge, name, setName, city, setCity, phonenumber, setPhonenumber, website, setWebsite, country, setCountry}=props\r\n    const user = firebase.auth().currentUser\r\n   function deleteUser(){\r\n      db.collection('users').doc(user.uid).delete()\r\n      db.collection('notifications').doc(user.uid).delete()\r\n      user.delete().then(()=>{\r\n\r\n      }).catch(err=>{\r\n\r\n      })\r\n   }\r\n return (\r\n<div className=\"inputs inps\">\r\n  <label>\r\n    <span>Name</span>\r\n    <Input type='text' value={name} onChange={(e)=>setName(e.target.value)} required placeholder='Name' color={themecolor}/>\r\n  </label>\r\n  <label>\r\n      <span>Age</span>\r\n     <Input color={themecolor} type=\"number\" value={age}onChange={(e)=>setAge(e.target.value)} min='1' required placeholder='Age'/>\r\n  </label>\r\n  <label>\r\n      <span>Phone Number</span>\r\n      <Input  color={themecolor} type=\"number\" value={phonenumber} onChange={(e)=>setPhonenumber(e.target.value)} required placeholder='Phone Number' />\r\n  </label>\r\n  <label>\r\n      <span>City</span>\r\n     <Input  color={themecolor} type=\"text\" value={city} onChange={(e)=>setCity(e.target.value)} required placeholder='City'/>\r\n  </label>\r\n  <label>\r\n     <span>Country</span>\r\n     <Input  color={themecolor} type=\"text\" value={country} onChange={(e)=>setCountry(e.target.value)} required placeholder='Country' />\r\n  </label>\r\n  <label>\r\n     <span>Website URL</span>\r\n     <Input  color={themecolor} type=\"text\" value={website}  onChange={(e)=>setWebsite(e.target.value)} required placeholder='https://example.com'/>\r\n  </label>\r\n    <label className='btnContainer'>\r\n    <button className=\"themeBtn\" onClick={()=>updateProfile()}style={{color: 'white', border: `solid 3px transparent`, backgroundColor: themecolor}} onMouseOver={(e)=>e.target.style.cssText=`background-color: transparent; border: solid 3px ${themecolor}; color: ${themecolor}`} onMouseLeave={(e)=>e.target.style.cssText=`background-color: ${themecolor}; border: solid 3px transparent; color: white`}>Save</button>\r\n    </label>\r\n    <label>\r\n       <span><strong>Delete Account</strong></span>\r\n       <Input color={themecolor} required onChange={e=>determineDelete(e)} placeholder={'Type in '+user.displayName+' to delete account.'}/>\r\n      <small >Key: {user.displayName}</small>\r\n      <button disabled={disabled} className='themeBtn warning' onClick={()=>deleteUser()}>Delete Account</button>\r\n    </label>\r\n</div>\r\n  )\r\n}\r\nexport default Inputs","import React, {useState, useEffect, useContext} from 'react'\r\nimport { BrowserRouter as Router,Switch,Route,Link,NavLink, Redirect } from \"react-router-dom\" \r\nimport Inputs from '../Inputs'\r\nimport firebase from 'firebase'\r\nimport {db} from '../../Fire'\r\nimport {CSSTransition, TransitionGroup} from 'react-transition-group'\r\nimport { ContextApp } from '../../ContextAPI'\r\n\r\nfunction Account (props) {\r\n  const user = firebase.auth().currentUser\r\n  const [deleteuser, setDeleteuser]=useState('')\r\n  const [name, setName]=useState('')\r\n  const [age, setAge]=useState('')\r\n  const [phonenumber, setPhonenumber]=useState('')\r\n  const [city, setCity]=useState('')\r\n  const [country, setCountry]=useState('')\r\n  const [website, setWebsite]=useState('')\r\n  const [uploaded, setUploaded]=useState(false)\r\n  const [cover, setCover]=useState('')\r\n  const [email, setEmail]=useState('')\r\n  const [job, setJob]=useState('')\r\n  const [deleteaccountstring, setDeleteaccountstring]=useState('')\r\n  const {notifi, setNotifi, notificont, setNotificont}=useContext(ContextApp)\r\n\r\n  const [loading, setLoading]=useState(true)\r\n  function uploadImg(){\r\n   \r\n    let file = document.querySelector('.uploadpic').files[0]\r\n    const storageRef = firebase.storage().ref(`${user.uid}/${file.name}`);\r\n    const task = storageRef.put(file);\r\n    task.on('state_changes',\r\n      function progress(){\r\n        setLoading(true)\r\n      },\r\n      function error(){\r\n      \r\n      },\r\n      function complete(){\r\n      setLoading(false)\r\n        setCover(`https://firebasestorage.googleapis.com/v0/b/${storageRef.bucket}/o/${user.uid}%2F${file.name}?alt=media`,)\r\n         setUploaded(!uploaded)\r\n      }\r\n    )\r\n  \r\n  }  // if(file.size <=2097152){ \r\n    //   setUploaded(!uploaded)\r\n    //   let reader = new FileReader()\r\n    //   reader.onloadend = function (){\r\n    //     setCover(reader.result)\r\n    //   }\r\n    //   if(file){\r\n    //     reader.readAsDataURL(file)\r\n    //   }\r\n    // }else {\r\n    //   setNotifi(true)\r\n    //   setNotificont({\r\n    //     msg: 'Image is too large',\r\n    //     emoji: 'fal fa-exclamation-circle'\r\n    //   })\r\n\r\n    //   setTimeout(()=>{\r\n    //     setNotifi(false)\r\n    //   },3500)\r\n    // }\r\n  function saveImg(){\r\n    setUploaded(!uploaded)\r\n    updateProfile()\r\n  }\r\n  function removeImg(){\r\n    setUploaded(false)  \r\n    updateProfile()\r\n    user.updateProfile({\r\n      displayName: name,\r\n    })\r\n    const userobj = {\r\n      job,\r\n      age,\r\n      city,\r\n      country,\r\n      phone: phonenumber,\r\n      website, \r\n      name, \r\n      email,\r\n      cover: 'https://www.gettyimages.ca/gi-resources/images/500px/983794168.jpg'\r\n    }\r\n    db.collection('users').doc(user.uid).update({\r\n        userinfo: userobj\r\n    })    \r\n\r\n  }\r\n  function updateProfile(){\r\n    const userobj = {\r\n      age,\r\n      city,\r\n      country,\r\n      phone: phonenumber,\r\n      website, \r\n      cover, \r\n      name, \r\n      email,\r\n      job,\r\n    }\r\n    db.collection('users').doc(user.uid).update({\r\n        userinfo: userobj\r\n    }).then(()=>{ \r\n        setNotifi(true)\r\n        setNotificont({\r\n          msg: 'Profile was updated!',\r\n          emoji: 'fal fa-check-circle'\r\n        })\r\n    }).catch(err=>{\r\n      setNotifi(true)\r\n      setNotificont({\r\n        msg: 'Image is too large',\r\n        emoji: 'fal fa-exclamation-circle'\r\n      })\r\n    })\r\n    setTimeout(()=>{\r\n      setNotifi(false)\r\n    },3500)\r\n  \r\n  }\r\n  const [disabled, setDisabled]=useState(true)\r\n  function determineDelete(e){\r\n    if(e.target.value===user.displayName){\r\n      setDisabled(false)\r\n    }else {\r\n      setDisabled(true)\r\n    }\r\n  }\r\n  useEffect(()=>{\r\n    db.collection('users').doc(user.uid).onSnapshot(snap=>{\r\n      const user = snap.data()\r\n      setName(user.userinfo.name)\r\n      setAge(user.userinfo.age)\r\n      setPhonenumber(user.userinfo.phone)\r\n      setCity(user.userinfo.city)\r\n      setCountry(user.userinfo.country)\r\n      setWebsite(user.userinfo.website)\r\n      setCover(user.userinfo.cover)\r\n      setEmail(user.userinfo.email)\r\n      setJob(user.userinfo.job)\r\n      setLoading(false)\r\n    })\r\n  },[])\r\n\r\n  return (\r\n   <div className='account'>\r\n      <div className=\"head\">\r\n        <h2>Account</h2>\r\n      </div>\r\n      <div className=\"profilepic\">\r\n          {loading?<div className={\"loader blue reloader width\"}>\r\n                <div class=\"lds-ring\">\r\n                  <div></div>\r\n                  <div></div>\r\n                  <div></div>\r\n                  <div></div>\r\n                </div>\r\n              </div>:  <img src={cover} alt=\"\"/>}\r\n          <div className=\"btnprof flexrow\">\r\n          {!uploaded?\r\n            <label>\r\n            <div className=\"settingBtn\" onClick={()=>setNotifi(false)}>Upload</div>\r\n            <input className='uploadpic' onChange={()=>uploadImg()} type=\"file\" style={{display: 'none'}}/>\r\n          </label>:\r\n            <button className='settingBtn' onClick={()=>saveImg()}>Save</button>\r\n        }\r\n            <button className='settingBtn warning' onClick={()=>removeImg()}>Remove</button>\r\n          </div>\r\n      </div>\r\n      <hr/>\r\n        <Inputs \r\n        name={name}\r\n        setName={setName}\r\n        age={age}\r\n        setAge={setAge}\r\n        phonenumber={phonenumber}\r\n        setPhonenumber={setPhonenumber}\r\n        city={city}\r\n        setCity={setCity}\r\n        country={country}\r\n        setCountry={setCountry}\r\n        website={website}\r\n        setWebsite={setWebsite}\r\n        updateProfile={updateProfile}\r\n        determineDelete={determineDelete}\r\n        disabled={disabled}\r\n       />\r\n\r\n        {/* <div className=\"flexrow inps\">\r\n        <label>\r\n          <span style={{marginBottom: '10px'}}>Delete Account</span>\r\n          <small>If you delete your account, all your data will be lost.</small>\r\n         <input style={{width: '80%'}} placeholder={'Type in '+user.displayName} type=\"text\" required onChange={(e)=>{setDeleteuser(e.target.value);}}/>\r\n        </label>\r\n        <label>\r\n        <button  className={deleteuser===user.displayName?'themeBtn warning':'themeBtn warning disabled'} disabled={deleteUser===user.displayName?'false':'true'} style={{marginTop: '10px', width: '80%'}}  onClick={()=>deleteUser()}>Delete Account</button>\r\n        </label>\r\n        </div> */}\r\n  </div>\r\n  )\r\n}\r\nexport default Account","import React, {useState, useEffect} from 'react'\r\nimport { BrowserRouter as Router,Switch,Route,Link,NavLink, Redirect } from \"react-router-dom\" \r\n\r\nfunction Switches (props) {\r\n  const {checked, setChecked, function1} =props\r\n  return (\r\n   <div className='switchdiv'>\r\n  <div className=\"flexrow switchdiv\">\r\n  <p>{props.title}</p>\r\n  <label className='form-switch'>\r\n  <input type=\"checkbox\" checked={checked} onChange={(e)=>{setChecked && setChecked(e.target.checked); function1 && function1()}}/>\r\n  <i></i>\r\n  </label>\r\n  </div>\r\n  </div>\r\n  )\r\n}\r\nexport default Switches","import React, {useState, useEffect, useContext} from 'react'\r\nimport { BrowserRouter as Router,Switch,Route,Link,NavLink, Redirect } from \"react-router-dom\" \r\nimport {ContextApp} from '../ContextAPI'\r\nimport {createGlobalStyle, createglobalStyle} from 'styled-components'\r\n\r\nfunction Input (props) {\r\n  const {themecolor}=useContext(ContextApp)\r\n  const {type, title, value, setValue, placeholder, changeCSSVar} = props\r\n\r\n  return (\r\n   <div className='input flexrow sb'>\r\n     <p>{title}</p>\r\n     {type==='text'?<input required onBlur={(e)=>e.target.style.border='solid 2px #eee'} onFocus={(e)=>e.target.style.border=`solid 2px ${value}`} placeholder={placeholder} type={type} value={value} onChange={(e)=>{setValue(e.target.value)}}/>:\r\n         <input required onBlur={(e)=>e.target.style.border='solid 2px #eee'} onFocus={(e)=>e.target.style.border=`solid 2px ${value}`} placeholder={placeholder} type={type} value={value} onChange={(e)=>{setValue(e.target.value); changeCSSVar(e)}}/>\r\n    }\r\n    </div>\r\n  )\r\n}\r\nexport default Input","import React, {useState, useEffect} from 'react'\r\nimport { BrowserRouter as Router,Switch,Route,Link,NavLink, Redirect } from \"react-router-dom\" \r\nimport firebase from 'firebase'\r\n\r\n\r\n\r\nfunction Button (props) {\r\n  const {emoji,state1, setState1, setState2,style, function1, type, title, addstyle, state3, setState3, stylebtn}=props\r\n  function styleFunc(){\r\n    if(addstyle){\r\n      if(state1){\r\n        return {backgroundColor: 'transparent', border: 'solid 3px'+style, color: style}\r\n      }else {\r\n        return {backgroundColor: style, border: 'solid 3px transparent'}\r\n      }\r\n    }\r\n  }\r\n  return (\r\n      <div className='flexrow sb'>\r\n      {type==='button'?<div></div>:<p>{title}</p>}\r\n      {type==='button'?<button className='btn'   onClick={()=>{function1()}} >Save</button>:<i class={emoji} onClick={()=>{props.setState1(!state1); setState2 && setState2(true)}} onMouseOver={()=>setState3 && setState3(true)} onMouseLeave={()=>setState3 && setState3(false)}></i>}\r\n      {(emoji!=='fad fa-adjust'&&type!=='button')?<span role='img' aria-label='emoji' onClick={()=>{props.setState1(!state1); setState2 && setState2(true)}}>{emoji}</span>:''}\r\n      </div>\r\n  )\r\n}\r\nexport default Button\r\n","import React, {useState, useEffect} from 'react'\r\nimport { BrowserRouter as Router,Switch,Route,Link,NavLink, Redirect } from \"react-router-dom\" \r\nimport Switches from '../Switches'\r\nimport Input from '../Input'\r\nimport firebase from 'firebase'\r\nimport { db } from '../../Fire'\r\nimport Button from '../Button'\r\n\r\nfunction Personalization (props) {\r\n  const user = firebase.auth().currentUser\r\n  const {function1, input1, input2, input3,input4, setInput4, setInput1, setInput2, setInput3} = props\r\n  const [hovered, setHovered]=useState(false)\r\n\r\n  function changeCSSVar(e){\r\n    document.documentElement.style.setProperty(\r\n      '--theme-color', e.target.value\r\n    )\r\n}\r\nfunction changeCSSVarChat(e){\r\n  document.documentElement.style.setProperty(\r\n    '--chat-color', e.target.value\r\n  )\r\n}\r\n  return (\r\n   <div className='customize'>\r\n <div><h2>Customize</h2></div>\r\n    <small>Customize your chat settings.</small>\r\n    <hr/>\r\n      <div className=\"spacer1\"></div>\r\n    <div className=\"flex\">\r\n      <Switches title={'Dark Mode'} checked={input1} setChecked={setInput1}/>\r\n      <Switches title={'Wide Sidebar'} checked={input2} setChecked={setInput2}/>\r\n      <Input type={'color'} title={'Chat Color'} value={input3} setValue={setInput3} changeCSSVar={changeCSSVarChat}/>\r\n      <Input type={'color'} title={'Theme Color'} value={input4} setValue={setInput4} changeCSSVar={changeCSSVar}/>\r\n      <Button type={'button'} state1={hovered} setState1={setHovered} style={input4}  function1={function1} addstyle={true} />\r\n    </div>\r\n  </div>\r\n  )\r\n}\r\nexport default Personalization","import React, {useState, useEffect} from 'react'\r\nimport { BrowserRouter as Router,Switch,Route,Link,NavLink, Redirect } from \"react-router-dom\" \r\n\r\nfunction Infocontainer (props) {\r\n  const {variable, title}=props\r\n  return (\r\n   <>\r\n      <div className=\"flexrow sb\" style={{margin: '10px 0'}}>\r\n      <p>{title}:</p>\r\n      <p className='light'>{variable?variable:'N/A'}</p>\r\n    </div>\r\n  </>\r\n  )\r\n}\r\nexport default Infocontainer","import React, {useState, useEffect} from 'react'\r\nimport { BrowserRouter as Router,Switch,Route,Link,NavLink, Redirect } from \"react-router-dom\" \r\nimport { db } from '../../Fire'\r\nimport Infocontainer from './Infocontainer'\r\n\r\nfunction Aboutchatuser (props) {\r\n  let {chatuser}=props\r\n  const [name, setName]=useState('')\r\n  const [age, setAge]=useState('')\r\n  const [city, setCity]=useState('')\r\n  const [country, setCountry]=useState('')\r\n  const [cover, setCover]=useState('')\r\n  const [email, setEmail]=useState('')\r\n  const [job, setJob]=useState('')\r\n  const [phone, setPhone]=useState('')\r\n  const [website, setWebsite]=useState('')\r\n  useEffect(()=>{\r\n    db.collection('users').doc(chatuser).onSnapshot(snap=>{\r\n      let data = snap.data()\r\n      setName(data.userinfo.name)\r\n      setAge(data.userinfo.age)\r\n      setCity(data.userinfo.city)\r\n      setCountry(data.userinfo.country)\r\n      setCover(data.userinfo.cover)\r\n      setEmail(data.userinfo.email)\r\n      setJob(data.userinfo.job)\r\n      setPhone(data.userinfo.phone)\r\n      setWebsite(data.userinfo.website)\r\n    })\r\n\r\n  },[])\r\n  return (\r\n   <>\r\n    <div className=\"flexrow sb\">\r\n    <h2 className='capitalize'>About {name}</h2>\r\n    <div className=\"profilepic\">\r\n      <img src={cover} alt=\"profilepicture\"/>\r\n    </div>\r\n    </div>\r\n    <hr/>\r\n    <h3 style={{marginBottom: '10px'}}>Personal Info</h3>\r\n\r\n    <Infocontainer variable={age} title={'Age'}/>\r\n    <Infocontainer variable={job} title={'Job'}/>\r\n    <Infocontainer variable={phone} title={'Phone'}/>\r\n    <Infocontainer variable={country} title={'Country'}/>\r\n    <Infocontainer variable={city} title={'City'}/>\r\n    <h3 style={{margin: '10px 0'}}>Other Info</h3>\r\n    <Infocontainer variable={email} title={'Email'}/>\r\n    <div className=\"flexrow sb\" style={{margin: '10px 0'}}>\r\n      <p>Website:</p>\r\n      <p className='light'>{website==='https://'?'N/A':<a href={website} rel='noreferrer' target=\"_blank\"> <i class=\"fal fa-external-link-alt\"></i></a>}</p>\r\n    </div>\r\n\r\n  </>\r\n  )\r\n}\r\nexport default Aboutchatuser","import React, {useState, useEffect} from 'react'\r\nimport { BrowserRouter as Router,Switch,Route,Link,NavLink, Redirect } from \"react-router-dom\" \r\n\r\nfunction Preferences () {\r\n\r\n  return (\r\n   <>\r\n   asd\r\n  </>\r\n  )\r\n}\r\nexport default Preferences","import React, {useState, useEffect, useContext} from 'react'\r\nimport { BrowserRouter as Router,Switch,Route,Link,NavLink, Redirect } from \"react-router-dom\" \r\nimport Switches from '../Switches'\r\nimport Input from '../Input'\r\nimport firebase from 'firebase'\r\nimport { db } from '../../Fire'\r\nimport Button from '../Button'\r\nimport {ContextApp} from '../../ContextAPI'\r\nfunction Themes (props) {\r\n  const  {themecolor,notifi, setNotifi, notificont, setNotificont}=useContext(ContextApp)\r\n  const user = firebase.auth().currentUser\r\n  const {themeimg,setThemeimg,themebool,setEmojibool,setThemebool} = props\r\n  const [hovered, setHovered]=useState(false)\r\n  const [nickname, setNickname]=useState('')\r\n  const [emoji, setEmoji]=useState('')\r\n  const {creatorid,convoid, setEmojitype, emojitype, miniview, setMiniview}=props\r\n  function updateProfile(){\r\n    setNotifi(true)\r\n    setNotificont({\r\n      msg: 'Profile was updated!',\r\n      emoji: 'fal fa-check-circle'\r\n    })\r\n\r\n    if(user.uid===creatorid){\r\n      db.collection('conversations').doc(convoid).update({\r\n        nickname1: nickname,\r\n      })\r\n    }\r\n    else {\r\n      db.collection('conversations').doc(convoid).update({\r\n        nickname2: nickname,\r\n      })\r\n    }\r\n    setTimeout(()=>{\r\n      setNotifi(false)\r\n    },3500)\r\n  }\r\n  useEffect(()=>{\r\n    db.collection('conversations').doc(convoid).onSnapshot(snap=>{\r\n        const convo =  snap.data()\r\n        setThemeimg(convo.customizedconvo.theme) \r\n        setEmojitype(convo.customizedconvo.emoji)\r\n        if(user.uid===creatorid) {\r\n          setNickname(convo.nickname1)\r\n        }\r\n        else {\r\n          setNickname(convo.nickname2)\r\n        }\r\n      })\r\n  },[convoid])\r\n  return (\r\n   <div className='customize'>\r\n <div><h2>Themes</h2></div>\r\n    <small>Customize your conversation settings.</small>\r\n    <hr/>\r\n      <div className=\"spacer1\"></div>\r\n    <div className=\"flex\">\r\n       <Button type='emoji' emoji='fad fa-adjust' title={'Theme'} setState1={setThemebool} state1={themebool} state3={miniview} setState3={setMiniview}/>\r\n       <Button type={'emoji'} emoji={emojitype} title={'Emoji'} state1={emoji} setState1={setEmoji} setState2={setEmojibool}/>\r\n       <Input  placeholder={'Nickname'} type={'text'}  title={'Nickname'} value={nickname} setValue={setNickname} />\r\n        <div className='flexrow sb'><span></span><button className='btn' style={{color: 'white', border: `solid 3px transparent`, backgroundColor: themecolor}} onMouseOver={(e)=>e.target.style.cssText=`background-color: transparent; border: solid 3px ${themecolor}; color: ${themecolor}`} onMouseLeave={(e)=>e.target.style.cssText=`background-color: ${themecolor}; border: solid 3px transparent; color: white`} onClick={()=>updateProfile()}>Save</button></div>\r\n    </div>\r\n  </div>\r\n  )\r\n}\r\nexport default Themes","import React, {useState, useEffect} from 'react'\r\nimport { BrowserRouter as Router,Switch,Route,Link,NavLink, Redirect } from \"react-router-dom\" \r\nimport Input from '../Input'\r\nimport Switches from '../Switches'\r\nimport {db} from '../../Fire'\r\nimport firebase from 'firebase'\r\nfunction Actions (props) {\r\n  const user = firebase.auth().currentUser\r\n  const {notifibool, setNotifibool, convoid, creatorid}=props\r\n  function changeNotifi(){\r\n   \r\n      if(user.uid===creatorid){\r\n        db.collection('conversations').doc(convoid).update({\r\n          notifications1: !notifibool\r\n        })\r\n     }else {\r\n       db.collection('conversations').doc(convoid).update({\r\n         notifications2: !notifibool\r\n       })\r\n\r\n     }\r\n    \r\n}\r\n  return (\r\n   <>\r\n    <h2 o>Chat Configurations</h2>\r\n    <hr/>\r\n   <Switches title='Notifications' checked={notifibool}  function1={changeNotifi}/>\r\n  </>\r\n  )\r\n}\r\nexport default Actions","import React, {useState, useEffect} from 'react'\r\nimport { BrowserRouter as Router,Switch,Route,Link,NavLink, Redirect } from \"react-router-dom\" \r\n\r\nfunction Support () {\r\n\r\n  return (\r\n   <>\r\n   \r\n  </>\r\n  )\r\n}\r\nexport default Support","import React, {useState, useEffect, useContext} from 'react'\r\nimport { BrowserRouter as Router,Switch,Route,Link,NavLink, Redirect } from \"react-router-dom\" \r\nimport firebase from 'firebase'\r\nimport {db} from '../Fire'\r\nimport Account from './settings/Account'\r\nimport Personalization from './settings/Personalization'\r\nimport Aboutchatuser from './settings/Aboutchatuser'\r\nimport Preferences from './settings/Preferences'\r\nimport { CSSTransition } from 'react-transition-group'\r\nimport Themes from './settings/Themes'\r\nimport {ContextApp} from '../ContextAPI'\r\nimport {useHistory} from 'react-router-dom'\r\nimport Contextmenu from './Contextmenu'\r\nimport Hoverablebutton from './Hoverablebutton'\r\nimport Actions from './settings/Actions'\r\nimport Support from './settings/Support'\r\n\r\nfunction Usersettings (props) {\r\n  const id =db.collection('users').doc().id\r\n  const [keyword, setKeyword]=useState('')\r\n  const pattern = new RegExp('\\\\b' + keyword.replace(/[\\W_]+/g,\"\"), 'i')\r\n  const history = useHistory()\r\n  const {settings, type, link, linklabel, BrowserHistory}=props\r\n  const [themebool, setThemebool]=useState(false)\r\n  const [emojibool, setEmojibool]=useState(false)\r\n  const [miniview, setMiniview]=useState(false)\r\n  const {darkmode, notifi, setNotifi, notificont, setNotificont}=useContext(ContextApp)\r\n  const user = firebase.auth().currentUser\r\n\r\n  const [themecolor, setThemecolor]=useState('')\r\n  const [themeimg, setThemeimg]=useState('')\r\n  const [emojitype, setEmojitype]=useState('')\r\n  const [darkmode1, setDarkmode]=useState(false)\r\n  const [notifibool, setNotifibool]=useState(true)\r\n  const [widemode, setWidemode]=useState(false)\r\n  const [chatcolor, setChatcolor]=useState('')\r\n  const [contextmenu, setContextmenu]=useState(false)\r\n  const [contextstyle, setContextstyle]=useState({\r\n    top: 0,\r\n    left: 0,\r\n  })\r\n  const themes = [\r\n    {img:'https://wallpaperaccess.com/full/1288078.jpg', type: 'background'},\r\n    {img:'https://www.setaswall.com/wp-content/uploads/2019/08/Whatsapp-Wallpaper-072.jpg',type: 'background'},\r\n    {img:'http://images.unsplash.com/photo-1518531933037-91b2f5f229cc?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max', type: 'background'},\r\n    {img:'https://i.imgur.com/05HfuHW.jpg',type: 'background'},\r\n    {img:'https://i.imgur.com/Frdc6vv.jpg',type: 'background'},\r\n    {img:'https://i.imgur.com/3St6WoQ.jpg',type: 'background'},\r\n    {img: 'https://i.imgur.com/R4TMmVd.jpg', type: 'background'},\r\n    {img: 'https://i.imgur.com/8UIUZae.jpg', type: 'background'},\r\n    {img:'https://i.imgur.com/yfwxwo1.jpg' , type: 'gradient'},\r\n    {img:'https://i.imgur.com/HTQ2T1O.jpg', type: 'gradient'},\r\n    {img:'https://i.imgur.com/z0zjGrS.jpg', type: 'gradient'},\r\n    {img:'https://i.imgur.com/NXUqzHa.jpg', type: 'gradient'},\r\n    {img:'https://i.imgur.com/bT0t5lL.jpg' , type: 'gradient'},\r\n    {img: 'https://i.imgur.com/TE4sKjU.jpg', type: 'gradient'},\r\n    {img: 'https://i.imgur.com/4hzNTTq.png', type: 'default'},  \r\n]\r\nconst emojis= [\r\n  '😀', '😃' ,'😄', '😁', '😆' ,'😅' ,\r\n     '🥺', '😢', '😭' ,'😤' ,'😠', '😡' ,\r\n     '🤬' ,'🤯','😳', '🥵', '🥶', \r\n     '😱', '😨','😰', '😥', '😓' ,'🤗' ,\r\n     '🤔', '🤭', '🤫' ,'🤥' ,'😶', '😐',\r\n     '😑', '😬', '🙄' ,'😯', '😦', '😧',\r\n      '😑', '😬', '🙄' ,'😯', '😦', '😧',\r\n       '😮', '😲' ,'🥱' ,'😴', '🤤',\r\n        '😪' ,'😵', '🤐', \"🥴\",\r\n        '😬' ,'🙄', '😯' ,'😦' ,\r\n        '😧', '😮' ,'😲', '🥱' ,\r\n        '😴' ,'🤤' ,'😪', '😵',\r\n         '🤐', '🥴', '🤢 ','🤮' ,\r\n         '🤧', '😷', \"🤒\", \"🤕\", '🤑', \r\n         \"🤠\", '😈', \"👿\"\r\n] \r\n  function selectEmoji(el){\r\n    setEmojitype(el)\r\n    setNotifi(true)\r\n  setNotificont({\r\n    emoji: el,\r\n    msg: 'Emoji selected!'\r\n  })\r\n  db.collection('conversations').doc(props.diag.convoinfo.convoid).update({\r\n    customizedconvo : {\r\n     theme: themeimg,\r\n     emoji: el,\r\n    }\r\n   })\r\n  setTimeout(()=>{\r\n    setNotifi(false)\r\n  },3500)\r\n  setEmojibool(false)\r\n  }\r\nfunction selectTheme(el){\r\n  setThemeimg(el)\r\n  setNotifi(true)\r\n  setNotificont({\r\n    emoji: 'fal fa-check-circle',\r\n    msg: 'Theme selected!'\r\n  })\r\n  \r\n    db.collection('conversations').doc(props.diag.convoinfo.convoid).update({\r\n     customizedconvo : {\r\n      theme: el,\r\n      emoji: emojitype,\r\n     }\r\n    })\r\n  \r\n  setTimeout(()=>{\r\n    setNotifi(false)\r\n  },3500)\r\n  setThemebool(false)\r\n}\r\n  let emojisrow = emojis &&emojis.map(emoji=>{\r\n      return <div  style={{cursor: 'pointer'}} className=\"emojidiv\"  onClick={()=>selectEmoji(emoji)}>\r\n          <span role='img' aria-label='emoji'>{emoji}</span>\r\n      </div>\r\n  })\r\n\r\n    let themesrow = themes && themes.map(theme=>{\r\n        if(pattern.test(theme.type.toLowerCase())){\r\n          return <div  className=\"theme bs flex\">\r\n          <div className=\"img\"> <img src={theme.img} alt=''/></div>\r\n           <div className=\"select flexrow\">\r\n           <p>Select this theme:</p>\r\n           <i className='fal fa-check-circle'  onClick={()=>{selectTheme(theme.img)}} style={{color: themecolor}}></i>\r\n           </div>\r\n       </div>\r\n        }\r\n    })\r\n\r\n  function updateProfile(){\r\n    const updateObj ={\r\n      darkmode: darkmode1,\r\n      widemode,\r\n      color: chatcolor,\r\n      themecolor\r\n    }\r\n    db.collection('users').doc(user.uid).update({\r\n      customization :  updateObj  \r\n    }).then(()=>{\r\n      setNotifi(true)\r\n      setNotificont({\r\n        emoji: 'fal fa-check-circle',\r\n        msg: 'Profile has been updated!'\r\n      })\r\n    })\r\n    setTimeout(()=>{\r\n      setNotifi(false)\r\n    },3500)\r\n  }\r\n\r\n  function contextMenu(e){\r\n    let customcontext = document.querySelector('.contextmenu')\r\n    const bounding = customcontext.getBoundingClientRect();\r\n      e.preventDefault() \r\n      setContextmenu(true)\r\n      customcontext.style.top= `${e.pageY-customcontext.clientHeight}px`\r\n      customcontext.style.left= `${e.pageX-customcontext.clientWidth}px`\r\n\r\n    }\r\n    useEffect(()=>{\r\n      if(type==='chatsettings'){\r\n        db.collection('conversations').doc(props.diag.convoinfo.convoid).onSnapshot(snap=>{\r\n            const convo = snap.data()\r\n            if(user.uid===props.diag.convoinfo.creatorid) {\r\n              setNotifibool(convo.notifications1)\r\n            }else {\r\n              setNotifibool(convo.notifications2)\r\n            }\r\n        })\r\n      }\r\n\r\n    },[])\r\n  useEffect(()=>{\r\n    db.collection('users').doc(user.uid).onSnapshot(snap=>{\r\n      const user = snap.data()\r\n      setDarkmode(user.customization.darkmode)\r\n      setWidemode(user.customization.widemode)\r\n      setChatcolor(user.customization.color)\r\n      setThemecolor(user.customization.themecolor)\r\n    })\r\n  },[])\r\n\r\n    return (\r\n   <>\r\n    <div onContextMenu={(e)=>contextMenu(e)} className={darkmode?\"settingsgrid flex darkmode\":'settingsgrid flex'}>\r\n        <div className=\"links  flex\">\r\n            <div className=\"section1 flex\">\r\n              <h2>Settings</h2>\r\n            <NavLink onClick={()=>setNotifi(false)} activeStyle={{color: themecolor}} activeClassName='bs' exact to={'/'+link.link0}>{linklabel.link0}</NavLink>\r\n            <NavLink onClick={()=>setNotifi(false)} activeStyle={{color: themecolor}} activeClassName='bs'  to={`/${type}/${link.link1}`}>{linklabel.link1}</NavLink>\r\n            </div>\r\n            <hr/>\r\n            <div className=\"section2 flex\">\r\n            <NavLink onClick={()=>setNotifi(false)} activeStyle={{color: themecolor}} activeClassName='bs'  to={`/${type}/${link.link2}`}>{linklabel.link2}</NavLink>\r\n            <NavLink onClick={()=>setNotifi(false)}activeStyle={{color: themecolor}} activeClassName='bs' to={`/${type}/${link.link3}`}>{linklabel.link3}</NavLink>\r\n              {type==='settings'?'':<hr/>}\r\n             {type==='settings'?'':  <Link  to={'/chat/'+props.diag.convoinfo.convoid} style={{marginTop:'5px'}}>Return to Chat</Link>}\r\n            </div>\r\n        </div>\r\n        <div className=\"paths bs\">\r\n          <Switch>\r\n          <Route exact path={`/${link.link0}`}>\r\n            {type==='settings'?<Account  notifi={notifi} notificont={notificont} setNotifi={setNotifi} setNotificont={setNotificont}/>:<Themes setEmojitype={setEmojitype} emojitype={emojitype} setEmojibool={setEmojibool} themeimg={themeimg} setThemeimg={setThemeimg} themebool={themebool} setThemebool={setThemebool} chatuser={props.chatuser} notifi={notifi} notificont={notificont} setNotifi={setNotifi} setNotificont={setNotificont} convoid={props.diag.convoinfo.convoid} creatorid={props.diag.convoinfo.creatorid} miniview={miniview} setMiniview={setMiniview}/>}\r\n          </Route>\r\n          <Route  path={`/${type}/${link.link1}`}>\r\n             {type==='settings'? <Preferences />:<Actions notifibool={notifibool} setNotifibool={setNotifibool} convoid={props.diag.convoinfo.convoid} creatorid={props.diag.convoinfo.creatorid}/>}\r\n          </Route>\r\n          <Route  path={`/${type}/${link.link2}`}>\r\n            {type==='settings'?<Personalization function1={updateProfile} input1={darkmode1} input3={chatcolor} input4={themecolor} input2={widemode} setInput1={setDarkmode} setInput4={setThemecolor} setThemecolor={setThemecolor} setInput3={setChatcolor} setInput2={setWidemode}/>:''}\r\n          </Route>\r\n          <Route path={`/${type}/${link.link3}`}>\r\n              {type==='settings'?<Support />:<Aboutchatuser chatuser={props.chatuser}/>}\r\n          </Route>\r\n\r\n          </Switch>\r\n        \r\n        </div>\r\n       <CSSTransition in={notifi} timeout={300} classNames='displayerror' unmountOnExit>\r\n       <div className=\"errormsg bs\" >\r\n       <span role='img' aria-label='emoji'>{emojitype}</span> <p>{notificont.msg}</p>\r\n        <i className=\"far fa-times\" style={{color: themecolor}} onClick={()=>setNotifi(false)}></i>    \r\n        </div>\r\n       </CSSTransition>\r\n        <CSSTransition in={themebool} timeout={300} classNames={\"themesdisplay\"} unmountOnExit>\r\n          <>\r\n        <div className=\"screen\" onClick={()=>setThemebool(false)}></div> \r\n          \r\n        <div className='themes bs flex'>\r\n          \r\n      \r\n          <div className=\"filterBtn flex\">\r\n            <h2 style={{textAlign: 'center'}}>Filter: </h2>\r\n              <div className=\"flexrow center\">\r\n                <Hoverablebutton  state={keyword} setState={setKeyword} type='' text='All'/>\r\n                <Hoverablebutton  state={keyword} setState={setKeyword} type='background' text='Images'/>\r\n                <Hoverablebutton  state={keyword} setState={setKeyword} type='gradient' text='Gradients'/>\r\n                <Hoverablebutton  state={keyword} setState={setKeyword} type='default' text='Default'/>\r\n              </div>\r\n            </div>\r\n        \r\n          <div className=\"flex\">  \r\n         <p className='themestitle'>Themes: </p>\r\n         {themesrow}\r\n          </div>\r\n          </div>\r\n          </>\r\n        </CSSTransition>\r\n        <CSSTransition in={emojibool} timeout={300} classNames={\"emojidisplay\"} unmountOnExit>\r\n          <>\r\n          <div className=\"screen\" onClick={()=>setEmojibool(false)} onContextMenu={()=>setContextmenu(false)}></div> \r\n          \r\n        <div className='emojiwindow bs flexrow'>\r\n            <div className=\"emojistitle\">\r\n              <h2>Select Emoji</h2>\r\n              <div className=\"flexrow flexwrap\">\r\n              {emojisrow}\r\n              </div>\r\n            </div>\r\n          </div>\r\n          </>\r\n        </CSSTransition>\r\n        <CSSTransition in={miniview} timeout={300} classNames={'miniviewdisplay'} unmountOnExit>\r\n            <div className=\"miniviewdisplay bs\" >\r\n              <img src={themeimg} alt=\"\"/>\r\n            </div>\r\n        </CSSTransition>\r\n      \r\n          <Contextmenu emojitype={emojitype} setEmojibool={setEmojibool} emojibool={emojibool} themebool={themebool} setThemebool={setThemebool} contextstyle={contextstyle} type={'settings'} contextmenu={contextmenu} setContextmenu={setContextmenu}/>\r\n    </div>\r\n  </>\r\n  )\r\n}\r\nexport default Usersettings","import React, {useContext, useEffect} from 'react'\r\nimport { Calendar } from '@fullcalendar/core'\r\nimport dayGridPlugin from '@fullcalendar/daygrid'\r\nimport listPlugin from '@fullcalendar/list'\r\n\r\nfunction Calendars() {\r\n\r\n\r\n  useEffect(() => {\r\n    let calendarEl = document.getElementById('calendar');\r\n  \r\n    let calendar = new Calendar(calendarEl, {\r\n      plugins: [ dayGridPlugin, listPlugin ],\r\n      height: 350,\r\n      contentHeight: 300,\r\n      events: [\r\n        {\r\n          title: 'Event 1',\r\n          start: '2020-10-26'\r\n        },\r\n        {\r\n          title: 'Event2',\r\n          start: '2020-11-05'\r\n        }\r\n      ],\r\n    });\r\n    \r\n    calendar.render();\r\n     \r\n  },[])\r\n\r\n  return (\r\n    <div className=\"calendar dashbox\"> \r\n      <div id=\"calendar\"></div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Calendars","import React, { useState, useEffect, useContext } from \"react\";\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n  Link,\r\n  NavLink,\r\n  Redirect\r\n} from \"react-router-dom\";\r\nimport { ContextApp } from \"../ContextAPI\";\r\nimport styled from 'styled-components'\r\nconst Icon = styled.i `\r\ncolor: ${props=>props.color}\r\n`;\r\nconst Span = styled.span `\r\n    background-color: red;\r\n    &:hover {\r\n      background-color: ${props=>props.color};\r\n      span {\r\n        color: white;\r\n      }\r\n      i {\r\n        color: white;\r\n      }\r\n    }\r\n`;\r\n\r\nfunction Hoverlink(props) {\r\n  const { themecolor } = useContext(ContextApp);\r\n  const { num,icon,type, classNames, setState, state, lnk, txt, clk } = props;\r\n\r\n\r\n  return  (\r\n    <>\r\n        <Link to={lnk} onClick={clk }>\r\n            <Span color={themecolor} className={classNames}>\r\n            <span>{txt}</span>\r\n            <Icon color={themecolor} className={icon}></Icon>\r\n            </Span>\r\n        </Link>\r\n    </>\r\n\r\n  );\r\n}\r\nexport default Hoverlink;\r\n","import React, { useState, useEffect, useContext } from \"react\";\r\nimport firebase from \"firebase\";\r\nimport { db } from \"../Fire\";\r\nimport { CSSTransition, TransitionGroup } from \"react-transition-group\";\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n  Link,\r\n  NavLink,\r\n  Redirect,\r\n  useLocation\r\n} from \"react-router-dom\";\r\nimport ReactTimeAgo from 'react-time-ago'\r\n\r\nimport Usersettings from \"./Usersettings\";\r\nimport { ContextApp } from \"../ContextAPI\";\r\nimport Calendars from \"./Calendars\";\r\nimport Hoverlink from \"./Hoverlink\";\r\nfunction Body(props) {\r\n  const { themecolor } = useContext(ContextApp);\r\n  const user = firebase.auth().currentUser;\r\n  const [cover, setCover] = useState(\"\");\r\n  const { handleLogout } = props;\r\n  const links = [\"chat\", \"notifications\", \"settings\", \"logout\"];\r\n  const [notifi, setNotifLength]=useState(0)\r\n  const lnks = [\r\n    { icon: \"fal fa-comment-alt\", txt: \"chat\" },\r\n    { icon: \"fal fa-bell\", txt: \"Notifications\" },\r\n    { icon: \"fal fa-cog\", txt: \"Settings\" },\r\n    { icon: \"fal fa-sign-out\", txt: \"Logout\" }\r\n  ];\r\n  const id =db.collection('users').doc().id\r\n  const lnksrow =\r\n    lnks &&\r\n    lnks.map((lnk) => {\r\n      return (\r\n        <Hoverlink  icon={lnk.icon} txt={lnk.txt} handleLogout={handleLogout} />\r\n      );\r\n    });\r\n  function determineTime() {\r\n    const d = new Date();\r\n    if (d.getHours() >= 6 && d.getHours() < 12) {\r\n      return \"Good Morning,\";\r\n    } else if (d.getHours() >= 12 && d.getHours() < 17) {\r\n      return \"Good Afternoon,\";\r\n    } else if (d.getHours() >= 17 && d.getHours() < 20) {\r\n      return \"Good Evening,\";\r\n    } else if (d.getHours() >= 20 && d.getHours() <= 23) {\r\n      return \"Good Night,\";\r\n    } else if (d.getHours() >= 0 && d.getHours() < 6) {\r\n      return \"Good Night,\";\r\n    }\r\n  }\r\n  function determinetext() {\r\n    if (user) {\r\n      \r\n        return determineTime() + \" \" + user.displayName\r\n      \r\n    }\r\n  }\r\n  useEffect(()=>{\r\n    db.collection('notifications').doc(user.uid).onSnapshot(snap=>{\r\n      const notifi = snap.data()\r\n      setNotifLength(notifi.notifications.length)\r\n    })\r\n  },[])\r\n  return (\r\n    <div className=\"home\">\r\n      <div className=\"header flex sb\">\r\n        <h2>{determinetext()}</h2>\r\n        \r\n      </div>\r\n      <hr />\r\n      <div className=\"flex fe sticky\">\r\n        <h2 className=\"marginBottom\">Navigate</h2>\r\n        <div className=\"gridobjects bs marginBottom\">\r\n          <Hoverlink\r\n            icon=\"fal fa-comment-alt\"\r\n            txt=\"Chat\"\r\n            classNames=\"blueback one flexrow sa\"\r\n            lnk=\"/chat\"\r\n          />\r\n          <div className=\"bell\">\r\n          <Hoverlink\r\n            icon=\"fal fa-bell\"\r\n            txt=\"Notifications\"\r\n            classNames=\"blueback two flexrow sa\"\r\n            lnk=\"/notifications\"\r\n          />\r\n          <div className=\"notificount flex\">{notifi}</div>\r\n          </div>\r\n          <Hoverlink\r\n            icon=\"fal fa-cog\"\r\n            txt=\"Settings\"\r\n            classNames=\"blueback three flexrow sa \"\r\n            lnk=\"/settings\"\r\n          />\r\n          <Hoverlink\r\n            icon=\"fal fa-sign-out\"\r\n            txt=\"Logout\"\r\n            classNames=\"blueback four flexrow sa\"\r\n            lnk=\"/\"\r\n            clk={() => props.handleLogout()}\r\n          />\r\n        </div>\r\n      </div>\r\n      <hr />\r\n      <div className=\"homeside\">\r\n        <div className=\"notifications flex bs\">\r\n          <h2>Notifications</h2>\r\n          <strong><p>Pending: {notifi}</p></strong>\r\n          <Link to=\"/notifications\" className=\"flexrow sb\">\r\n            <p>\r\n              Go to notifications <hr />\r\n            </p>\r\n            <i className=\"fal fa-arrow-right\" style={{ color: themecolor }}></i>\r\n          </Link>\r\n        </div>\r\n        <h2>Calendar</h2>\r\n        <Calendars />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\nexport default Body;\r\n","import React, { useState, useEffect, useContext } from \"react\";\r\nimport firebase from \"firebase\";\r\nimport { db } from \"../Fire\";\r\nimport { CSSTransition, TransitionGroup } from \"react-transition-group\";\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n  Link,\r\n  NavLink,\r\n  Redirect,\r\n  useLocation\r\n} from \"react-router-dom\";\r\nimport Usersettings from \"./Usersettings\";\r\nimport { ContextApp } from \"../ContextAPI\";\r\nimport Calendars from \"./Calendars\";\r\nimport Hoverlink from \"./Hoverlink\";\r\nimport ElapsedTime from \"./Elapsedtime\";\r\nimport ReactTimeAgo from 'react-time-ago'\r\nfunction Notifications(props) {\r\n  const { themecolor } = useContext(ContextApp);\r\n  const {setChatuser} = props\r\n  const user = firebase.auth().currentUser;\r\n  const [cover, setCover] = useState(\"\");\r\n  const [notifi, setNotifLength]=useState(0)\r\n  const [notifications, setNotifications]=useState([])\r\n\r\n  const imageRegexB = /(?:https?|ftp):\\/\\/[\\S]*\\.(?:png|jpe?g|gif|svg|webp)/g;\r\n\r\n  function determineNotiMsg(msg){\r\n    if(msg.gif){\r\n      return 'Sent a GIF'\r\n    }else if(msg.file){\r\n      return 'Sent a file'\r\n    }else if(msg.video){\r\n      return 'Sent a video'\r\n    }else if(msg.base64||msg.notifimsg.match(imageRegexB) != null){\r\n      return 'Sent a photo'\r\n    }\r\n    else {\r\n      return msg.notifimsg\r\n    }\r\n  }\r\n  const id =db.collection('users').doc().id\r\n  function deleteNotifi(el){\r\n      notifications && notifications.map(noti=>{\r\n        if(el.notifiid===noti.notifiid){\r\n          let itemindex = notifications.indexOf(noti)\r\n          notifications.splice(itemindex, 1)\r\n          db.collection('notifications').doc(user.uid).update({\r\n            notifications: notifications\r\n          })\r\n        }\r\n      })\r\n  }\r\n  function deleteAllNotifi(){\r\n    db.collection('notifications').doc(user.uid).update({\r\n      notifications: []\r\n    })\r\n  }\r\n  const notificationsrow = notifications && notifications.slice(0).reverse().map(noti=>{\r\n    return <div ><Link to={'/chat/'+noti.id} onClick={()=>{setChatuser(noti.senderid); deleteNotifi(noti)}}>\r\n    <div className=\"notification flex\">\r\n      <div className=\"userprofile\">\r\n        <img src={cover} alt=\"\"/>\r\n      </div>\r\n     <strong> <p>From: {noti.sender}</p></strong>\r\n      <span>Message: {determineNotiMsg(noti)}</span>\r\n      <span>Sent: <ReactTimeAgo date={noti.notifidate.toDate()} locale='en-US'/></span>\r\n      \r\n   </div>\r\n    </Link>\r\n    <i className=\"fal fa-times\" onClick={()=>deleteNotifi(noti)}></i></div>\r\n  })\r\n  useEffect(()=>{\r\n    \r\n    db.collection('notifications').doc(user.uid).onSnapshot(snap=>{\r\n      const notifi = snap.data()\r\n      setNotifLength(notifi.notifications.length)\r\n      setNotifications(notifi.notifications)\r\n      setCover(notifi.notifications.cover)\r\n    }) \r\n  },[])\r\n  return (\r\n    <div className=\"notificationspage\">\r\n      <div className=\"tp\">\r\n      <div className=\"header flexrow \">\r\n      <i class=\"far fa-inbox\" style={{color: themecolor, cursor: 'auto'}}></i>\r\n        <h2>Your Notifications</h2>\r\n      </div>   \r\n       <hr style={{width: '100%'}}/>\r\n      </div>\r\n      <div className=\"notificationsrow flex\">\r\n        <div className='notifiBtnCont'>\r\n          <button className=' themeBtn notifiBtn' onClick={()=>deleteAllNotifi()}>Clear Notifications </button>\r\n          </div>\r\n        {notificationsrow}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\nexport default Notifications;\r\n","import React, {useState, useEffect, useContext} from 'react'\r\nimport { BrowserRouter as Router,Switch,Route,Link,NavLink, Redirect } from \"react-router-dom\" \r\nimport firebase from 'firebase'\r\nimport {db} from '../Fire'\r\nimport Usernav from './Usernav'\r\nimport Userrow from './Userrow'\r\nimport Userprofile from './Userprofile'\r\nimport Usersettings from './Usersettings'\r\nimport Home from './Home'\r\nimport Notifications from './Notifications'\r\nimport {CSSTransition, TransitionGroup} from 'react-transition-group'\r\nimport {ContextApp} from '../ContextAPI'\r\nfunction Paths (props) {\r\n    let {chatsettings,convoinfo, onedialogue, setConvoinfo,adduser, setAdduser, userprofile, chatuser, setChatuser} =props\r\n    const {darkmode, themecolor}=useContext(ContextApp)\r\n    return (\r\n   <>\r\n   \r\n    <Route  path='/chat'>\r\n        <div className={darkmode?\"conversations darkmode\":'conversations'} style={{backgroundColor: themecolor}}>\r\n\r\n          <div className={\"chatcontainer\"}>\r\n          <div className={\"userrow spanall \"}>\r\n            <Userrow chatuser={chatuser} setChatuser={setChatuser} convoinfo={convoinfo} setConvoinfo={setConvoinfo} setAdduser={()=>setAdduser(!adduser)}/>\r\n        </div>\r\n        \r\n          <div className='dialogue spanall'>\r\n                  <Switch >\r\n                  {onedialogue}\r\n                  </Switch>  \r\n          </div>\r\n            \r\n        \r\n        <div className=\"userprofile spanall\">\r\n        <Switch>\r\n         {userprofile}\r\n         </Switch>\r\n        </div>\r\n        \r\n          </div>\r\n      </div>\r\n    </Route>\r\n      <Route  path='/home'>\r\n        <div className={darkmode? \"conversations darkmode\":'conversations'} style={{backgroundColor: themecolor}}>\r\n          <Home handleLogout={props.handleLogout}/>\r\n        </div>\r\n      </Route>\r\n    <Switch>\r\n          {chatsettings}\r\n    </Switch> \r\n      <Route path='/notifications'>\r\n        <Notifications setChatuser={setChatuser}/>\r\n      </Route>\r\n    <Route  path='/settings'>\r\n      <Usersettings  settings={'settings'} type={'settings'} link={{link0: 'settings',link1: 'preferences', link2:'themes', link3: 'support'}} linklabel={{link0: 'Account',link1: 'Preferences', link2: 'Customize', link3: 'Support'}}/>\r\n    </Route>\r\n  </>\r\n  )\r\n}\r\nexport default Paths","import React, {useState, useEffect} from 'react'\r\nimport { BrowserRouter as Router,Switch,Route,Link,NavLink, Redirect, useLocation } from \"react-router-dom\" \r\nimport firebase from 'firebase'\r\nimport {db} from '../Fire'\r\nimport Hoverableicondiv from './Hoverableiconsdiv'\r\nfunction Users (props) {\r\n  // const [name, setName]=useState('')\r\n  // const [img, setImg]=useState('')\r\n  // const [city, setCity]=useState('')\r\n  // const [country, setCountry]=useState('')\r\n  // const [job, setJob]=useState('')\r\n  // const [recipnumber, setRecipnumber]=useState('')\r\n  // const [recipemail, setRecipemail]=useState('')\r\n  // const [recipwebsite, setRecipwebsite]=useState('')\r\n  // const [extend, setExtend]=useState(false)\r\n    const {lnk,convoinfo, setConvoinfo, el, setChatuser, chatuser, setChatstarted, setChatview}=props\r\n    const [recipimg, setRecipimg]=useState('')\r\n    // const {recipname, setRecipname, sendername, setSendername}=props\r\n    const [recipname, setRecipname] = useState('')\r\n    const [sendername, setSendername]=useState('')\r\n    const [activestatus, setActivestatus]=useState(false)\r\n    const [senderimg, setSenderimg]=useState('')\r\n    const [senderonline, setSenderonline]=useState(false)\r\n    const [reciponline, setReciponline]=useState(false)\r\n    const [loading, setLoading]=useState(true)\r\n    const [msg, setMsg]=useState('')\r\n    const location = useLocation()\r\n    let user = firebase.auth().currentUser\r\n  function colorFunc(){\r\n    if(el.convoinfo.creatorid===user.uid){\r\n        if(reciponline){\r\n          return 'rgb(44, 255, 44)'\r\n        }else {\r\n          return '#FF3D3D'\r\n        }\r\n    }else {\r\n      if(senderonline){\r\n        return 'rgb(44, 255, 44)'\r\n      }else {\r\n        return '#FF3D3D'\r\n      }\r\n    }\r\n  }\r\n    useEffect(()=>{\r\n      db.collection('users').doc(el.convoinfo.recipientid).onSnapshot(snap=>{\r\n        const user = snap.data()\r\n        setRecipname(user.userinfo.name)\r\n        setRecipimg(user.userinfo.cover)\r\n        setActivestatus(user.userinfo.online)\r\n        setLoading(false)\r\n        setReciponline(user.online)\r\n      })\r\n      db.collection('users').doc(el.convoinfo.creatorid).onSnapshot(snap=>{\r\n        const user = snap.data()\r\n        setSendername(user.userinfo.name)\r\n        setSenderimg(user.userinfo.cover)\r\n        setLoading(false)\r\n        setSenderonline(user.online)\r\n      })\r\n      db.collection('conversations').doc(el.convoinfo.convoid).onSnapshot(snap=>{\r\n        const msgs = snap.data()  \r\n        setMsg(msgs.messages[msgs.messages.length-1])\r\n      })\r\n    \r\n    },[el.convoinfo.recipientid, el, chatuser])\r\n    return (\r\n   <>\r\n  <Link   onClick={()=>{setChatuser(el.convoinfo.creatorid===user.uid?el.convoinfo.recipientid:el.convoinfo.creatorid)}} >\r\n    {loading?<div class=\"lds-ring\"><div></div><div></div><div></div><div></div></div>:<div className='flexrow' onClick={()=>setChatstarted(true)}> <img src={el.convoinfo.creatorid===user.uid?recipimg:senderimg} alt=\"\"/>  <small>{el.convoinfo.creatorid===user.uid?recipname:sendername}</small>    <div className=\"notifi\" style={{backgroundColor: colorFunc()}}></div> </div>}\r\n\r\n      <Hoverableicondiv icon={'ellipsis-h-alt'} classNames={'white'} type={'link'} lnk={`/chatsettings/${el.convoinfo.convoid}`} setState={setChatview} setState2={setChatstarted}/>\r\n  </Link>\r\n  </>\r\n  )\r\n}\r\nexport default Users","import React, { useState, useEffect, useContext } from \"react\";\r\nimport Sidebar from \"./Sidebar\";\r\nimport firebase from \"firebase\";\r\nimport { db } from \"../Fire\";\r\nimport Usernav from \"./Usernav\";\r\nimport Userrow from \"./Userrow\";\r\nimport Dialogue from \"./Dialogue\";\r\nimport Userprofile from \"./Userprofile\";\r\nimport Adduser from \"./Adduser\";\r\nimport { CSSTransition, TransitionGroup } from \"react-transition-group\";\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n  Link,\r\n  NavLink,\r\n  Redirect,\r\n  useLocation\r\n} from \"react-router-dom\";\r\nimport { StartConvo } from \"./StartConvo\";\r\nimport styled from 'styled-components'\r\nimport Paths from \"./Paths\";\r\nimport Account from \"./settings/Account\";\r\nimport Personalization from \"./settings/Personalization\";\r\nimport Chatsettings from \"./Chatsettings\";\r\nimport Usersettings from \"./Usersettings\";\r\nimport { ContextApp } from \"../ContextAPI\";\r\nimport Hoverableicondiv from \"./Hoverableiconsdiv\";\r\nimport Chatviewrow from './Chatviewrow'\r\nconst Div = styled.div ` \r\n      ::selection {\r\n        background-color: ${props=>props.color};\r\n        color: white;\r\n      }\r\n`\r\nfunction Body(props) {\r\n  const location = useLocation();\r\n  const user = firebase.auth().currentUser;\r\n  const [convoinfo, setConvoinfo] = useState({\r\n    unreadmsgs: 0\r\n  });\r\n  const [convos, setConvos]=useState([])\r\n  const { darkmode, widemode, themecolor,chatcolor } = useContext(ContextApp);\r\n  const [chatuser, setChatuser] = useState(\"\");\r\n  const { handleLogout, setLoading } = props;\r\n  const [msgpersonids, setMsgpersonids] = useState([]);\r\n  const [adduser, setAdduser] = useState(false);\r\n  const [convolist, setConvolist] = useState([]);\r\n  const [userlist, setUserlist] = useState([]);\r\n  const [allusers, setAllusers] = useState([]);\r\n  const [message, setMessage] = useState(\"\");\r\n  const [recipientid, setRecipientid] = useState(\"\");\r\n  const [recipientname, setRecipientname] = useState(\"\");\r\n  const [chatview, setChatview]=useState(false)\r\n  const [chatstarted, setChatstarted]=useState(false)\r\n  const [sidebar, setSidebar]=useState(false)\r\n\r\n  const onedialogue =convolist && convolist.map((diag) => {\r\n    return (\r\n        <Route  exact path={\"/chat/\" + diag.convoinfo.convoid}>\r\n          <Dialogue diag={diag} chatuser={chatuser}/>\r\n        </Route>\r\n      );\r\n    });\r\n    const [chatopen, setChatopen]=useState(false)\r\n    const dialoguerow = convolist && convolist.map(diag=>{\r\n        if(user) {\r\n          if(chatuser===(user.uid===diag.convoinfo.creatorid?diag.convoinfo.recipientid:diag.convoinfo.creatorid)){\r\n            return ( \r\n              <Dialogue  type={'small'} chatuser={chatuser} diag={diag} icon='fal fa-times' setState={setChatstarted} />     \r\n              )\r\n           }\r\n        }\r\n    })\r\n    const usersrow = convos && convos.sort((a, b) => b.lastmsgdate - a.lastmsgdate).map(el=>{\r\n      return <div className=\"profilepic\"><Chatviewrow el={el} setChatopen={setChatopen} chatopen={chatopen} chatuser={chatuser} setChatuser={setChatuser} convoinfo={convoinfo} lnk={location.pathname.split('/').slice(1, 2)[0]} setChatstarted={setChatstarted} setChatview={setChatview} /></div>\r\n    })\r\n  const chatsettings = \r\n    convolist &&\r\n    convolist.map((diag) => {\r\n      return (\r\n        <Route path={\"/chatsettings/\" + diag.convoinfo.convoid}>\r\n          <Usersettings\r\n            chatuser={chatuser}\r\n            diag={diag}\r\n            settings={\"chat\"}\r\n            type={\"chatsettings\"}\r\n            link={{\r\n              link0: \"chatsettings/\" + diag.convoinfo.convoid,\r\n              link1: diag.convoinfo.convoid + \"/actions\",\r\n              link2: diag.convoinfo.convoid + \"/privacy\",\r\n              link3: diag.convoinfo.convoid + \"/support\"\r\n            }}\r\n            linklabel={{\r\n              link0: \"Themes\",\r\n              link1: \"Actions\",\r\n              link2: \"Privacy\",\r\n              link3: \"About\"\r\n            }}\r\n            \r\n          />\r\n        </Route>\r\n      );\r\n    });\r\n  const userprofile =\r\n    convolist &&\r\n    convolist.map((diag) => {\r\n      return (\r\n        <Route exact path={\"/chat/\" + diag.convoinfo.convoid}>\r\n          <Userprofile diag={diag} chatuser={chatuser} />\r\n        </Route>\r\n      );\r\n    });\r\n    const imageRegexB = /(?:https?|ftp):\\/\\/[\\S]*\\.(?:png|jpe?g|gif|svg|webp)/g;\r\n    const photo = true\r\n  function sendMessage() {\r\n if (message.length) {\r\n      setAdduser(!adduser);\r\n      let convoid = db.collection(\"conversations\").doc().id;\r\n      StartConvo(recipientid, message, convoid, recipientname);\r\n    }\r\n  }\r\n  function chatFuncDisplay(){\r\n    setChatstarted(false)\r\n    setTimeout(()=>{\r\n      setChatview(false); \r\n    },400)\r\n  }\r\n  function updateProfile(){\r\n    db.collection('users').doc(user.uid).update({\r\n        customization: {\r\n          widemode: !widemode,\r\n          darkmode,\r\n          color: chatcolor,\r\n          themecolor\r\n        }\r\n    })\r\n}\r\n\r\n  useEffect(()=>{\r\n    db.collection('users').doc(user.uid).onSnapshot(user=>{\r\n      const userlist = user.data()\r\n      setUserlist(userlist)\r\n      db.collection('conversations').onSnapshot(snap=>{\r\n        let convos = []\r\n         snap.forEach(doc=>{\r\n           if(userlist.msgids.includes(doc.id)){\r\n             convos.push(doc.data())\r\n           }\r\n         })\r\n         setConvos(convos)\r\n      })\r\n    })\r\n   },[])\r\n  useEffect(() => {\r\n    if(user){\r\n      db.collection(\"users\")\r\n      .doc(user.uid)\r\n      .onSnapshot((user) => {\r\n        const userlist = user.data();\r\n        setMsgpersonids(userlist.msgpersonids);\r\n        setUserlist(userlist);\r\n        db.collection(\"conversations\").onSnapshot((snap) => {\r\n          let convos = [];\r\n          snap.forEach((doc) => {\r\n            if (userlist.msgids.includes(doc.id)) convos.push(doc.data());\r\n          });\r\n          setConvolist(convos);\r\n        });\r\n      });\r\n    db.collection(\"users\")\r\n   \r\n      .onSnapshot((snap) => {\r\n        const users = [];\r\n        snap.forEach((el) => {\r\n          users.push(el.data());\r\n        });\r\n        setAllusers(users);\r\n      });\r\n      db.collection('users').doc(user.uid).onSnapshot(snap=>{\r\n        const user = snap.data()\r\n        document.documentElement.style.setProperty(\r\n          '--theme-color', user.customization.themecolor\r\n        )\r\n        document.documentElement.style.setProperty(\r\n          '--chat-color', user.customization.color\r\n        )\r\n      })\r\n\r\n    }\r\n    setLoading(false);\r\n  }, []);\r\n  function deleteAccount(){\r\n    var user = firebase.auth().currentUser;\r\n    user.delete().then(()=>{\r\n      db.collection('users').doc(user.uid).delete()\r\n    }).catch(err=>{\r\n\r\n    })\r\n  }\r\n  return (\r\n    <Div\r\n    color={themecolor}  \r\n    className={widemode ? \"body widebody\" : \"body\"}\r\n      style={{ backgroundColor: themecolor }}\r\n    >\r\n      <div className='sidebar'\r\n      >\r\n        <Sidebar updateProfile={updateProfile} chatFuncDisplay={chatFuncDisplay} setChatview={setChatview} setChatstarted={setChatstarted} handleLogout={handleLogout} />\r\n      </div>\r\n      <Switch>\r\n        <Paths\r\n          handleLogout={handleLogout}\r\n          chatsettings={chatsettings}\r\n          chatuser={chatuser}\r\n          setChatuser={setChatuser}\r\n          userprofile={userprofile}\r\n          onedialogue={onedialogue}\r\n          convoinfo={convoinfo}\r\n          setConvoinfo={setConvoinfo}\r\n          adduser={adduser}\r\n          setAdduser={() => setAdduser(!adduser)}\r\n        />\r\n      </Switch>\r\n     \r\n        {location.pathname.slice(0, 5)==='/chat'?<div className='chattab'></div>:<><Hoverableicondiv  classNames={\"chatdiv flex bs\"} icon={\"comment\"} state={chatview} setState={setChatview}/></>}\r\n\r\n        <CSSTransition in={chatview} timeout={300} unmountOnExit classNames='chatusers'>\r\n      <div className=\"chatusers bs\">\r\n        <h2>Chat</h2>\r\n        <div className=\"users flexrow\">\r\n          <i className=\"fal fa-times\" onClick={()=>setChatview(false)} style={{color: 'var(--theme-color)', position: 'absolute', top: '15px',right: '20px'}}></i>\r\n                {usersrow}\r\n              </div>\r\n        </div>\r\n      </CSSTransition>\r\n      <CSSTransition \r\n      in={chatstarted}\r\n      classNames='chatview'\r\n      unmountOnExit \r\n      timeout={300}\r\n      >\r\n        <div className='chatview bs' style={{right: chatview?'330px':'50px'}}>\r\n            <div className=\"\">\r\n              <div className=\"dialogue\">\r\n                {dialoguerow}\r\n              </div>\r\n            </div>\r\n        </div>\r\n      </CSSTransition>\r\n      <CSSTransition\r\n        in={adduser}\r\n        classNames={\"adduser\"}\r\n        unmountOnExit\r\n        timeout={300}\r\n      >\r\n        <Adduser\r\n          setRecipientname={setRecipientname}\r\n          message={message}\r\n          msgpersonids={msgpersonids}\r\n          sendMessage={sendMessage}\r\n          setMessage={setMessage}\r\n          setRecipientid={setRecipientid}\r\n          allusers={allusers}\r\n          setAdduser={setAdduser}\r\n          recipientid={recipientid}\r\n          adduser={adduser}\r\n        />\r\n      </CSSTransition>\r\n      \r\n    </Div>\r\n  );\r\n}\r\nexport default Body;\r\n","import { db } from \"../Fire\";\r\nimport firebase from \"firebase\";\r\n\r\nexport function StartConvo(recipientid, message, convoid, recipientname) {\r\n  const user = firebase.auth().currentUser;\r\n  const date = firebase.firestore.FieldValue.serverTimestamp()\r\n  let convoinfo = {\r\n    convoid,\r\n    creatorid: user.uid,\r\n    creatorname: user.displayName,\r\n    recipientid,\r\n    recipientname,\r\n    typerid: user.uid,\r\n    userref: db.collection(\"users\").doc(recipientid)\r\n    // usertyping: false,\r\n  };\r\n  let customizedconvo = {\r\n    theme: \"https://i.imgur.com/4hzNTTq.png\",\r\n    emoji: \"🤗\"\r\n  };\r\n  let nicknames = {\r\n    nickname1: \"\",\r\n    nickname2: \"\"\r\n  };\r\n  let messages = {\r\n    message,\r\n    reaction1: \"\",\r\n    reaction2: \"\",\r\n    msgdate: firebase.firestore.Timestamp.now(),\r\n    msgid: db.collection(\"conversations\").doc().id,\r\n    read: false,\r\n    senderid: user.uid,\r\n    sendername: user.displayName,\r\n    editing: false\r\n  };\r\n  let notificationobj = {\r\n    notifimsg: message,\r\n    notifidate: firebase.firestore.Timestamp.now(),\r\n    read: false,\r\n    sender: user.displayName,\r\n    id: convoid,\r\n    senderid: user.uid,\r\n    notifiid: db.collection('users').doc().id\r\n  }      \r\n    db.collection('notifications').doc(recipientid).update({\r\n      notifications: firebase.firestore.FieldValue.arrayUnion(notificationobj)\r\n    })\r\n  db.collection(\"users\")\r\n    .doc(user.uid)\r\n    .update({\r\n      msgids: firebase.firestore.FieldValue.arrayUnion(convoid),\r\n      msgpersonids: firebase.firestore.FieldValue.arrayUnion(recipientid)\r\n    });\r\n  db.collection(\"users\")\r\n    .doc(recipientid)\r\n    .update({\r\n      msgids: firebase.firestore.FieldValue.arrayUnion(convoid),\r\n      msgpersonids: firebase.firestore.FieldValue.arrayUnion(user.uid)\r\n    });\r\n  db.collection(\"conversations\")\r\n    .doc(convoid)\r\n    .set({\r\n      lastmsgdate : date,\r\n      convoinfo,\r\n      messages: firebase.firestore.FieldValue.arrayUnion(messages),\r\n      customizedconvo,\r\n      nickname1: '',\r\n      notifications1: true,\r\n      nickname2: '',\r\n      notifications2: true,\r\n    });\r\n}\r\n","import React, {useState, useEffect} from \"react\";\nimport \"./styles.css\";\nimport {db, Fire} from './Fire'\nimport firebase from 'firebase'\nimport { BrowserRouter as Router,Switch,Route,Link,NavLink, Redirect } from \"react-router-dom\" \nimport Sidebar from './components/Sidebar'\nimport Login from './components/Login'\nimport Body from './components/Body'\nimport ContextAppProvider from './ContextAPI'\nimport { useBeforeunload } from 'react-beforeunload'\nfunction App() {\n  const [update, setUpdate]=useState(0)\n  const [user, setUser]=useState('')\n  const [name, setName]=useState('')\n  const [email, setEmail]=useState('')\n  const [password, setPassword]=useState('')\n  const [emailError, setEmailError]=useState('')\n  const [passwordError, setPasswordError]=useState('')\n  const [hasAccount, setHasAccount]=useState(false)\n  const [lname, setlName]=useState('')\n  const [userinfo, setUserinfo]=useState([])\n  const [users, setUsers]=useState([])\n  const [cover, setCover]=useState('https://www.gettyimages.ca/gi-resources/images/500px/983794168.jpg')\n  const [forgotpassword, setForgotpassword]=useState(false)\n  const [msgids, setMsgIds] = useState([''])\n  const [loading, setLoading]=useState(false)\n  const clearInputs = () => {\n    setEmail('')\n    setPassword('')\n  }\n  const clearErrors = () => {\n    setEmailError('')\n    setPasswordError('')\n  }\n  const handleLogin = () => {\n   \n    clearErrors()\n    firebase.auth().signInWithEmailAndPassword(email, password)\n    .then(()=>{setLoading(true)})\n    .catch(err => {\n      switch(err.code) {\n        case \"auth/invalid-email\":\n          setEmailError(err.message)\n          break\n        case \"auth/user/disabled\":\n        case \"auth/user-not-found\":\n          setEmailError('Email does not exist')\n        break\n        case \"auth/wrong-password\":\n          setPasswordError('Incorrect Password')\n        break\n        default:\n      }  \n    })\n\n  } \n  const handleSignup = () => {\n    console.log('signup')\n    clearErrors()\n    firebase.auth().createUserWithEmailAndPassword(email, password).catch(err => {\n        \n        switch(err.code) {\n        case \"auth/email-already-in-use\":\n          setEmailError(err.message)\n          break\n        case \"auth/invalid-email\":\n          setEmailError(err.message)\n        break\n        case \"auth/weak-password\":\n          setPasswordError(err.message)\n        break\n        default: \n        setEmailError('Invalid')\n      }\n    })\n    firebase.auth().onAuthStateChanged(user => {\n      if(user) {\n          user.updateProfile({\n            displayName: name,\n          }) \n          db.collection('users').doc(user.uid).set({\n              created: new Date(), \n              msgids,\n              uid: firebase.auth().currentUser.uid,\n              online: true, \n              userinfo: {\n                name,\n                cover,\n                age: '', \n                phone: '', \n                city: '',\n                country: '',\n                website: 'https://',\n                job: '',\n                email,\n              },\n              customization: {\n                color: '#10325c',\n                themecolor: '#0f6ce6',\n                darkmode: false,\n                widemode: false,\n              }\n          })\n          db.collection('notifications').doc(user.uid).set({\n            notifications: []\n          })\n   \n      }//if (user)\n      else {\n        setUser('')\n      } \n    }) \n  }\n  const handleLogout = () => {\n    if(user) {\n      db.collection('users').doc(user.uid).update({online: false})\n    }\n    window.location.reload()\n    firebase.auth().signOut()\n  }\n  const authListener = () => {\n    firebase.auth().onAuthStateChanged(user => {\n      if(user) {\n        clearInputs()\n        setUser(user)\n        db.collection('users').doc(user.uid).update({online: true})\n      }\n      else {\n\n          setUser('')\n          db.collection('users').doc(user.uid).update({online: false})\n      }\n    })\n  } \n  \n  function loginwithGoogle(){\n    var provider = new firebase.auth.GoogleAuthProvider();\n    provider.addScope('email');\n\n    firebase.auth()\n    .signInWithPopup(provider)\n    .then((result) => {\n      if(result.additionalUserInfo.isNewUser){\n            /** @type {firebase.auth.OAuthCredential} */\n      var credential = result.credential;\n  \n      // This gives you a Google Access Token. You can use it to access the Google API.\n      var token = credential.accessToken;\n      // The signed-in user info.\n      var user = result.user;\n      // ...\n      db.collection('users').doc(user.uid).set({\n        created: new Date(), \n        msgids,\n        uid: user.uid,\n        online: true, \n        userinfo: {\n          name: user.displayName,\n          cover: user.photoURL,\n          age: '', \n          phone: user.phoneNumber, \n          city:'',\n          country: '',\n          website: 'https://',\n          job: '',\n          email: user.email\n        },\n        customization: {\n          color: '#10325c',\n          themecolor: '#0f6ce6',\n          darkmode: false,\n          widemode: false,\n        }\n    })\n    db.collection('notifications').doc(user.uid).set({\n      notifications: []\n    })\n      }\n\n    }).catch((error) => {\n      // Handle Errors here.\n      var errorCode = error.code;\n      var errorMessage = error.message;\n      // The email of the user's account used.\n      var email = error.email;\n      // The firebase.auth.AuthCredential type that was used.\n      var credential = error.credential;\n      // ...\n      setEmailError(error.message)\n      setTimeout(()=>{\n        setEmailError('')\n      },3000)\n    });\n  }\n  function loginwithYahoo(){\n    var provider = new firebase.auth.OAuthProvider('yahoo.com');\n    provider.addScope(\"email\");\n\n    firebase.auth().signInWithPopup(provider)\n    .then((result) => {\n      // IdP data available in result.additionalUserInfo.profile\n      // ...\n      console.log(result.additionalUserInfo.profile)\n      /** @type {firebase.auth.OAuthCredential} */\n      const credential = result.credential;\n      const yahooresult = result.user\n      // Yahoo OAuth access token and ID token can be retrieved by calling:\n      var accessToken = credential.accessToken;\n      var idToken = credential.idToken;\n      if(result.additionalUserInfo.isNewUser){\n        db.collection('users').doc(yahooresult.uid).set({\n          created: new Date(), \n          msgids,\n          uid: yahooresult.uid,\n          online: true, \n          userinfo: {\n            name: yahooresult.displayName,\n            cover: yahooresult.photoURL,\n            age: '', \n            phone: yahooresult.phoneNumber, \n            city:'',\n            country: '',\n            website: 'https://',\n            job: '',\n            email: yahooresult.email\n          },\n          customization: {\n            color: '#10325c',\n            themecolor: '#0f6ce6',\n            darkmode: false,\n            widemode: false,\n          }\n      })\n      db.collection('notifications').doc(yahooresult.uid).set({\n        notifications: []\n      })\n      }\n    })\n    .catch((error) => {\n      setEmailError('Email already in use, possibly with another method.')\n      setTimeout(()=>{\n        setEmailError('')\n      },3000)\n    });\n  }\n  function loginwithFacebook(){\n    var provider = new firebase.auth.FacebookAuthProvider();\n    provider.addScope(\"email\");\n\n    firebase.auth()\n    .signInWithPopup(provider)\n    .then((result) => {\n      if(result.additionalUserInfo.isNewUser){\n        /** @type {firebase.auth.OAuthCredential} */\n        var credential = result.credential;\n  \n        // This gives you a Google Access Token. You can use it to access the Google API.\n        var token = credential.accessToken;\n        // The signed-in user info.\n        var usergoogle = result.user;\n        // ...\n        db.collection('users').doc(usergoogle.uid).set({\n          created: new Date(), \n          msgids,\n          uid: usergoogle.uid,\n          online: true, \n          userinfo: {\n            name: usergoogle.displayName,\n            cover: usergoogle.photoURL,\n            age: '', \n            phone: usergoogle.phoneNumber, \n            city:'',\n            country: '',\n            website: 'https://',\n            job: '',\n            email: usergoogle.email\n          },\n          customization: {\n            color: '#10325c',\n            themecolor: '#0f6ce6',\n            darkmode: false,\n            widemode: false,\n          }\n      })\n      db.collection('notifications').doc(usergoogle.uid).set({\n        notifications: []\n      })\n    }\n    })\n    .catch((error) => {\n      // Handle Errors here.\n      var errorCode = error.code;\n      var errorMessage = error.message;\n      // The email of the user's account used.\n      var email = error.email;\n      // The firebase.auth.AuthCredential type that was used.\n      var credential = error.credential;\n  \n      // ...\n      setEmailError(email)\n      setTimeout(()=>{\n        setEmailError('')\n      },3000)\n      console.log(errorCode)\n    });\n  \n  }\n  useBeforeunload(() => {\n    if(user) {\n      db.collection('users').doc(user.uid).update({online: false})\n    }\n  }) \n  useEffect(() => { \n    authListener()\n    window.addEventListener('onbeforeunload', removeActiveStatus) \n    function removeActiveStatus() {\n      if(user) {\n        db.collection('users').doc(user.uid).update({online: false})\n      }\n    }\n    if(user) {\n      db.collection('users').doc(user.uid).update({online: true})\n    }\n\n  },[])  \n  // localStorage.openpages = Date.now();\n  // var onLocalStorageEvent = function(e){\n  //     if(e.key == \"openpages\"){\n  //         // Listen if anybody else is opening the same page!\n  //         localStorage.page_available = Date.now();\n  //     }\n  //     if(e.key == \"page_available\"){\n  //         alert(\"One more page already open\");\n  //     }\n  // };\n\n  // window.addEventListener('storage', onLocalStorageEvent, false);\n  return ( \n    \n        <Router >\n    <div className=\"App\">\n       {user?\n        <ContextAppProvider>\n        <>\n          <Body setLoading={setLoading}  handleLogout={handleLogout}/>\n          <Redirect to='/home'/>\n        </>\n        </ContextAppProvider>\n        :\n       <> \n          <Login loginwithYahoo={()=>loginwithYahoo}loginwithFacebook={()=>loginwithFacebook}loginwithGoogle={()=>loginwithGoogle} loading={loading} name={name} setName={setName} lname={lname} setlName={setlName}email={email} setEmail={setEmail} password= {password} setPassword={setPassword} handleLogin={handleLogin} handleSignup={handleSignup} hasAccount={hasAccount} setHasAccount={setHasAccount} emailError={emailError} passwordError={passwordError}/>       \n          <Redirect to='/'/>\n       </>\n        }\n    </div>  \n     </Router>\n\n  );\n}\n\nexport default App \n","import React, { StrictMode } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport TimeAgo from 'javascript-time-ago'\n\nimport en from 'javascript-time-ago/locale/en'\nimport ru from 'javascript-time-ago/locale/ru'\n\nimport App from \"./App\";\nTimeAgo.addDefaultLocale(en)\nTimeAgo.addLocale(en)\nconst rootElement = document.getElementById(\"root\");\nReactDOM.render(\n  <StrictMode>\n    <App />\n  </StrictMode>,\n  rootElement\n);\n"],"sourceRoot":""}
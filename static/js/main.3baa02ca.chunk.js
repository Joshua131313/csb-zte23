(this.webpackJsonpreact=this.webpackJsonpreact||[]).push([[0],{139:function(e,t,c){"use strict";c.r(t);var s=c(2),n=c.n(s),a=c(25),i=c.n(a),o=c(146),r=c(41),l=c(5),d=(c(76),c(7)),u=d.a.initializeApp({apiKey:"AIzaSyChwGy1Z1jzlrAxivYaq71r7Nlbc65u_Wo",authDomain:"chat-3943a.firebaseapp.com",projectId:"chat-3943a",storageBucket:"chat-3943a.appspot.com",messagingSenderId:"53187875245",appId:"1:53187875245:web:ed73204351ac3b9f709124",measurementId:"G-028L2BESN6"}),j=u.firestore(),b=c(10),m=c(15),f=c(0),O=Object(s.createContext)(),h=function(e){var t=d.a.auth().currentUser,c=Object(s.useState)(!1),n=Object(l.a)(c,2),a=n[0],i=n[1],o=Object(s.useState)(!1),r=Object(l.a)(o,2),u=r[0],b=r[1],m=Object(s.useState)(""),h=Object(l.a)(m,2),x=h[0],p=h[1],g=Object(s.useState)(""),v=Object(l.a)(g,2),N=v[0],y=v[1],S=Object(s.useState)(!1),w=Object(l.a)(S,2),k=w[0],C=w[1],F=Object(s.useState)({emoji:"",msg:""}),E=Object(l.a)(F,2),T=E[0],U=E[1];return t&&j.collection("users").doc(t.uid).onSnapshot((function(e){var t=e.data();i(t.customization.darkmode),b(t.customization.widemode),p(t.customization.color),y(t.customization.themecolor)})),Object(f.jsx)(O.Provider,{value:{darkmode:a,widemode:u,chatcolor:x,themecolor:N,notificont:T,notifi:k,setNotificont:U,setNotifi:C},children:e.children})};var x=function(e){var t=Object(s.useContext)(O),c=(t.darkmode,t.chatcolor,t.widemode),n=(t.themecolor,e.updateProfile),a=e.chatFuncDisplay,i=e.handleLogout,o=(e.setChatview,e.setChatstarted,Object(s.useState)("")),r=Object(l.a)(o,2),u=r[0],m=r[1],h=Object(s.useState)(""),x=Object(l.a)(h,2),p=x[0],g=x[1],v=Object(s.useState)(!0),N=Object(l.a)(v,2),y=N[0],S=N[1],w=d.a.auth().currentUser,k=Object(s.useState)(!1),C=Object(l.a)(k,2);return C[0],C[1],Object(s.useEffect)((function(){j.collection("users").doc(w.uid).onSnapshot((function(e){var t=e.data();m(t.userinfo.cover),g(t.userinfo.name),S(!1)}))}),[u]),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("div",{className:"profilepic profilepiccol",children:y?Object(f.jsx)("div",{className:"loader",children:Object(f.jsxs)("div",{class:"lds-ring",children:[Object(f.jsx)("div",{}),Object(f.jsx)("div",{}),Object(f.jsx)("div",{}),Object(f.jsx)("div",{})]})}):Object(f.jsxs)("div",{children:[Object(f.jsx)("img",{src:u,alt:""}),c?Object(f.jsx)("p",{className:"widemodeElement",children:p}):""]})}),Object(f.jsxs)("div",{className:"icons",children:[Object(f.jsx)(b.c,{activeClassName:"activelink",exact:!0,to:"/home",children:Object(f.jsxs)("span",{children:[Object(f.jsx)("i",{class:"far fa-home"}),c?Object(f.jsx)("p",{className:"widemodeElement",children:"Home"}):""]})}),Object(f.jsx)(b.c,{activeClassName:"activelink",onClick:function(){a()},to:"/chat",children:Object(f.jsxs)("span",{children:[Object(f.jsx)("i",{class:"far fa-comment-alt"}),c?Object(f.jsx)("p",{className:"widemodeElement",children:"Chat"}):""]})}),Object(f.jsx)(b.c,{activeClassName:"activelink",to:"/notifications",children:Object(f.jsxs)("span",{children:[Object(f.jsx)("i",{class:"far fa-bell"}),c?Object(f.jsx)("p",{className:"widemodeElement",children:"Notifications"}):""]})}),Object(f.jsx)(b.c,{activeClassName:"activelink",to:"/podcast",children:Object(f.jsxs)("span",{children:[Object(f.jsx)("i",{class:"fal fa-podcast"}),c?Object(f.jsx)("p",{className:"widemodeElement",children:"Podcast"}):""]})}),Object(f.jsx)(b.c,{activeClassName:"activelink",to:"/settings",children:Object(f.jsxs)("span",{children:[Object(f.jsx)("i",{class:"fal fa-cog"}),c?Object(f.jsx)("p",{className:"widemodeElement",children:"Settings"}):""]})}),Object(f.jsx)(b.c,{exact:!0,to:"/",onClick:function(){i()},children:Object(f.jsxs)("span",{children:[" ",Object(f.jsx)("i",{class:"fal fa-sign-out-alt"}),c?Object(f.jsx)("p",{className:"widemodeElement",children:"Logout"}):""]})}),Object(f.jsx)("a",{onClick:function(){n()},className:"widemodeElement",children:Object(f.jsx)("i",{class:c?"fal fa-chevron-double-right rotate":"fal fa-chevron-double-right"})})]}),c?"":Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("div",{className:"widemodeElement spac"}),Object(f.jsx)("div",{className:"widemodeElement spac"})]})]})};var p=function(e){var t=Object(s.useState)(""),c=Object(l.a)(t,2),n=c[0],a=c[1];return Object(f.jsx)("div",{className:"forgotpassword",children:Object(f.jsxs)("div",{className:"login",children:[Object(f.jsx)("div",{className:"spacer1"}),Object(f.jsxs)("div",{className:"title",children:[Object(f.jsx)("i",{class:"fa-unlock fad"}),Object(f.jsx)("h1",{children:"Forgot Password"})]}),Object(f.jsx)("div",{className:"spacer1"}),Object(f.jsxs)("div",{className:"logincontainer",children:[Object(f.jsxs)("form",{onSubmit:function(e){return e.preventDefault()},children:[Object(f.jsxs)("label",{children:[Object(f.jsx)("span",{children:"Email"}),Object(f.jsx)("input",{type:"text",placeholder:"example@mail.com",onChange:function(e){return a(e.target.value)}})]}),Object(f.jsx)("button",{className:"themeBtn",onClick:function(){""!==n?d.a.auth().sendPasswordResetEmail(n).then((function(){window.alert("email has been sent")})).catch((function(e){e.code;var t=e.message;window.alert(t)})):window.alert("Please input an email")},children:"Send email"})]}),Object(f.jsx)(b.b,{to:"/",className:"forgotPasswordButton",children:"Return to login page"})]})]})})};c(85),c(88),c(89);var g=function(e){var t=e.loginwithYahoo,c=e.loginwithFacebook,s=e.loginwithGoogle,n=(e.setlName,e.lname,e.name,e.setName),a=e.email,i=e.setEmail,o=e.password,r=e.setPassword,l=e.handleLogin,d=e.handleSignup,u=e.hasAccount,j=e.setHasAccount,O=e.emailError,h=e.passwordError;return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(m.b,{exact:!0,path:"/",children:Object(f.jsxs)("div",{className:"login",children:[Object(f.jsxs)("div",{className:"title",children:[Object(f.jsx)("i",{class:"fal fa-comments"}),Object(f.jsx)("h1",{children:u?"Log In":"Register"})]}),Object(f.jsx)("div",{className:"spacer1"}),Object(f.jsx)("div",{className:"logincontainer",children:Object(f.jsxs)("form",{onSubmit:function(e){return e.preventDefault()},children:[Object(f.jsxs)("label",{style:{display:u?"none":"flex"},children:[Object(f.jsx)("span",{children:"Name"}),Object(f.jsx)("input",{type:"text",placeholder:"John Doe",onChange:function(e){return n(e.target.value)}})]}),Object(f.jsxs)("label",{children:[Object(f.jsx)("span",{children:"Email"}),Object(f.jsx)("input",{type:"text",value:a,placeholder:"store@mail.com",onChange:function(e){return i(e.target.value)}}),Object(f.jsx)("p",{className:"errormsgLogin",children:O})]}),Object(f.jsxs)("label",{children:[Object(f.jsx)("span",{children:"Password"}),Object(f.jsx)("input",{type:"password",placeholder:"password",value:o,onChange:function(e){return r(e.target.value)}}),Object(f.jsx)("p",{className:"errormsgLogin",children:h})]}),u?Object(f.jsxs)("div",{className:"btnContainer",children:[Object(f.jsx)("button",{className:"themeBtn",onClick:l,children:e.loading?Object(f.jsxs)("div",{class:"lds-ring",children:[Object(f.jsx)("div",{}),Object(f.jsx)("div",{}),Object(f.jsx)("div",{}),Object(f.jsx)("div",{})]}):"Log in"}),Object(f.jsxs)("div",{className:"flex",style:{textAlign:"center"},children:[Object(f.jsx)(b.b,{exact:!0,to:"/forgotpassword",className:"forgotPasswordButton",children:"Forgot your password?"}),Object(f.jsxs)("small",{children:["Don't have an account",Object(f.jsx)("span",{onClick:function(){return j(!u)},style:{cursor:"pointer"},children:"? Register"})]})]})]}):Object(f.jsxs)("div",{className:"btnContainer",children:[Object(f.jsx)("button",{className:"themeBtn",style:{marginBottom:"10px"},onClick:d,children:"Register"}),Object(f.jsx)("div",{className:"flexrow",children:Object(f.jsxs)("small",{children:["Already have an account",Object(f.jsx)("span",{onClick:function(){return j(!u)},style:{cursor:"pointer"},children:"? Sign in"})]})})]}),Object(f.jsxs)("div",{className:"flexrow",children:[Object(f.jsxs)("button",{className:"login-btn gog-btn",onClick:s(),children:[" ",Object(f.jsx)("i",{class:"fab fa-google"})]}),Object(f.jsx)("button",{className:"login-btn fb-btn",onClick:c(),children:Object(f.jsx)("i",{className:"fab fa-facebook"})}),Object(f.jsx)("button",{className:"login-btn yah-btn",onClick:t(),children:Object(f.jsx)("i",{class:"fab fa-yahoo"})})]})]})})]})}),Object(f.jsx)(m.b,{exact:!0,path:"/forgotpassword",children:Object(f.jsx)(p,{})})]})},v=c(20);var N=function(e){e.convoinfo,e.setConvoinfo;var t=e.el,c=e.setChatuser,n=e.chatuser,a=Object(s.useState)(""),i=Object(l.a)(a,2),o=i[0],r=i[1],u=Object(s.useState)(""),m=Object(l.a)(u,2),O=m[0],h=m[1],x=Object(s.useState)(""),p=Object(l.a)(x,2),g=p[0],v=p[1],N=Object(s.useState)(!1),y=Object(l.a)(N,2),S=(y[0],y[1]),w=Object(s.useState)(""),k=Object(l.a)(w,2),C=k[0],F=k[1],E=Object(s.useState)(!0),T=Object(l.a)(E,2),U=T[0],A=T[1],L=Object(s.useState)(""),I=Object(l.a)(L,2),R=I[0],z=I[1],P=/((?:(?!(?:https?|ftp):\/\/[\S]*\.(?:png|jpe?g|gif|svg|webp)).)+)|((?:https?|ftp):\/\/[\S]*\.(?:png|jpe?g|gif|svg|webp)(?:\?\S+=\S*(?:&\S+=\S*)*)?)/gm,D=d.a.auth().currentUser;function M(e){if(void 0!==e.message)return e.base64?"<span style='font-size: 0px; position: absolute'>".concat(e.message,'</span><img src="').concat(e.message,'"/>'):e.file?"Sent a File":e.audio?"Sent a recording":e.message.match(/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/)&&RegExp.$1?"Sent a Video":e.message.replace(P,(function(e,t,c){return t?"<p>".concat(t.trim(),"</p>"):'<img src="'.concat(c,'" />')}))}return Object(s.useEffect)((function(){j.collection("users").doc(t.convoinfo.recipientid).onSnapshot((function(e){var t=e.data();h(t.userinfo.name),r(t.userinfo.cover),S(t.userinfo.online),A(!1)})),j.collection("users").doc(t.convoinfo.creatorid).onSnapshot((function(e){var t=e.data();v(t.userinfo.name),F(t.userinfo.cover),A(!1)})),j.collection("conversations").doc(t.convoinfo.convoid).onSnapshot((function(e){var t=e.data();z(t.messages[t.messages.length-1])}))}),[t.convoinfo.recipientid,t,n]),Object(f.jsx)(f.Fragment,{children:Object(f.jsx)(b.c,{activeClassName:"activelink",to:"/chat/"+t.convoinfo.convoid,onClick:function(){c(t.convoinfo.creatorid===D.uid?t.convoinfo.recipientid:t.convoinfo.creatorid)},children:Object(f.jsxs)("div",{className:"user",children:[Object(f.jsx)("div",{className:"profilepic",children:U?Object(f.jsxs)("div",{class:"lds-ring",children:[Object(f.jsx)("div",{}),Object(f.jsx)("div",{}),Object(f.jsx)("div",{}),Object(f.jsx)("div",{})]}):Object(f.jsx)("img",{src:t.convoinfo.creatorid===D.uid?o:C,alt:""})}),Object(f.jsxs)("div",{className:"info flex",children:[Object(f.jsx)("p",{className:"username",children:t.convoinfo.creatorid===D.uid?O.length>15?O.slice(0,15)+"...":O:g.length>15?g.slice(0,15)+"...":g}),Object(f.jsx)("small",{dangerouslySetInnerHTML:{__html:function(e){if(e)return e.senderid===D.uid?"<p>You:</p> ".concat(M(e)):M(e)}(R)}})]})]})})})};var y=function(e){var t=Object(s.useContext)(O).themecolor,c=Object(s.useState)(""),n=Object(l.a)(c,2),a=n[0],i=(n[1],new RegExp("\\b"+a.replace(/[\W_]+/g,""),"i"),e.convoinfo),o=e.setConvoinfo,r=e.setChatuser,u=e.chatuser,b=Object(s.useState)([]),m=Object(l.a)(b,2),h=(m[0],m[1]),x=Object(s.useState)([]),p=Object(l.a)(x,2),g=p[0],v=p[1],y=(j.collection("users").doc().id,d.a.auth().currentUser),S=g&&g.sort((function(e,t){return t.lastmsgdate-e.lastmsgdate})).map((function(e){return y?Object(f.jsx)(N,{chatuser:u,setChatuser:r,el:e,convoinfo:i,setConvoinfo:o}):null}));return Object(s.useEffect)((function(){j.collection("users").doc(y.uid).onSnapshot((function(e){var t=e.data();h(t),j.collection("conversations").onSnapshot((function(e){var c=[];e.forEach((function(e){t.msgids.includes(e.id)&&c.push(e.data())})),v(c)}))}))}),[]),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("h2",{children:"Chats"}),Object(f.jsxs)("div",{className:"search abs",children:[Object(f.jsx)("i",{class:"far fa-plus",style:{color:t},onClick:function(){return e.setAdduser()}}),Object(f.jsx)("input",{type:"text",placeholder:"Search",onFocus:function(){return e.setAdduser()}})]}),Object(f.jsx)("div",{className:"users",children:S})]})},S=c(148);var w=function(e){Object(s.useContext)(O).themecolor;var t=e.icon,c=e.classNames,n=e.text,a=e.functionOne;return Object(f.jsxs)("div",{className:"".concat(c," white"),onClick:a,children:[Object(f.jsx)("i",{className:"whiteel fad fa-"+t}),Object(f.jsx)("p",{className:"white",children:n})]})};var k=function(e){var t=d.a.auth().currentUser,c=e.themebool,n=e.emojibool,a=e.type,i=(e.setUpdatedMsg,e.copy,e.convoid),o=e.contextmenu,r=e.setContextmenu,u=e.contextstyle,b=e.msgid,h=Object(s.useState)(!1),x=Object(l.a)(h,2),p=(x[0],x[1],Object(s.useState)(!1)),g=Object(l.a)(p,2),v=g[0],N=g[1],y=Object(s.useState)([]),k=Object(l.a)(y,2),C=k[0],F=k[1],E=Object(s.useRef)(),T=(Object(m.h)(),Object(m.g)());function U(e){"fad fa-".concat(e);C&&C.map((function(c){if(b===c.msgid){var s=C.indexOf(c);c.senderid===t.uid?(C[s].reaction1="fad fa-".concat(e),j.collection("conversations").doc(i).update({messages:C})):(C[s].reaction2="fad fa-".concat(e),j.collection("conversations").doc(i).update({messages:C}))}})),r(!1)}Object(s.useContext)(O).themecolor;var A=["smile","angry","sad-cry","surprise"].map((function(e){return Object(f.jsxs)("div",{onClick:function(){return U(e)},children:[" ",Object(f.jsx)("i",{className:"fad fa-"+("cry"===e?"sad-cry":e)}),"  "]})})),L=[{class:"surprise yellow",msg:"Surprised"},{class:"tired blue",msg:"Tired"},{class:"smile-wink yellow",msg:"Wink"},{class:"kiss-beam red",msg:"Love"},{class:"grin-stars yellow",msg:"Stars"},{class:"grin-squint-tears yellow",msg:"Laugh"},{class:"grimace yellow",msg:"Grimace"},{class:"frown red",msg:"Frown"},{class:"heart red",msg:"Like"}].map((function(e){return Object(f.jsxs)("div",{onClick:function(){return U(e.class)},children:[Object(f.jsx)("i",{className:"heart red"===e.class?"fas fa-"+e.class:"fad fa-"+e.class}),Object(f.jsx)("p",{children:e.msg})]})}));return document.addEventListener("click",(function(e){e.target!==E.current&&r(!1)})),Object(s.useEffect)((function(){"msg"===a&&j.collection("conversations").doc(i).onSnapshot((function(e){F(e.data().messages)}))}),[i]),Object(f.jsx)(f.Fragment,{children:"msg"===a?Object(f.jsxs)("div",{ref:E,onContextMenu:function(e){return e.preventDefault()},className:"contextmenu bs",style:{display:o?"flex":"none",left:u.left+"px",top:u.top+"px"},children:[Object(f.jsx)("div",{className:"emojis",children:A}),Object(f.jsxs)("div",{className:"option laugh",onMouseOver:function(){return N(!0)},onMouseLeave:function(){return N(!1)},children:[Object(f.jsx)("i",{className:"fad fa-laugh"})," ",Object(f.jsx)("p",{children:"Reaction"}),Object(f.jsx)(S.a,{in:v,timeout:200,classNames:"drophover",unmountOnExit:!0,children:Object(f.jsx)("div",{className:"dropmenu bs",children:L})})]}),Object(f.jsxs)("div",{className:"option copy",onClick:function(){return function(e){var t=document.createRange(),c=document.querySelector("#".concat(e," .msg"));t.selectNode(c),window.getSelection().removeAllRanges(),window.getSelection().addRange(t),document.execCommand("copy"),window.getSelection().removeAllRanges(),r(!1)}(b)},children:[Object(f.jsx)("i",{className:"fal fa-copy"})," ",Object(f.jsx)("p",{children:"Copy"})]}),Object(f.jsxs)("div",{className:"option delete",onClick:function(){return C&&C.map((function(e){if(b===e.msgid&&e.senderid===t.uid){var c=C.indexOf(e);C.splice(c,1),j.collection("conversations").doc(i).update({messages:C})}})),void r(!1)},children:[Object(f.jsx)("i",{className:"fal fa-trash"})," ",Object(f.jsx)("p",{children:"Delete"})]})]}):"settings"===a?Object(f.jsxs)("div",{ref:E,onContextMenu:function(e){return e.preventDefault()},className:"contextmenu bs",style:{display:o?"flex":"none",left:u.left+"px",top:u.top+"px"},children:[!0===n||!0===c||"settings"===a?"":Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(w,{classNames:"option",functionOne:function(){return e.setThemebool(!0)},icon:"adjust",text:"Theme"}),Object(f.jsx)(w,{classNames:"option",functionOne:function(){return e.setEmojibool(!0)},icon:e.emojitype,text:"Emoji"})]}),Object(f.jsx)(w,{classNames:"option",functionOne:function(){return window.location.reload()},icon:"sync",text:"Reload"}),Object(f.jsx)(w,{classNames:"option",functionOne:function(){return T.goForward()},icon:"long-arrow-alt-right",text:"Forward"}),Object(f.jsx)(w,{classNames:"option",functionOne:function(){return T.goBack()},icon:"undo",text:"Previous"})]}):""})};c(90),c(92);var C,F=c(17),E=(c(45),c(33)),T=F.a.i(C||(C=Object(v.a)(["\ncolor: ",";\nbackground-color: white;\n&:hover {\n  color: white;\n  background-color:  ",";\n}\n"])),(function(e){return e.color}),(function(e){return e.color}));var U,A,L,I,R=function(e){var t=d.a.auth().currentUser,n=e.convoid,a=e.progressbar,i=e.progresswidth,o=Object(s.useContext)(O).themecolor,r=Object(s.useState)(null),u=Object(l.a)(r,2),b=u[0],m=u[1],h=Object(s.useState)("blob:https://5guz4.csb.app/2ff8746b-44d6-4c3f-b531-480291e7aa84"),x=Object(l.a)(h,2),p=(x[0],x[1],Object(s.useState)(0)),g=Object(l.a)(p,2),v=(g[0],g[1],Object(s.useState)(!1)),N=Object(l.a)(v,2),y=N[0],S=N[1],w=Object(s.useState)(!1),k=Object(l.a)(w,2),C=k[0],F=k[1],U=j.collection("conversations").doc().id;function A(){m(E.a.STOP)}var L=Object(s.useState)(0),I=Object(l.a)(L,2),R=I[0],z=I[1],P=Object(s.useState)(),D=Object(l.a)(P,2),M=D[0],V=D[1];function B(){m(E.a.START),S(!0),V(setInterval((function(){z((function(e){return e+1}))}),1e3))}return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(E.b,{state:b,onStop:function(e){if(C)F(!1);else{c(45),d.a.storage().ref("".concat(n,"/recording.mp3"));var s=new FileReader;s.readAsDataURL(e.blob),s.onloadend=function(){var e,c,o,r=s.result;(e=r,c="recording.wav",o="audio/wav",fetch(e).then((function(e){return e.arrayBuffer()})).then((function(e){return new File([e],c,{type:o})}))).then((function(e){var c=d.a.storage().ref("".concat(n,"/").concat(U,".wav"));c.put(e).on("state_changes",(function(e){a.current.style.display="flex";var t=e.bytesTransferred/e.totalBytes*100;i.current.style.height="".concat(t,"%")}),(function(e){}),(function(){var e={message:"https://firebasestorage.googleapis.com/v0/b/".concat(c.bucket,"/o/").concat(n,"%2F").concat(U,".wav?alt=media"),reaction:"",msgdate:d.a.firestore.Timestamp.now(),msgid:j.collection("conversations").doc().id,read:!1,senderid:t.uid,editing:!1,nobackground:!0,emoji:!0,base64:!1,audio:!0};j.collection("conversations").doc(n).update({messages:d.a.firestore.FieldValue.arrayUnion(e)}),a.current.style.display="none"}))}))}}}}),y?Object(f.jsxs)("div",{class:"spinner-wave",onClick:function(){z(0),A(),S(!1),clearInterval(M)},children:[Object(f.jsx)("div",{}),Object(f.jsx)("div",{}),Object(f.jsx)("div",{}),Object(f.jsx)("div",{}),Object(f.jsx)("div",{}),Object(f.jsx)("span",{className:"time",children:R}),Object(f.jsx)(T,{color:o,className:"left fal fa-times-circle",onClick:function(){return F(!0),void A()}})]}):Object(f.jsx)(T,{color:o,className:"icondiv fal fa-microphone",onClick:function(){B()}})]})},z=F.a.button(U||(U=Object(v.a)(["\n&:hover {\n  background-color: ","\n}\n"])),(function(e){return e.color})),P=F.a.i(A||(A=Object(v.a)(["\ncolor: ",";\n\n"])),(function(e){return e.color})),D=F.a.i(L||(L=Object(v.a)(["\ncolor: ",";\nz-index: 10;\nbackground-color: white;\n&:hover {\n  color: white;\n  background-color:  ",";\n}\n"])),(function(e){return e.color}),(function(e){return e.color})),M=F.a.span(I||(I=Object(v.a)(["\n&:hover {\n  background-color: ","\n}\n"])),(function(e){return e.color}));var V=function(e){var t=e.inputref,c=e.progresswidth,n=e.progressbar,a=e.convoid,i=(e.setImg,e.sendFile),o=e.special,r=e.icon,l=e.type,d=e.classNames,u=e.setState,j=e.state,m=e.lnk,h=e.setState2,x=e.handleEvent,p=Object(s.useContext)(O).themecolor;return Object(f.jsx)(f.Fragment,{children:l&&"link"===l?Object(f.jsx)(b.b,{to:m,id:"sth",onClick:function(){h(!1),setTimeout((function(){u(!1)}),400)},children:Object(f.jsx)(M,{color:p,className:"icondiv ".concat(d),children:Object(f.jsx)(P,{color:p,className:" fal fa-"+r})})}):o?Object(f.jsx)("label",{style:{zIndex:4,cursor:"pointer"},children:"microphone"===l?Object(f.jsx)(R,{convoid:a,progressbar:n,progresswidth:c}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("input",{type:l,ref:t,className:"".concat(r,"file"),style:{display:"none"},onChange:function(){return i(r)},accept:"image"===r?"image/*":"film"===r?'"video/mp4,video/x-m4v,video/*, mp4"':""}),Object(f.jsx)(D,{color:p,className:"icondiv fal fa-"+r})]})}):Object(f.jsx)(z,{color:p,className:"icondiv ".concat(d),onClick:function(){u&&u(!j),x&&x()},children:Object(f.jsx)(P,{color:p,className:" fal fa-"+r})})})};c(141);var B=function(e){var t=e.link,c=e.type;return Object(f.jsx)(f.Fragment,{children:"video"===c?Object(f.jsx)("video",{controls:!0,src:t,allowFullScreen:!0}):Object(f.jsx)("iframe",{src:t,allowFullScreen:!0})})};var q=function(e){var t=e.src,c=e.link;return Object(f.jsxs)(f.Fragment,{children:[c?Object(f.jsx)("span",{style:{fontSize:"0px",position:"absolute"},children:t}):"",Object(f.jsx)("img",{src:t})]})};var H=function(e){var t=e.link,c=e.name;return Object(f.jsxs)("a",{href:t,target:"_blank",className:"file",children:[Object(f.jsx)("i",{className:"fal fa-file",children:" "}),Object(f.jsxs)("span",{children:["Download ",c]})]})};var W,G=function(e){var t=e.src,c=Object(s.useRef)(),n=Object(s.useRef)(),a=Object(s.useRef)();Object(s.useState)(!1);var i=Object(s.useState)(""),o=Object(l.a)(i,2),r=o[0],d=o[1];return Object(f.jsxs)("div",{className:"videoContainer",children:[Object(f.jsx)("video",{onLoadedData:function(){return d(c.current.duration.toFixed(1))},onTimeUpdate:function(){return function(){var e=c.current.currentTime/c.current.duration;d((c.current.duration-c.current.currentTime).toFixed(1)),a.current.style.width=100*e+"%",c.current.ended&&(n.current.className="fal fa-play")}()},src:t,id:"video",ref:c}),Object(f.jsxs)("div",{className:"controls",children:[Object(f.jsx)("i",{className:"fal fa-play",ref:n,onClick:function(e){return function(e){c.current.paused?(c.current.play(),e.target.className="fal fa-pause"):(c.current.pause(),e.target.className="fal fa-play")}(e)}}),Object(f.jsx)("div",{className:"progressvideo",children:Object(f.jsx)("div",{className:"progress",ref:a})}),Object(f.jsx)("small",{children:function(e){return e>60?(e/60).toFixed(0)+" m":e>3600?(e/3600).toFixed(1)+" h":Math.round(e)+" s"}(r)})]})]})},_=c(38),Y=c.n(_),J=c(59),K=c(60),X=c.n(K);function Z(e){var t=e.search,c=e.setSearch,s=e.fetchData,n=e.setTitle;return Object(f.jsx)("form",{className:"gif-search flexrow",onSubmit:function(e){e.preventDefault(),n(t),s(t),c("")},children:Object(f.jsxs)("div",{className:"gifform flexrow",children:[Object(f.jsx)("button",{className:"themeBtn",children:Object(f.jsx)("i",{className:"fal fa-search"})}),Object(f.jsx)("input",{className:"inputgif",type:"text",value:t,onChange:function(e){c(e.target.value)},placeholder:"Search GIFs"})]})})}var $=F.a.button(W||(W=Object(v.a)([" \nbackground-color: ",";\nborder: solid 3px transparent;\n  &:hover {\n    background-color: white;\n    border: solid 3px ","\n  }\n"])),(function(e){return e.color}),(function(e){return e.color}));var Q=function(e){var t=Object(s.useContext)(O).themecolor,c=e.state,n=e.setState,a=e.type,i=e.text;return Object(f.jsx)($,{color:t,className:c===a?"themeBtn active":"themeBtn",onClick:function(){return n(a)},children:i})};function ee(e){var t=e.setGif,c=e.convoid,s=e.chatuser,a=e.notifibool,i=(e.chatimg,n.a.useState([])),o=Object(l.a)(i,2),r=o[0],u=o[1],b=n.a.useState("Gif"),m=Object(l.a)(b,2),O=m[0],h=m[1],x=n.a.useState(!0),p=Object(l.a)(x,2),g=p[0],v=p[1],N=n.a.useState(0),y=Object(l.a)(N,2),S=y[0],w=y[1],k=n.a.useState(10),C=Object(l.a)(k,2),F=C[0],E=(C[1],n.a.useState(0)),T=Object(l.a)(E,2),U=(T[0],T[1]),A=n.a.useState(""),L=Object(l.a)(A,2),I=L[0],R=L[1],z=n.a.useState(!1),P=Object(l.a)(z,2),D=P[0],M=P[1],V=n.a.useState(!1),B=Object(l.a)(V,2),q=B[0],H=B[1],W=n.a.useState([]),G=Object(l.a)(W,2),_=G[0],K=(G[1],d.a.firestore.FieldValue.serverTimestamp()),$=d.a.auth().currentUser,Q=function(){var e=Object(J.a)(Y.a.mark((function e(t){var c,s,n;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c="https://api.giphy.com/v1/gifs/search?q=".concat(t,"&api_key=nn7ZohI4KJCwSXdYVpViEi7RkUmJacV3&limit=").concat(F,"&offset=").concat(S),e.prev=1,e.next=4,X()(c);case 4:return s=e.sent,e.next=7,s;case 7:200===(n=e.sent).status&&(u(n.data.data),U(n.data.pagination.total_count),v(!1),te(),D&&(M(!1),w(0)),H(!1)),e.next=15;break;case 11:if(e.prev=11,e.t0=e.catch(1),!e.t0){e.next=15;break}throw e.t0;case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();n.a.useEffect((function(){D||Q(O)}),[S]);var ee=function(){window.scrollTo({top:0,left:0,behavior:"smooth"})};var te=function(){switch(!0){case g:return Object(f.jsx)("div",{children:"Loading..."});case r.length>0:return r.map((function(e){return Object(f.jsx)("div",{className:"gif-card",children:Object(f.jsx)("img",{className:"image",onClick:function(){return function(e){var t={message:e,reaction1:"",reaction2:"",msgdate:d.a.firestore.Timestamp.now(),msgid:j.collection("conversations").doc().id,read:!1,senderid:$.uid,editing:!1,nobackground:!0,emoji:!0,base64:!0};j.collection("conversations").doc(c).update({lastmsgdate:K,messages:d.a.firestore.FieldValue.arrayUnion(t)});var n={notifimsg:e,notifidate:d.a.firestore.Timestamp.now(),read:!1,sender:$.displayName,gif:!0,id:c,senderid:$.uid,notifiid:j.collection("users").doc().id};a&&j.collection("notifications").doc(s).update({notifications:d.a.firestore.FieldValue.arrayUnion(n)})}(e.images.fixed_height.url)},src:e.images.fixed_width.url,alt:"gif"})},e.id)}));default:return r}};return Object(f.jsxs)("div",{className:"gif bs",children:[Object(f.jsxs)("header",{children:[Object(f.jsx)("i",{className:"fal fa-times",onClick:function(){return t(!1)}}),Object(f.jsx)("h2",{children:"Search GIFs"}),Object(f.jsx)(Z,{search:I,setSearch:R,fetchData:Q,setTitle:h})]}),Object(f.jsxs)("div",{className:"gif-wrap",children:[q?Object(f.jsx)("div",{className:"gif-trend-search",children:Object(f.jsx)("ul",{children:_.map((function(e,t){return Object(f.jsxs)("li",{children:[Object(f.jsx)("strong",{children:t+1})," ",e.toUpperCase()]},t)}))})}):"",te()]}),Object(f.jsxs)("div",{className:"flexrow np-btn",children:[Object(f.jsx)("button",{className:"themeBtn flex",s:!0,onClick:function(){v(!0),w(S-F),ee()},children:Object(f.jsx)("i",{class:"fad fa-backward"})}),Object(f.jsx)("button",{className:"themeBtn flex",onClick:function(){v(!0),w(S+F),ee()},children:Object(f.jsx)("i",{class:"fad fa-forward"})})]})]})}var te=c(147);c(140);var ce=function(e){e.text;var t=e.classNames,c=e.icon,s=e.function1,n=e.setState,a=e.re;return Object(f.jsx)("div",{className:t,ref:a&&a,onClick:function(e){n&&n((function(e){return!e})),e.stopPropagation(),s&&s()},children:Object(f.jsx)("i",{className:c})})};c(122);var se=function(e){var t=e.msg,c=e.user,n=e.msgs,a=e.convoid,i=Object(s.useState)(!1),o=Object(l.a)(i,2),r=o[0],d=o[1],u=Object(s.useState)(!1),b=Object(l.a)(u,2),m=b[0],O=b[1],h=Object(s.useState)(""),x=Object(l.a)(h,2),p=x[0],g=x[1],v=[{class:"smile-wink yellow",msg:"Wink"},{class:"kiss-beam red",msg:"Love"},{class:"grin-stars yellow",msg:"Stars"},{class:"grin-squint-tears yellow",msg:"Laugh"},{class:"frown red",msg:"Frown"},{class:"heart red",msg:"Like"}],N=v&&v.map((function(e){return Object(f.jsx)("i",{className:"fad fa-"+e.class,onClick:function(){var t;t=e.class,n&&n.map((function(e){if(p===e.msgid){var s=n.indexOf(e);e.senderid===c.uid?(n[s].reaction1="fad fa-".concat(t),j.collection("conversations").doc(a).update({messages:n})):(n[s].reaction2="fad fa-".concat(t),j.collection("conversations").doc(a).update({messages:n}))}})),d(!1)}})})),y=Object(s.useRef)(),S=Object(s.useRef)(),w=Object(s.useRef)();return document.addEventListener("click",(function(e){e.target!==w.current&&(d(!1),O(!1))})),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("i",{ref:w,onClick:function(e){g(t.msgid),d(!r)},className:t.senderid===c.uid?"fal fa-ellipsis-v-alt rightdots":"fal fa-ellipsis-v-alt leftdots"}),Object(f.jsxs)("div",{onContextMenu:function(e){return e.preventDefault()},onClick:function(e){return e.stopPropagation()},className:"flexrow optionsEdit",ref:y,"data-id":t.msgid,style:{display:r?"flex":"none"},children:[Object(f.jsxs)("div",{className:"emojisdiv",children:[Object(f.jsx)(ce,{classNames:"laugn",icon:"fad fa-laugh",setState:O,re:S}),Object(f.jsx)("div",{onClick:function(e){return e.stopPropagation()},className:"emojisrow flexrow bs",style:{display:m?"flex":"none",zIndex:"var(--high-priority)"},children:N})]}),Object(f.jsx)(ce,{classNames:"copy",icon:"fad fa-copy",function1:function(){return function(){var e=document.createRange(),t=document.querySelector("#".concat(p," .msg"));t&&(e.selectNode(t),window.getSelection().removeAllRanges(),window.getSelection().addRange(e),document.execCommand("copy"),window.getSelection().removeAllRanges(),d(!1))}()}}),Object(f.jsx)(ce,{classNames:"delete",icon:"fad fa-trash",function1:function(){n&&n.map((function(e){if(p===e.msgid&&e.senderid===c.uid){var t=n.indexOf(e);n.splice(t,1),j.collection("conversations").doc(a).update({messages:n}),d(!1)}}))}})]})]})},ne=c(64),ae=(c(134),c(65)),ie=c.n(ae);var oe=function(e){var t=Object(s.useContext)(O),c=t.themecolor,n=t.notifi,a=t.setNotifi,i=t.notificont,o=t.setNotificont,r=Object(s.useState)(!1),u=Object(l.a)(r,2),h=u[0],x=u[1],p=Object(s.useState)([]),g=Object(l.a)(p,2),v=g[0],N=g[1],y=Object(s.useState)(""),w=Object(l.a)(y,2),C=w[0],F=w[1],E=Object(s.useState)(0),T=Object(l.a)(E,2),U=(T[0],T[1]),A=Object(s.useState)(!1),L=Object(l.a)(A,2),I=L[0],R=L[1],z=Object(s.useState)(!1),P=Object(l.a)(z,2),D=(P[0],P[1],Object(s.useState)("")),M=Object(l.a)(D,2),W=(M[0],M[1],Object(s.useState)(!1)),_=Object(l.a)(W,2),Y=(_[0],_[1]),J=Object(s.useState)(""),K=Object(l.a)(J,2),X=(K[0],K[1]),Z=Object(s.useState)(""),$=Object(l.a)(Z,2),Q=($[0],$[1]),ce=Object(s.useState)(""),ae=Object(l.a)(ce,2),oe=(ae[0],ae[1]),re=Object(s.useState)(""),le=Object(l.a)(re,2),de=(le[0],le[1]),ue=Object(s.useState)(""),je=Object(l.a)(ue,2),be=je[0],me=je[1],fe=Object(s.useState)(""),Oe=Object(l.a)(fe,2),he=(Oe[0],Oe[1]),xe=Object(s.useState)(!1),pe=Object(l.a)(xe,2),ge=pe[0],ve=pe[1],Ne=Object(s.useState)(!1),ye=Object(l.a)(Ne,2),Se=ye[0],we=ye[1],ke=Object(s.useState)({top:0,left:0}),Ce=Object(l.a)(ke,2),Fe=Ce[0],Ee=(Ce[1],Object(s.useState)(!0)),Te=Object(l.a)(Ee,2),Ue=Te[0],Ae=Te[1],Le=Object(s.useState)(""),Ie=Object(l.a)(Le,2),Re=Ie[0],ze=Ie[1],Pe=Object(s.useState)(!0),De=Object(l.a)(Pe,2),Me=De[0],Ve=De[1],Be=Object(s.useState)(!0),qe=Object(l.a)(Be,2),He=qe[0],We=qe[1],Ge=Object(s.useState)(""),_e=Object(l.a)(Ge,2),Ye=_e[0],Je=_e[1],Ke=Object(s.useState)(""),Xe=Object(l.a)(Ke,2),Ze=(Xe[0],Xe[1]),$e=Object(s.useState)(!1),Qe=Object(l.a)($e,2),et=(Qe[0],Qe[1]),tt=Object(s.useState)(""),ct=Object(l.a)(tt,2),st=ct[0],nt=ct[1],at=Object(s.useState)(!1),it=Object(l.a)(at,2),ot=(it[0],it[1],Object(s.useState)("")),rt=Object(l.a)(ot,2),lt=rt[0],dt=rt[1],ut=Object(s.useState)(""),jt=Object(l.a)(ut,2),bt=jt[0],mt=jt[1],ft=Object(s.useState)(""),Ot=Object(l.a)(ft,2),ht=Ot[0],xt=Ot[1],pt=Object(s.useState)(""),gt=Object(l.a)(pt,2),vt=gt[0],Nt=gt[1],yt=Object(s.useState)(""),St=Object(l.a)(yt,2),wt=(St[0],St[1]),kt=Object(s.useState)(""),Ct=Object(l.a)(kt,2),Ft=(Ct[0],Ct[1]),Et=Object(s.useState)(""),Tt=Object(l.a)(Et,2),Ut=Tt[0],At=Tt[1],Lt=Object(s.useState)([]),It=Object(l.a)(Lt,2),Rt=It[0],zt=It[1],Pt=Object(s.useState)(!1),Dt=Object(l.a)(Pt,2),Mt=Dt[0],Vt=Dt[1],Bt=e.chatuser,qt=e.setState,Ht=e.icon,Wt=e.type,Gt=e.diag.messages,_t=e.diag.convoinfo,Yt=_t.convoid,Jt=_t.creatorid,Kt=_t.recipientid,Xt=d.a.auth().currentUser,Zt=d.a.firestore.FieldValue.serverTimestamp(),$t=Object(s.useRef)(),Qt=(j.collection("users").doc().id,/((?:(?!(?:https?|ftp):\/\/[\S]*\.(?:png|jpe?g|gif|svg|webp)).)+)|((?:https?|ftp):\/\/[\S]*\.(?:png|jpe?g|gif|svg|webp)(?:\?\S+=\S*(?:&\S+=\S*)*)?)/gm),ec=/(?:https?|ftp):\/\/[\S]*\.(?:png|jpe?g|gif|svg|webp)/g;function tc(e){return!!e.match(/(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?/)&&RegExp.$1}function cc(e){if(e.base64)return Object(f.jsx)(q,{src:e.message,link:!0});if(e.file)return Object(f.jsx)(H,{name:e.name,link:e.message});if(e.audio)return Object(f.jsx)(G,{src:e.message});if(e.video)return Object(f.jsx)(B,{type:"video",link:e.message});if(tc(e.message))return Object(f.jsx)(B,{link:"https://www.youtube.com/embed/"+tc(e.message)});var t=e.message.replace(Qt,(function(e,t,c){return t?"<p>".concat(t.trim(),"</p>"):'<img src="'.concat(c,'"/>')}));return Object(f.jsx)("div",{dangerouslySetInnerHTML:{__html:t}})}function sc(e){return Xt.uid===e.senderid?e.file?"msg file":e.video?"msg video":e.audio?"msg audio":e.emoji?"msg emojimsg":e.nobackground?"no-bg msg":tc(e.message)?"msg youtube":"msg":e.file?"msg file trans":e.video?"msg video trans":e.audio?"msg audio trans":e.emoji?"msg emojimsg trans":e.nobackground?"no-bg msg trans":tc(e.message)?"msg youtube trans":"msg trans"}var nc=Object(s.useState)(!1),ac=Object(l.a)(nc,2);ac[0],ac[1];var ic=Object(s.useState)(!1),oc=Object(l.a)(ic,2),rc=oc[0],lc=oc[1],dc=Object(s.useRef)(),uc=Object(s.useState)(""),jc=Object(l.a)(uc,2),bc=(jc[0],jc[1]),mc=Gt&&Gt.slice(0).reverse().map((function(e){return Object(f.jsxs)("div",{id:e.msgid,className:e.senderid===Xt.uid?"right m":"left m",onContextMenu:function(e){return function(e){var t=document.querySelector(".contextmenu");t.getBoundingClientRect();if(e.preventDefault(),mt(e.currentTarget.getAttribute("id")),we(!0),"small"===Wt)t.style.top="".concat(e.pageY-201,"px"),t.style.left="".concat(0,"px");else{t.getBoundingClientRect();t.style.top="".concat(e.pageY-200,"px"),t.style.left="".concat(e.pageX-150,"px")}""===!st&&Nc()}(e)},children:[Object(f.jsxs)("div",{className:"flex",children:[Object(f.jsxs)("p",{className:sc(e),contentEditable:!1,style:e.nobackground||e.emoji||tc(e.message)?{backgroundColor:"transparent"}:e.senderid===Xt.uid?{backgroundColor:Ye}:null,onClick:function(e){return function(e){e.target.querySelector(".controls");var t=e.target.closest("VIDEO"),c=(e.target.querySelector(".fa-play"),e.target.closest("IMG"));if(c&&e.currentTarget.contains(c)){lc(!0);var s=document.querySelector(".modal img");bc(c.getAttribute("src")),s.setAttribute("src",c.getAttribute("src"))}t&&e.currentTarget.contains(t)}(e)},children:["    ",cc(e)]}),Object(f.jsx)(se,{msgs:v,user:Xt,msg:e,convoid:Yt}),Object(f.jsx)("small",{className:e.senderid===Xt.uid?"alignRight elapsedtime":"alignLeft elapsedtime",children:Object(f.jsx)(te.a,{date:e.msgdate.toDate()})}),Object(f.jsxs)("div",{className:"reaction",style:{display:e.reaction1||e.reaction2?"flex":"none",width:""===e.reaction1||""===e.reaction2?"22px":"42px"},children:[Object(f.jsx)("i",{className:"fad fa-heart"===e.reaction1?"emoj fas fa-"+e.reaction1:"emoj fad fa-"+e.reaction1}),Object(f.jsx)("i",{style:{marginLeft:""===e.reaction2?"":"5px"},className:"fad fa-heart"===e.reaction2?"emoj fas fa-"+e.reaction2:"emoj fad fa-"+e.reaction2})]})]}),Object(f.jsx)("img",{src:e.senderid===Xt.uid?be:vt,alt:""})]})})),fc=Object(s.useRef)(),Oc=Object(s.useRef)(),hc=Object(s.useState)(),xc=Object(l.a)(hc,2),pc=(xc[0],xc[1],Object(s.useRef)());function gc(e){var t=document.querySelector(".".concat(e,"file")).files[0];if(t){var c=t.name.lastIndexOf(".")+1,s=t.name.substr(c,t.name.length).toLowerCase(),n=d.a.storage().ref("".concat(Yt,"/").concat(t.name));n.put(t).on("state_changes",(function(e){fc.current.style.display="flex";var t=e.bytesTransferred/e.totalBytes*100;Oc.current.style.height="".concat(t,"%")}),(function(e){}),(function(){if("image"===e)if("jpg"===s||"jpeg"===s||"png"===s){var c={message:"https://firebasestorage.googleapis.com/v0/b/".concat(n.bucket,"/o/").concat(Yt,"%2F").concat(t.name,"?alt=media"),reaction1:"",reaction2:"",msgdate:d.a.firestore.Timestamp.now(),msgid:j.collection("conversations").doc().id,read:!1,senderid:Xt.uid,editing:!1,nobackground:!0,emoji:!0,base64:!0},i={notifimsg:"https://firebasestorage.googleapis.com/v0/b/".concat(n.bucket,"/o/").concat(Yt,"%2F").concat(t.name,"?alt=media"),notifidate:d.a.firestore.Timestamp.now(),read:!1,sender:Xt.displayName,base64:!0,id:Yt,senderid:Xt.uid,notifiid:j.collection("users").doc().id};Ue&&j.collection("notifications").doc(Bt).update({notifications:d.a.firestore.FieldValue.arrayUnion(i)}),j.collection("conversations").doc(Yt).update({lastmsgdate:Zt,messages:d.a.firestore.FieldValue.arrayUnion(c)})}else a(!0),o({emoji:"fal fa-exclamation-circle",msg:"Only Images are allowed!"}),setTimeout((function(){a(!1)}),300500);else if("paperclip"===e){var r={message:"https://firebasestorage.googleapis.com/v0/b/".concat(n.bucket,"/o/").concat(Yt,"%2F").concat(t.name,"?alt=media"),reaction1:"",reaction2:"",msgdate:d.a.firestore.Timestamp.now(),msgid:j.collection("conversations").doc().id,read:!1,senderid:Xt.uid,editing:!1,nobackground:!0,emoji:!0,file:!0,name:t.name,base64:!1},l={notifimsg:"https://firebasestorage.googleapis.com/v0/b/".concat(n.bucket,"/o/").concat(Yt,"%2F").concat(t.name,"?alt=media"),notifidate:d.a.firestore.Timestamp.now(),read:!1,sender:Xt.displayName,file:!0,id:Yt,senderid:Xt.uid,notifiid:j.collection("users").doc().id};Ue&&j.collection("notifications").doc(Bt).update({notifications:d.a.firestore.FieldValue.arrayUnion(l)}),j.collection("conversations").doc(Yt).update({lastmsgdate:Zt,messages:d.a.firestore.FieldValue.arrayUnion(r)})}else if("microphone"===e);else if("film"===e){var u={message:"https://firebasestorage.googleapis.com/v0/b/".concat(n.bucket,"/o/").concat(Yt,"%2F").concat(t.name,"?alt=media"),reaction1:"",reaction2:"",msgdate:d.a.firestore.Timestamp.now(),msgid:j.collection("conversations").doc().id,read:!1,senderid:Xt.uid,editing:!1,nobackground:!0,emoji:!0,video:!0},b={notifimsg:"https://firebasestorage.googleapis.com/v0/b/".concat(n.bucket,"/o/").concat(Yt,"%2F").concat(t.name,"?alt=media"),notifidate:d.a.firestore.Timestamp.now(),read:!1,sender:Xt.displayName,video:!0,id:Yt,senderid:Xt.uid,notifiid:j.collection("users").doc().id};Ue&&j.collection("notifications").doc(Bt).update({notifications:d.a.firestore.FieldValue.arrayUnion(b)}),j.collection("conversations").doc(Yt).update({lastmsgdate:Zt,messages:d.a.firestore.FieldValue.arrayUnion(u)})}fc.current.style.display="none"}))}}var vc=[{icon:"image",type:"file"},{icon:"film",type:"file"},{icon:"paperclip",type:"file"},{icon:"microphone",type:"microphone"}].map((function(e){return Object(f.jsx)(V,{progressbar:fc,progresswidth:Oc,classNames:"",icon:e.icon,type:e.type,special:!0,sendFile:gc,convoid:Yt,inputref:pc})}));function Nc(){v&&v.map((function(e){if(bt===e.msgid){var t=v.indexOf(e);v[t].message=st,j.collection("conversations").doc(Yt).update({messages:v})}}))}var yc=Object(s.useRef)();function Sc(){yc.current.scrollIntoView({behavior:"smooth",block:"start"});if(null!=C.match(ec)){var e={message:C,reaction1:"",reaction2:"",msgdate:d.a.firestore.Timestamp.now(),msgid:j.collection("conversations").doc().id,read:!1,senderid:Xt.uid,editing:!1,nobackground:!0,emoji:!1};j.collection("conversations").doc(Yt).update({lastmsgdate:Zt,messages:d.a.firestore.FieldValue.arrayUnion(e)});var t={notifimsg:C,notifidate:d.a.firestore.Timestamp.now(),read:!1,sender:Xt.displayName,id:Yt,senderid:Xt.uid,notifiid:j.collection("users").doc().id};if(!Ue)return null;j.collection("notifications").doc(Bt).update({notifications:d.a.firestore.FieldValue.arrayUnion(t)}),F(""),$t.current.setAttribute("style","height: 50px")}else if(C.replace(/\s/g,"").length){var c={message:C,reaction1:"",reaction2:"",msgdate:d.a.firestore.Timestamp.now(),msgid:j.collection("conversations").doc().id,read:!1,senderid:Xt.uid,editing:!1,nobackground:!1,emoji:!1},s={notifimsg:C,notifidate:d.a.firestore.Timestamp.now(),read:!1,sender:Xt.displayName,id:Yt,senderid:Xt.uid,notifiid:j.collection("users").doc().id};Ue&&j.collection("notifications").doc(Bt).update({notifications:d.a.firestore.FieldValue.arrayUnion(s)}),j.collection("conversations").doc(Yt).update({lastmsgdate:d.a.firestore.Timestamp.now(),messages:d.a.firestore.FieldValue.arrayUnion(c)}),F(""),$t.current.setAttribute("style","height: 50px")}}var wc=Object(s.useRef)(),kc=Object(s.useState)(1),Cc=Object(l.a)(kc,2),Fc=Cc[0],Ec=Cc[1];function Tc(e){"in"===e.type?Ec((function(e){return e+.1})):Fc>1&&Ec((function(e){return e-.1}))}return Object(s.useEffect)((function(){var e=setInterval((function(){U((function(e){return e+1}))}),6e4);return function(){clearInterval(e)}}),[]),Object(s.useEffect)((function(){var e=setInterval((function(){R(!1)}),4e3);return function(){clearInterval(e)}}),[I]),Object(s.useEffect)((function(){j.collection("users").doc(Jt).onSnapshot((function(e){var t=e.data();X(t.userinfo.name),Q(t.userinfo.cover),oe(t.userinfo.city),de(t.userinfo.country)})),j.collection("users").doc(Kt).onSnapshot((function(e){var t=e.data();me(t.userinfo.cover),he(t.userinfo.name)})),j.collection("users").doc(Bt).onSnapshot((function(e){var t=e.data();xt(t.userinfo.name),Nt(t.userinfo.cover),wt(t.userinfo.city),Ft(t.userinfo.country),At(t.online),Y(t.userinfo.online),We(!1)}))}),[Jt,Kt,Bt]),Object(s.useEffect)((function(){j.collection("users").doc(Xt.uid).onSnapshot((function(e){var t=e.data();Je(t.customization.color),me(t.userinfo.cover)}))}),[Ye,Bt]),Object(s.useEffect)((function(){j.collection("users").doc(Bt).onSnapshot((function(e){var t=e.data();Ze(t.customization.chatcolor)}))}),[Bt]),Object(s.useEffect)((function(){j.collection("conversations").doc(Yt).get().then((function(t){var c=t.data();N(c.messages),Ve(!1),dt(c.customizedconvo.theme),ze(c.customizedconvo.emoji),Xt.uid===e.diag.convoinfo.creatorid?(Ae(c.notifications2),zt(c.nickname1)):(Ae(c.notifications1),zt(c.nickname2))}))}),[Yt]),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("div",{className:"top br-l",children:[Object(f.jsxs)("div",{className:"profilepic",children:[Object(f.jsx)("div",{className:"relative",children:He?Object(f.jsx)("div",{className:"loader blue reloader",children:Object(f.jsxs)("div",{class:"lds-ring",children:[Object(f.jsx)("div",{}),Object(f.jsx)("div",{}),Object(f.jsx)("div",{}),Object(f.jsx)("div",{})]})}):[Object(f.jsx)("img",{src:vt,alt:""}),Object(f.jsx)("div",{className:"notifi",style:{backgroundColor:Ut?"rgb(44, 255, 44)":"#FF3D3D"}})]}),Object(f.jsxs)("div",{children:[""===Rt?Object(f.jsx)("p",{className:"username",children:ht.length>15?ht.slice(0,15)+"...":ht}):Object(f.jsx)("p",{className:"username",children:Rt}),Object(f.jsx)("small",{children:Ut?"Online":"Offline"})]})]}),Object(f.jsxs)("div",{className:"controls",children:[Object(f.jsx)("i",{class:"fal fa-phone-alt",style:{color:c}}),Object(f.jsx)("i",{class:"fal fa-video",style:{color:c}}),Ht&&"fal fa-times"===Ht?Object(f.jsx)("i",{className:Ht,style:{padding:"0 5px",color:c},onClick:function(){return qt(!1)}}):Object(f.jsx)(b.b,{exact:!0,to:"/chatsettings/"+Yt,children:Object(f.jsx)("i",{style:{padding:"0 5px",color:c},class:"fal fa-ellipsis-v"})})]})]}),Object(f.jsx)(m.b,{render:function(e){e.location;return Object(f.jsx)("div",{className:lt?"https://i.imgur.com/4hzNTTq.png"===lt?"msgs black":"msgs":"msgs black",style:lt?{backgroundImage:"url("+lt+")"}:{backgroundImage:"url(https://i.imgur.com/4hzNTTq.png)"},children:Object(f.jsxs)("div",{className:"grid",children:[Object(f.jsx)("div",{className:"scrollto",ref:yc}),Me?Object(f.jsx)("div",{className:Me?"loader opa":"loader",children:Object(f.jsxs)("div",{class:"lds-ring",children:[Object(f.jsx)("div",{}),Object(f.jsx)("div",{}),Object(f.jsx)("div",{}),Object(f.jsx)("div",{})]})}):mc]})})}}),Object(f.jsxs)("div",{className:"search whiteb br-l",children:[Object(f.jsxs)("div",{className:"plus",children:[Object(f.jsx)("i",{class:ge?"fal fa-minus":"fal fa-plus",style:{color:c},onClick:function(){return ve(!ge)}}),Object(f.jsx)(S.a,{in:ge,timeout:300,classNames:"iconshover",unmountOnExit:!0,children:Object(f.jsxs)("div",{className:"icons",children:[vc,Object(f.jsx)("span",{className:"uploader bs",ref:fc,children:Object(f.jsx)("span",{className:"percent",ref:Oc})})]})})]}),Object(f.jsxs)("div",{className:"textarea flexrow",children:[Object(f.jsx)("textarea",{type:"text",placeholder:"Send a message...",onKeyUp:function(e){return function(e){13!==e.keyCode||e.shiftKey||(e.preventDefault(),Sc())}(e)},ref:$t,value:C,onChange:function(e){F(e.target.value)},onInput:function(){}}),Object(f.jsxs)("div",{className:"gif_emoji",children:[Object(f.jsx)("i",{className:"fal fa-laugh",onClick:function(){$t.current.focus(),Vt(!Mt)}}),Object(f.jsx)("i",{class:"fal fa-comment-alt-smile",onClick:function(){return x(!h)}})]})]}),Object(f.jsxs)("div",{className:"flexrow",children:[Object(f.jsx)("span",{role:"img","aria-label":"emoji",onClick:function(){return function(e){var t={message:e,reaction1:"",reaction2:"",msgdate:d.a.firestore.Timestamp.now(),msgid:j.collection("conversations").doc().id,read:!1,senderid:Xt.uid,editing:!1,nobackground:!1,emoji:!0};j.collection("conversations").doc(Yt).update({lastmsgdate:Zt,messages:d.a.firestore.FieldValue.arrayUnion(t)});var c={notifimsg:e,notifidate:d.a.firestore.Timestamp.now(),read:!1,sender:Xt.displayName,id:Yt,senderid:Xt.uid,notifiid:j.collection("users").doc().id};Ue&&j.collection("notifications").doc(Bt).update({notifications:d.a.firestore.FieldValue.arrayUnion(c)}),F(""),$t.current.setAttribute("style","height: 50px")}(Re)},style:{cursor:"pointer"},children:Re}),Object(f.jsx)("i",{class:"fal fa-paper-plane",style:{color:c},onClick:function(){Sc(),Vt(!1)}})]})]}),Object(f.jsx)(k,{setShowinput:et,editMsg:Nc,setUpdatedMsg:nt,convoid:Yt,type:"msg",msgid:bt,setMsgid:mt,setContextmenu:we,contextmenu:Se,contextstyle:Fe}),Object(f.jsx)(S.a,{in:h,unmountOnExit:!0,classNames:"gif",timeout:300,children:Object(f.jsx)(ee,{chatimg:vt,setGif:x,convoid:Yt,notifibool:Ue,chatuser:Bt})}),Object(f.jsx)(S.a,{in:n,timeout:300,classNames:"displayerror",unmountOnExit:!0,children:Object(f.jsxs)("div",{className:"errormsg bs diagmsg",children:[Object(f.jsx)("i",{className:i.emoji,style:{position:"absolute",left:"20px"}})," ",Object(f.jsx)("p",{children:i.msg}),Object(f.jsx)("i",{className:"far fa-times",style:{color:c},onClick:function(){return a(!1)}})]})}),Object(f.jsx)(S.a,{in:rc,classNames:"modal",timeout:0,children:Object(f.jsxs)("div",{className:"modal overflowimgcontainer",children:[Object(f.jsxs)("div",{className:"buttons",children:[Object(f.jsx)("i",{className:"fal fa-search-minus",onClick:function(){return Tc({type:"out"})}}),Object(f.jsx)("i",{class:"fal fa-redo-alt",onClick:function(){return Ec(1)}}),Object(f.jsx)("i",{class:"fal fa-search-plus",onClick:function(){return Tc({type:"in"})}})]}),Object(f.jsx)(ne.a,{className:"grabbercontainer",hideScrollbars:!0,children:Object(f.jsx)("img",{src:"",alt:"",ref:dc,style:{width:100*Fc+"%",height:100*Fc+"%"}})}),Object(f.jsx)("i",{className:"fal fa-times",onClick:function(){lc(!1),Ec(1)}})]})}),Object(f.jsx)(S.a,{in:Mt,classNames:"emojipicker",timeout:300,children:Object(f.jsxs)("div",{className:"emojipicker",ref:wc,onMouseOver:function(){return $t.current.focus()},onClick:function(){return $t.current.focus()},children:[Object(f.jsxs)("div",{className:"times",children:[" ",Object(f.jsx)("i",{className:"fal fa-times",onClick:function(){return Vt(!1)}})]}),Object(f.jsx)(ie.a,{onEmojiClick:function(e,t){F(C+t.emoji)}})]})})]})};var re=function(e){var t=Object(s.useContext)(O).themecolor,c=(d.a.auth().currentUser,e.chatuser),n=e.diag.convoinfo,a=(n.convoid,n.creatorid,n.recipientid),i=Object(s.useState)(""),o=Object(l.a)(i,2),r=o[0],u=o[1],b=Object(s.useState)(""),m=Object(l.a)(b,2),h=m[0],x=m[1],p=Object(s.useState)(""),g=Object(l.a)(p,2),v=g[0],N=g[1],y=Object(s.useState)(""),w=Object(l.a)(y,2),k=w[0],C=w[1],F=Object(s.useState)(""),E=Object(l.a)(F,2),T=E[0],U=E[1],A=Object(s.useState)(""),L=Object(l.a)(A,2),I=L[0],R=L[1],z=Object(s.useState)(""),P=Object(l.a)(z,2),D=P[0],M=P[1],V=Object(s.useState)(""),B=Object(l.a)(V,2),q=B[0],H=B[1],W=Object(s.useState)(!1),G=Object(l.a)(W,2),_=G[0],Y=G[1],J=Object(s.useState)(!1),K=Object(l.a)(J,2),X=K[0],Z=K[1],$=Object(s.useState)(!0),Q=Object(l.a)($,2),ee=Q[0],te=Q[1];return Object(s.useEffect)((function(){j.collection("users").doc(c).onSnapshot((function(e){var t=e.data();u(t.userinfo.name),x(t.userinfo.cover),N(t.userinfo.city),C(t.userinfo.country),U(t.userinfo.job),R(t.userinfo.phone),M(t.userinfo.email),H(t.userinfo.website),Z(t.online),te(!1)}))}),[a,c]),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("div",{className:"profilepic profilepiccol br-l",children:[Object(f.jsx)("div",{className:"relative",children:ee?Object(f.jsx)("div",{className:"loader blue reloader",children:Object(f.jsxs)("div",{class:"lds-ring",children:[Object(f.jsx)("div",{}),Object(f.jsx)("div",{}),Object(f.jsx)("div",{}),Object(f.jsx)("div",{})]})}):[Object(f.jsx)("img",{src:h,alt:""}),Object(f.jsx)("div",{className:"notifi",style:{backgroundColor:X?"rgb(44, 255, 44)":"#FF3D3D"}})]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("p",{children:r.length>17?r.slice(0,17)+"...":r}),Object(f.jsxs)("small",{children:["Job: ",""===T?"Not provided":T]})]}),Object(f.jsx)("i",{className:"fal fa-cog",style:{color:t}})]}),Object(f.jsxs)("div",{className:"personalinfo br-l flex",children:[Object(f.jsxs)("div",{className:"flexrow",children:[Object(f.jsx)("p",{children:"Personal info"}),Object(f.jsx)("i",{className:_?"fal fa-chevron-up rotate":"fal fa-chevron-up",onClick:function(){return Y(!_)}})]}),Object(f.jsx)(S.a,{in:_,classNames:"extended",timeout:0,unmountOnExit:!0,children:Object(f.jsxs)("div",{className:"extendoff",children:[Object(f.jsx)("hr",{}),Object(f.jsxs)("div",{className:"flex",children:[Object(f.jsxs)("div",{className:"flexrow flexinfo",children:[Object(f.jsx)("p",{children:"Phone #"})," ",Object(f.jsx)("p",{children:""===I?"N/A":I})]}),Object(f.jsxs)("div",{className:"flexrow flexinfo",children:[Object(f.jsx)("p",{children:"Email"}),Object(f.jsx)("p",{children:D})]}),Object(f.jsxs)("div",{className:"flexrow flexinfo",children:[Object(f.jsx)("p",{children:"Country"}),Object(f.jsx)("p",{children:""===k?"N/A":k})]}),Object(f.jsxs)("div",{className:"flexrow flexinfo",children:[Object(f.jsx)("p",{children:"City"}),Object(f.jsx)("p",{children:""===v?"N/A":v})]})]})]})})]}),Object(f.jsxs)("div",{className:"mutualcontacts br-l pdng flexrow",children:[Object(f.jsx)("i",{class:"fal fa-users"}),Object(f.jsx)("p",{children:"Mutual Contacts"}),Object(f.jsx)("i",{class:"fal fa-ellipsis-h-alt"})]}),Object(f.jsxs)("div",{className:"br-l pdng flexrow",children:["https://"===q.toLocaleLowerCase()?Object(f.jsx)("i",{class:"fal fa-external-link"}):Object(f.jsx)("a",{href:q,children:Object(f.jsx)("i",{class:"fal fa-external-link"})}),Object(f.jsx)("p",{children:"View Site"})]})]})};var le,de=function(e){var t=Object(s.useContext)(O).themecolor,c=e.allusers,n=e.setRecipientname,a=e.setRecipientid,i=e.recipientid,o=e.setMessage,r=e.sendMessage,d=e.msgpersonids,u=e.adduser,j=e.setAdduser,b=e.message,m=Object(s.useState)(""),h=Object(l.a)(m,2),x=h[0],p=h[1];function g(e){return d&&d.includes(e.uid)?Object(f.jsx)("i",{className:"fal fa-exclamation-circle"}):i===e.uid?Object(f.jsx)("i",{className:"fal fa-check slct"}):Object(f.jsx)("span",{className:"slct",style:{color:t,border:"solid 1px"+t},onMouseOver:function(e){return e.target.style.cssText="background-color:".concat(t,"; border: solid 1px transparent")},onMouseLeave:function(e){return e.target.style.cssText="background-color: transparent; border: solid 1px ".concat(t,"; color: ").concat(t)},children:"Select"})}var v=new RegExp("\\b"+x.replace(/[\W_]+/g,""),"i"),N=c&&c.map((function(e){if(v.test(e.userinfo.name.toLowerCase()))return Object(f.jsxs)("div",{className:d&&d.includes(e.uid)?"profilepic selected":"profilepic",children:[Object(f.jsxs)("div",{children:[Object(f.jsx)("img",{src:e.userinfo.cover?e.userinfo.cover:"https://www.gettyimages.ca/gi-resources/images/500px/983794168.jpg",alt:""}),Object(f.jsx)("p",{children:e.userinfo.name})]}),Object(f.jsx)("small",{onClick:d&&d.includes(e.uid)?function(){j(!u)}:function(){a(e.uid),n(e.userinfo.name)},className:i===e.uid?"usersrowselected":"",children:g(e)})]})}));return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("div",{className:"adduser",onClick:function(){return e.setAdduser()}}),Object(f.jsxs)("div",{className:"userlist bs",children:[Object(f.jsxs)("div",{className:"hd",children:[Object(f.jsx)("h2",{children:"Add Contact"}),Object(f.jsx)("div",{className:"search",children:Object(f.jsx)("input",{type:"text",placeholder:"Search",onChange:function(e){return p(e.target.value)}})})]}),Object(f.jsx)("div",{className:"overflow flex",children:N}),Object(f.jsxs)("div",{className:"search",children:[Object(f.jsx)("input",{type:"text",placeholder:"Send a message...",onChange:function(e){return o(e.target.value)},value:b}),Object(f.jsx)("button",{className:"themeBtn",onClick:function(){i?r():(o(""),j(!u))},style:{color:"white",border:"solid 3px transparent",backgroundColor:t},onMouseOver:function(e){return e.target.style.cssText="background-color: transparent; border: solid 3px ".concat(t,"; color: ").concat(t)},onMouseLeave:function(e){return e.target.style.cssText="background-color: ".concat(t,"; border: solid 3px transparent; color: white")},children:"Send Message"})]}),Object(f.jsx)("i",{className:"fal fa-times",onClick:function(){return e.setAdduser()},style:{color:t}})]})]})};var ue=F.a.input(le||(le=Object(v.a)([" \n      &:valid {\n         border: solid 2px ","\n      }\n      &:focus {\n         border: solid 2px ","\n      }\n"])),(function(e){return e.color}),(function(e){return e.color}));var je=function(e){var t=Object(s.useContext)(O).themecolor,c=e.disabled,n=e.determineDelete,a=e.updateProfile,i=e.age,o=e.setAge,r=e.name,l=e.setName,u=e.city,b=e.setCity,m=e.phonenumber,h=e.setPhonenumber,x=e.website,p=e.setWebsite,g=e.country,v=e.setCountry,N=d.a.auth().currentUser;return Object(f.jsxs)("div",{className:"inputs inps",children:[Object(f.jsxs)("label",{children:[Object(f.jsx)("span",{children:"Name"}),Object(f.jsx)(ue,{type:"text",value:r,onChange:function(e){return l(e.target.value)},required:!0,placeholder:"Name",color:t})]}),Object(f.jsxs)("label",{children:[Object(f.jsx)("span",{children:"Age"}),Object(f.jsx)(ue,{color:t,type:"number",value:i,onChange:function(e){return o(e.target.value)},min:"1",required:!0,placeholder:"Age"})]}),Object(f.jsxs)("label",{children:[Object(f.jsx)("span",{children:"Phone Number"}),Object(f.jsx)(ue,{color:t,type:"number",value:m,onChange:function(e){return h(e.target.value)},required:!0,placeholder:"Phone Number"})]}),Object(f.jsxs)("label",{children:[Object(f.jsx)("span",{children:"City"}),Object(f.jsx)(ue,{color:t,type:"text",value:u,onChange:function(e){return b(e.target.value)},required:!0,placeholder:"City"})]}),Object(f.jsxs)("label",{children:[Object(f.jsx)("span",{children:"Country"}),Object(f.jsx)(ue,{color:t,type:"text",value:g,onChange:function(e){return v(e.target.value)},required:!0,placeholder:"Country"})]}),Object(f.jsxs)("label",{children:[Object(f.jsx)("span",{children:"Website URL"}),Object(f.jsx)(ue,{color:t,type:"text",value:x,onChange:function(e){return p(e.target.value)},required:!0,placeholder:"https://example.com"})]}),Object(f.jsx)("label",{className:"btnContainer",children:Object(f.jsx)("button",{className:"themeBtn",onClick:function(){return a()},style:{color:"white",border:"solid 3px transparent",backgroundColor:t},onMouseOver:function(e){return e.target.style.cssText="background-color: transparent; border: solid 3px ".concat(t,"; color: ").concat(t)},onMouseLeave:function(e){return e.target.style.cssText="background-color: ".concat(t,"; border: solid 3px transparent; color: white")},children:"Save"})}),Object(f.jsxs)("label",{children:[Object(f.jsx)("span",{children:Object(f.jsx)("strong",{children:"Delete Account"})}),Object(f.jsx)(ue,{color:t,required:!0,onChange:function(e){return n(e)},placeholder:"Type in "+N.displayName+" to delete account."}),Object(f.jsxs)("small",{children:["Key: ",N.displayName]}),Object(f.jsx)("button",{disabled:c,className:"themeBtn warning",onClick:function(){return j.collection("users").doc(N.uid).delete(),j.collection("notifications").doc(N.uid).delete(),void N.delete().then((function(){})).catch((function(e){}))},children:"Delete Account"})]})]})};var be=function(e){var t=d.a.auth().currentUser,c=Object(s.useState)(""),n=Object(l.a)(c,2),a=(n[0],n[1],Object(s.useState)("")),i=Object(l.a)(a,2),o=i[0],r=i[1],u=Object(s.useState)(""),b=Object(l.a)(u,2),m=b[0],h=b[1],x=Object(s.useState)(""),p=Object(l.a)(x,2),g=p[0],v=p[1],N=Object(s.useState)(""),y=Object(l.a)(N,2),S=y[0],w=y[1],k=Object(s.useState)(""),C=Object(l.a)(k,2),F=C[0],E=C[1],T=Object(s.useState)(""),U=Object(l.a)(T,2),A=U[0],L=U[1],I=Object(s.useState)(!1),R=Object(l.a)(I,2),z=R[0],P=R[1],D=Object(s.useState)(""),M=Object(l.a)(D,2),V=M[0],B=M[1],q=Object(s.useState)(""),H=Object(l.a)(q,2),W=H[0],G=H[1],_=Object(s.useState)(""),Y=Object(l.a)(_,2),J=Y[0],K=Y[1],X=Object(s.useState)(""),Z=Object(l.a)(X,2),$=(Z[0],Z[1],Object(s.useContext)(O)),Q=($.notifi,$.setNotifi),ee=($.notificont,$.setNotificont),te=Object(s.useState)(!0),ce=Object(l.a)(te,2),se=ce[0],ne=ce[1];function ae(){var e={age:m,city:S,country:F,phone:g,website:A,cover:V,name:o,email:W,job:J};j.collection("users").doc(t.uid).update({userinfo:e}).then((function(){Q(!0),ee({msg:"Profile was updated!",emoji:"fal fa-check-circle"})})).catch((function(e){Q(!0),ee({msg:"Image is too large",emoji:"fal fa-exclamation-circle"})})),setTimeout((function(){Q(!1)}),3500)}var ie=Object(s.useState)(!0),oe=Object(l.a)(ie,2),re=oe[0],le=oe[1];return Object(s.useEffect)((function(){j.collection("users").doc(t.uid).onSnapshot((function(e){var t=e.data();r(t.userinfo.name),h(t.userinfo.age),v(t.userinfo.phone),w(t.userinfo.city),E(t.userinfo.country),L(t.userinfo.website),B(t.userinfo.cover),G(t.userinfo.email),K(t.userinfo.job),ne(!1)}))}),[]),Object(f.jsxs)("div",{className:"account",children:[Object(f.jsx)("div",{className:"head",children:Object(f.jsx)("h2",{children:"Account"})}),Object(f.jsxs)("div",{className:"profilepic",children:[se?Object(f.jsx)("div",{className:"loader blue reloader width",children:Object(f.jsxs)("div",{class:"lds-ring",children:[Object(f.jsx)("div",{}),Object(f.jsx)("div",{}),Object(f.jsx)("div",{}),Object(f.jsx)("div",{})]})}):Object(f.jsx)("img",{src:V,alt:""}),Object(f.jsxs)("div",{className:"btnprof flexrow",children:[z?Object(f.jsx)("button",{className:"settingBtn",onClick:function(){return P(!z),void ae()},children:"Save"}):Object(f.jsxs)("label",{children:[Object(f.jsx)("div",{className:"settingBtn",onClick:function(){return Q(!1)},children:"Upload"}),Object(f.jsx)("input",{className:"uploadpic",onChange:function(){return function(){var e=document.querySelector(".uploadpic").files[0],c=d.a.storage().ref("".concat(t.uid,"/").concat(e.name));c.put(e).on("state_changes",(function(){ne(!0)}),(function(){}),(function(){ne(!1),B("https://firebasestorage.googleapis.com/v0/b/".concat(c.bucket,"/o/").concat(t.uid,"%2F").concat(e.name,"?alt=media")),P(!z)}))}()},type:"file",style:{display:"none"}})]}),Object(f.jsx)("button",{className:"settingBtn warning",onClick:function(){return function(){P(!1),ae(),t.updateProfile({displayName:o});var e={job:J,age:m,city:S,country:F,phone:g,website:A,name:o,email:W,cover:"https://www.gettyimages.ca/gi-resources/images/500px/983794168.jpg"};j.collection("users").doc(t.uid).update({userinfo:e})}()},children:"Remove"})]})]}),Object(f.jsx)("hr",{}),Object(f.jsx)(je,{name:o,setName:r,age:m,setAge:h,phonenumber:g,setPhonenumber:v,city:S,setCity:w,country:F,setCountry:E,website:A,setWebsite:L,updateProfile:ae,determineDelete:function(e){e.target.value===t.displayName?le(!1):le(!0)},disabled:re})]})};var me=function(e){var t=e.checked,c=e.setChecked,s=e.function1;return Object(f.jsx)("div",{className:"switchdiv",children:Object(f.jsxs)("div",{className:"flexrow switchdiv",children:[Object(f.jsx)("p",{children:e.title}),Object(f.jsxs)("label",{className:"form-switch",children:[Object(f.jsx)("input",{type:"checkbox",checked:t,onChange:function(e){c&&c(e.target.checked),s&&s()}}),Object(f.jsx)("i",{})]})]})})};var fe=function(e){Object(s.useContext)(O).themecolor;var t=e.type,c=e.title,n=e.value,a=e.setValue,i=e.placeholder,o=e.changeCSSVar;return Object(f.jsxs)("div",{className:"input flexrow sb",children:[Object(f.jsx)("p",{children:c}),"text"===t?Object(f.jsx)("input",{required:!0,onBlur:function(e){return e.target.style.border="solid 2px #eee"},onFocus:function(e){return e.target.style.border="solid 2px ".concat(n)},placeholder:i,type:t,value:n,onChange:function(e){a(e.target.value)}}):Object(f.jsx)("input",{required:!0,onBlur:function(e){return e.target.style.border="solid 2px #eee"},onFocus:function(e){return e.target.style.border="solid 2px ".concat(n)},placeholder:i,type:t,value:n,onChange:function(e){a(e.target.value),o(e)}})]})};var Oe=function(e){var t=e.emoji,c=e.state1,s=(e.setState1,e.setState2),n=(e.style,e.function1),a=e.type,i=e.title,o=(e.addstyle,e.state3,e.setState3);return e.stylebtn,Object(f.jsxs)("div",{className:"flexrow sb",children:["button"===a?Object(f.jsx)("div",{}):Object(f.jsx)("p",{children:i}),"button"===a?Object(f.jsx)("button",{className:"btn",onClick:function(){n()},children:"Save"}):Object(f.jsx)("i",{class:t,onClick:function(){e.setState1(!c),s&&s(!0)},onMouseOver:function(){return o&&o(!0)},onMouseLeave:function(){return o&&o(!1)}}),"fad fa-adjust"!==t&&"button"!==a?Object(f.jsx)("span",{role:"img","aria-label":"emoji",onClick:function(){e.setState1(!c),s&&s(!0)},children:t}):""]})};var he=function(e){d.a.auth().currentUser;var t=e.function1,c=e.input1,n=e.input2,a=e.input3,i=e.input4,o=e.setInput4,r=e.setInput1,u=e.setInput2,j=e.setInput3,b=Object(s.useState)(!1),m=Object(l.a)(b,2),O=m[0],h=m[1];return Object(f.jsxs)("div",{className:"customize",children:[Object(f.jsx)("div",{children:Object(f.jsx)("h2",{children:"Customize"})}),Object(f.jsx)("small",{children:"Customize your chat settings."}),Object(f.jsx)("hr",{}),Object(f.jsx)("div",{className:"spacer1"}),Object(f.jsxs)("div",{className:"flex",children:[Object(f.jsx)(me,{title:"Dark Mode",checked:c,setChecked:r}),Object(f.jsx)(me,{title:"Wide Sidebar",checked:n,setChecked:u}),Object(f.jsx)(fe,{type:"color",title:"Chat Color",value:a,setValue:j,changeCSSVar:function(e){document.documentElement.style.setProperty("--chat-color",e.target.value)}}),Object(f.jsx)(fe,{type:"color",title:"Theme Color",value:i,setValue:o,changeCSSVar:function(e){document.documentElement.style.setProperty("--theme-color",e.target.value)}}),Object(f.jsx)(Oe,{type:"button",state1:O,setState1:h,style:i,function1:t,addstyle:!0})]})]})};var xe=function(e){var t=e.variable,c=e.title;return Object(f.jsx)(f.Fragment,{children:Object(f.jsxs)("div",{className:"flexrow sb",style:{margin:"10px 0"},children:[Object(f.jsxs)("p",{children:[c,":"]}),Object(f.jsx)("p",{className:"light",children:t||"N/A"})]})})};var pe=function(e){var t=e.chatuser,c=Object(s.useState)(""),n=Object(l.a)(c,2),a=n[0],i=n[1],o=Object(s.useState)(""),r=Object(l.a)(o,2),d=r[0],u=r[1],b=Object(s.useState)(""),m=Object(l.a)(b,2),O=m[0],h=m[1],x=Object(s.useState)(""),p=Object(l.a)(x,2),g=p[0],v=p[1],N=Object(s.useState)(""),y=Object(l.a)(N,2),S=y[0],w=y[1],k=Object(s.useState)(""),C=Object(l.a)(k,2),F=C[0],E=C[1],T=Object(s.useState)(""),U=Object(l.a)(T,2),A=U[0],L=U[1],I=Object(s.useState)(""),R=Object(l.a)(I,2),z=R[0],P=R[1],D=Object(s.useState)(""),M=Object(l.a)(D,2),V=M[0],B=M[1];return Object(s.useEffect)((function(){j.collection("users").doc(t).onSnapshot((function(e){var t=e.data();i(t.userinfo.name),u(t.userinfo.age),h(t.userinfo.city),v(t.userinfo.country),w(t.userinfo.cover),E(t.userinfo.email),L(t.userinfo.job),P(t.userinfo.phone),B(t.userinfo.website)}))}),[]),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("div",{className:"flexrow sb",children:[Object(f.jsxs)("h2",{className:"capitalize",children:["About ",a]}),Object(f.jsx)("div",{className:"profilepic",children:Object(f.jsx)("img",{src:S,alt:"profilepicture"})})]}),Object(f.jsx)("hr",{}),Object(f.jsx)("h3",{style:{marginBottom:"10px"},children:"Personal Info"}),Object(f.jsx)(xe,{variable:d,title:"Age"}),Object(f.jsx)(xe,{variable:A,title:"Job"}),Object(f.jsx)(xe,{variable:z,title:"Phone"}),Object(f.jsx)(xe,{variable:g,title:"Country"}),Object(f.jsx)(xe,{variable:O,title:"City"}),Object(f.jsx)("h3",{style:{margin:"10px 0"},children:"Other Info"}),Object(f.jsx)(xe,{variable:F,title:"Email"}),Object(f.jsxs)("div",{className:"flexrow sb",style:{margin:"10px 0"},children:[Object(f.jsx)("p",{children:"Website:"}),Object(f.jsx)("p",{className:"light",children:"https://"===V?"N/A":Object(f.jsxs)("a",{href:V,rel:"noreferrer",target:"_blank",children:[" ",Object(f.jsx)("i",{class:"fal fa-external-link-alt"})]})})]})]})};var ge=function(){return Object(f.jsx)(f.Fragment,{children:"asd"})};var ve=function(e){var t=Object(s.useContext)(O),c=t.themecolor,n=(t.notifi,t.setNotifi),a=(t.notificont,t.setNotificont),i=d.a.auth().currentUser,o=(e.themeimg,e.setThemeimg),r=e.themebool,u=e.setEmojibool,b=e.setThemebool,m=Object(s.useState)(!1),h=Object(l.a)(m,2),x=(h[0],h[1],Object(s.useState)("")),p=Object(l.a)(x,2),g=p[0],v=p[1],N=Object(s.useState)(""),y=Object(l.a)(N,2),S=y[0],w=y[1],k=e.creatorid,C=e.convoid,F=e.setEmojitype,E=e.emojitype,T=e.miniview,U=e.setMiniview;return Object(s.useEffect)((function(){j.collection("conversations").doc(C).onSnapshot((function(e){var t=e.data();o(t.customizedconvo.theme),F(t.customizedconvo.emoji),i.uid===k?v(t.nickname1):v(t.nickname2)}))}),[C]),Object(f.jsxs)("div",{className:"customize",children:[Object(f.jsx)("div",{children:Object(f.jsx)("h2",{children:"Themes"})}),Object(f.jsx)("small",{children:"Customize your conversation settings."}),Object(f.jsx)("hr",{}),Object(f.jsx)("div",{className:"spacer1"}),Object(f.jsxs)("div",{className:"flex",children:[Object(f.jsx)(Oe,{type:"emoji",emoji:"fad fa-adjust",title:"Theme",setState1:b,state1:r,state3:T,setState3:U}),Object(f.jsx)(Oe,{type:"emoji",emoji:E,title:"Emoji",state1:S,setState1:w,setState2:u}),Object(f.jsx)(fe,{placeholder:"Nickname",type:"text",title:"Nickname",value:g,setValue:v}),Object(f.jsxs)("div",{className:"flexrow sb",children:[Object(f.jsx)("span",{}),Object(f.jsx)("button",{className:"btn",style:{color:"white",border:"solid 3px transparent",backgroundColor:c},onMouseOver:function(e){return e.target.style.cssText="background-color: transparent; border: solid 3px ".concat(c,"; color: ").concat(c)},onMouseLeave:function(e){return e.target.style.cssText="background-color: ".concat(c,"; border: solid 3px transparent; color: white")},onClick:function(){return n(!0),a({msg:"Profile was updated!",emoji:"fal fa-check-circle"}),i.uid===k?j.collection("conversations").doc(C).update({nickname1:g}):j.collection("conversations").doc(C).update({nickname2:g}),void setTimeout((function(){n(!1)}),3500)},children:"Save"})]})]})]})};var Ne=function(e){var t=d.a.auth().currentUser,c=e.notifibool,s=(e.setNotifibool,e.convoid),n=e.creatorid;return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("h2",{o:!0,children:"Chat Configurations"}),Object(f.jsx)("hr",{}),Object(f.jsx)(me,{title:"Notifications",checked:c,function1:function(){t.uid===n?j.collection("conversations").doc(s).update({notifications1:!c}):j.collection("conversations").doc(s).update({notifications2:!c})}})]})};var ye=function(){return Object(f.jsx)(f.Fragment,{})};var Se=function(e){j.collection("users").doc().id;var t=Object(s.useState)(""),c=Object(l.a)(t,2),n=c[0],a=c[1],i=new RegExp("\\b"+n.replace(/[\W_]+/g,""),"i"),o=(Object(m.g)(),e.settings,e.type),r=e.link,u=e.linklabel,h=(e.BrowserHistory,Object(s.useState)(!1)),x=Object(l.a)(h,2),p=x[0],g=x[1],v=Object(s.useState)(!1),N=Object(l.a)(v,2),y=N[0],w=N[1],C=Object(s.useState)(!1),F=Object(l.a)(C,2),E=F[0],T=F[1],U=Object(s.useContext)(O),A=U.darkmode,L=U.notifi,I=U.setNotifi,R=U.notificont,z=U.setNotificont,P=d.a.auth().currentUser,D=Object(s.useState)(""),M=Object(l.a)(D,2),V=M[0],B=M[1],q=Object(s.useState)(""),H=Object(l.a)(q,2),W=H[0],G=H[1],_=Object(s.useState)(""),Y=Object(l.a)(_,2),J=Y[0],K=Y[1],X=Object(s.useState)(!1),Z=Object(l.a)(X,2),$=Z[0],ee=Z[1],te=Object(s.useState)(!0),ce=Object(l.a)(te,2),se=ce[0],ne=ce[1],ae=Object(s.useState)(!1),ie=Object(l.a)(ae,2),oe=ie[0],re=ie[1],le=Object(s.useState)(""),de=Object(l.a)(le,2),ue=de[0],je=de[1],me=Object(s.useState)(!1),fe=Object(l.a)(me,2),Oe=fe[0],xe=fe[1],Se=Object(s.useState)({top:0,left:0}),we=Object(l.a)(Se,2),ke=we[0],Ce=(we[1],[{img:"https://wallpaperaccess.com/full/1288078.jpg",type:"background"},{img:"https://www.setaswall.com/wp-content/uploads/2019/08/Whatsapp-Wallpaper-072.jpg",type:"background"},{img:"http://images.unsplash.com/photo-1518531933037-91b2f5f229cc?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max",type:"background"},{img:"https://i.imgur.com/05HfuHW.jpg",type:"background"},{img:"https://i.imgur.com/Frdc6vv.jpg",type:"background"},{img:"https://i.imgur.com/3St6WoQ.jpg",type:"background"},{img:"https://i.imgur.com/R4TMmVd.jpg",type:"background"},{img:"https://i.imgur.com/8UIUZae.jpg",type:"background"},{img:"https://i.imgur.com/yfwxwo1.jpg",type:"gradient"},{img:"https://i.imgur.com/HTQ2T1O.jpg",type:"gradient"},{img:"https://i.imgur.com/z0zjGrS.jpg",type:"gradient"},{img:"https://i.imgur.com/NXUqzHa.jpg",type:"gradient"},{img:"https://i.imgur.com/bT0t5lL.jpg",type:"gradient"},{img:"https://i.imgur.com/TE4sKjU.jpg",type:"gradient"},{img:"https://i.imgur.com/4hzNTTq.png",type:"default"}]),Fe=["\ud83d\ude00","\ud83d\ude03","\ud83d\ude04","\ud83d\ude01","\ud83d\ude06","\ud83d\ude05","\ud83e\udd7a","\ud83d\ude22","\ud83d\ude2d","\ud83d\ude24","\ud83d\ude20","\ud83d\ude21","\ud83e\udd2c","\ud83e\udd2f","\ud83d\ude33","\ud83e\udd75","\ud83e\udd76","\ud83d\ude31","\ud83d\ude28","\ud83d\ude30","\ud83d\ude25","\ud83d\ude13","\ud83e\udd17","\ud83e\udd14","\ud83e\udd2d","\ud83e\udd2b","\ud83e\udd25","\ud83d\ude36","\ud83d\ude10","\ud83d\ude11","\ud83d\ude2c","\ud83d\ude44","\ud83d\ude2f","\ud83d\ude26","\ud83d\ude27","\ud83d\ude11","\ud83d\ude2c","\ud83d\ude44","\ud83d\ude2f","\ud83d\ude26","\ud83d\ude27","\ud83d\ude2e","\ud83d\ude32","\ud83e\udd71","\ud83d\ude34","\ud83e\udd24","\ud83d\ude2a","\ud83d\ude35","\ud83e\udd10","\ud83e\udd74","\ud83d\ude2c","\ud83d\ude44","\ud83d\ude2f","\ud83d\ude26","\ud83d\ude27","\ud83d\ude2e","\ud83d\ude32","\ud83e\udd71","\ud83d\ude34","\ud83e\udd24","\ud83d\ude2a","\ud83d\ude35","\ud83e\udd10","\ud83e\udd74","\ud83e\udd22 ","\ud83e\udd2e","\ud83e\udd27","\ud83d\ude37","\ud83e\udd12","\ud83e\udd15","\ud83e\udd11","\ud83e\udd20","\ud83d\ude08","\ud83d\udc7f"],Ee=Fe&&Fe.map((function(t){return Object(f.jsx)("div",{style:{cursor:"pointer"},className:"emojidiv",onClick:function(){return K(c=t),I(!0),z({emoji:c,msg:"Emoji selected!"}),j.collection("conversations").doc(e.diag.convoinfo.convoid).update({customizedconvo:{theme:W,emoji:c}}),setTimeout((function(){I(!1)}),3500),void w(!1);var c},children:Object(f.jsx)("span",{role:"img","aria-label":"emoji",children:t})})})),Te=Ce&&Ce.map((function(t){if(i.test(t.type.toLowerCase()))return Object(f.jsxs)("div",{className:"theme bs flex",children:[Object(f.jsxs)("div",{className:"img",children:[" ",Object(f.jsx)("img",{src:t.img,alt:""})]}),Object(f.jsxs)("div",{className:"select flexrow",children:[Object(f.jsx)("p",{children:"Select this theme:"}),Object(f.jsx)("i",{className:"fal fa-check-circle",onClick:function(){var c;c=t.img,G(c),I(!0),z({emoji:"fal fa-check-circle",msg:"Theme selected!"}),j.collection("conversations").doc(e.diag.convoinfo.convoid).update({customizedconvo:{theme:c,emoji:J}}),setTimeout((function(){I(!1)}),3500),g(!1)},style:{color:V}})]})]})}));return Object(s.useEffect)((function(){"chatsettings"===o&&j.collection("conversations").doc(e.diag.convoinfo.convoid).onSnapshot((function(t){var c=t.data();P.uid===e.diag.convoinfo.creatorid?ne(c.notifications1):ne(c.notifications2)}))}),[]),Object(s.useEffect)((function(){j.collection("users").doc(P.uid).onSnapshot((function(e){var t=e.data();ee(t.customization.darkmode),re(t.customization.widemode),je(t.customization.color),B(t.customization.themecolor)}))}),[]),Object(f.jsx)(f.Fragment,{children:Object(f.jsxs)("div",{onContextMenu:function(e){return function(e){var t=document.querySelector(".contextmenu");t.getBoundingClientRect(),e.preventDefault(),xe(!0),t.style.top="".concat(e.pageY-t.clientHeight,"px"),t.style.left="".concat(e.pageX-t.clientWidth,"px")}(e)},className:A?"settingsgrid flex darkmode":"settingsgrid flex",children:[Object(f.jsxs)("div",{className:"links  flex",children:[Object(f.jsxs)("div",{className:"section1 flex",children:[Object(f.jsx)("h2",{children:"Settings"}),Object(f.jsx)(b.c,{onClick:function(){return I(!1)},activeStyle:{color:V},activeClassName:"bs",exact:!0,to:"/"+r.link0,children:u.link0}),Object(f.jsx)(b.c,{onClick:function(){return I(!1)},activeStyle:{color:V},activeClassName:"bs",to:"/".concat(o,"/").concat(r.link1),children:u.link1})]}),Object(f.jsx)("hr",{}),Object(f.jsxs)("div",{className:"section2 flex",children:[Object(f.jsx)(b.c,{onClick:function(){return I(!1)},activeStyle:{color:V},activeClassName:"bs",to:"/".concat(o,"/").concat(r.link2),children:u.link2}),Object(f.jsx)(b.c,{onClick:function(){return I(!1)},activeStyle:{color:V},activeClassName:"bs",to:"/".concat(o,"/").concat(r.link3),children:u.link3}),"settings"===o?"":Object(f.jsx)("hr",{}),"settings"===o?"":Object(f.jsx)(b.b,{to:"/chat/"+e.diag.convoinfo.convoid,style:{marginTop:"5px"},children:"Return to Chat"})]})]}),Object(f.jsx)("div",{className:"paths bs",children:Object(f.jsxs)(m.d,{children:[Object(f.jsx)(m.b,{exact:!0,path:"/".concat(r.link0),children:"settings"===o?Object(f.jsx)(be,{notifi:L,notificont:R,setNotifi:I,setNotificont:z}):Object(f.jsx)(ve,{setEmojitype:K,emojitype:J,setEmojibool:w,themeimg:W,setThemeimg:G,themebool:p,setThemebool:g,chatuser:e.chatuser,notifi:L,notificont:R,setNotifi:I,setNotificont:z,convoid:e.diag.convoinfo.convoid,creatorid:e.diag.convoinfo.creatorid,miniview:E,setMiniview:T})}),Object(f.jsx)(m.b,{path:"/".concat(o,"/").concat(r.link1),children:"settings"===o?Object(f.jsx)(ge,{}):Object(f.jsx)(Ne,{notifibool:se,setNotifibool:ne,convoid:e.diag.convoinfo.convoid,creatorid:e.diag.convoinfo.creatorid})}),Object(f.jsx)(m.b,{path:"/".concat(o,"/").concat(r.link2),children:"settings"===o?Object(f.jsx)(he,{function1:function(){var e={darkmode:$,widemode:oe,color:ue,themecolor:V};j.collection("users").doc(P.uid).update({customization:e}).then((function(){I(!0),z({emoji:"fal fa-check-circle",msg:"Profile has been updated!"})})),setTimeout((function(){I(!1)}),3500)},input1:$,input3:ue,input4:V,input2:oe,setInput1:ee,setInput4:B,setThemecolor:B,setInput3:je,setInput2:re}):""}),Object(f.jsx)(m.b,{path:"/".concat(o,"/").concat(r.link3),children:"settings"===o?Object(f.jsx)(ye,{}):Object(f.jsx)(pe,{chatuser:e.chatuser})})]})}),Object(f.jsx)(S.a,{in:L,timeout:300,classNames:"displayerror",unmountOnExit:!0,children:Object(f.jsxs)("div",{className:"errormsg bs",children:[Object(f.jsx)("span",{role:"img","aria-label":"emoji",children:J})," ",Object(f.jsx)("p",{children:R.msg}),Object(f.jsx)("i",{className:"far fa-times",style:{color:V},onClick:function(){return I(!1)}})]})}),Object(f.jsx)(S.a,{in:p,timeout:300,classNames:"themesdisplay",unmountOnExit:!0,children:Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("div",{className:"screen",onClick:function(){return g(!1)}}),Object(f.jsxs)("div",{className:"themes bs flex",children:[Object(f.jsxs)("div",{className:"filterBtn flex",children:[Object(f.jsx)("h2",{style:{textAlign:"center"},children:"Filter: "}),Object(f.jsxs)("div",{className:"flexrow center",children:[Object(f.jsx)(Q,{state:n,setState:a,type:"",text:"All"}),Object(f.jsx)(Q,{state:n,setState:a,type:"background",text:"Images"}),Object(f.jsx)(Q,{state:n,setState:a,type:"gradient",text:"Gradients"}),Object(f.jsx)(Q,{state:n,setState:a,type:"default",text:"Default"})]})]}),Object(f.jsxs)("div",{className:"flex",children:[Object(f.jsx)("p",{className:"themestitle",children:"Themes: "}),Te]})]})]})}),Object(f.jsx)(S.a,{in:y,timeout:300,classNames:"emojidisplay",unmountOnExit:!0,children:Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("div",{className:"screen",onClick:function(){return w(!1)},onContextMenu:function(){return xe(!1)}}),Object(f.jsx)("div",{className:"emojiwindow bs flexrow",children:Object(f.jsxs)("div",{className:"emojistitle",children:[Object(f.jsx)("h2",{children:"Select Emoji"}),Object(f.jsx)("div",{className:"flexrow flexwrap",children:Ee})]})})]})}),Object(f.jsx)(S.a,{in:E,timeout:300,classNames:"miniviewdisplay",unmountOnExit:!0,children:Object(f.jsx)("div",{className:"miniviewdisplay bs",children:Object(f.jsx)("img",{src:W,alt:""})})}),Object(f.jsx)(k,{emojitype:J,setEmojibool:w,emojibool:y,themebool:p,setThemebool:g,contextstyle:ke,type:"settings",contextmenu:Oe,setContextmenu:xe})]})})},we=c(66),ke=c(68),Ce=c(69);var Fe,Ee,Te=function(){return Object(s.useEffect)((function(){var e=document.getElementById("calendar");new we.a(e,{plugins:[ke.a,Ce.a],height:350,contentHeight:300,events:[{title:"Event 1",start:"2020-10-26"},{title:"Event2",start:"2020-11-05"}]}).render()}),[]),Object(f.jsx)("div",{className:"calendar dashbox",children:Object(f.jsx)("div",{id:"calendar"})})},Ue=F.a.i(Fe||(Fe=Object(v.a)(["\ncolor: ","\n"])),(function(e){return e.color})),Ae=F.a.span(Ee||(Ee=Object(v.a)(["\n    background-color: red;\n    &:hover {\n      background-color: ",";\n      span {\n        color: white;\n      }\n      i {\n        color: white;\n      }\n    }\n"])),(function(e){return e.color}));var Le=function(e){var t=Object(s.useContext)(O).themecolor,c=(e.num,e.icon),n=(e.type,e.classNames),a=(e.setState,e.state,e.lnk),i=e.txt,o=e.clk;return Object(f.jsx)(f.Fragment,{children:Object(f.jsx)(b.b,{to:a,onClick:o,children:Object(f.jsxs)(Ae,{color:t,className:n,children:[Object(f.jsx)("span",{children:i}),Object(f.jsx)(Ue,{color:t,className:c})]})})})};var Ie=function(e){var t=Object(s.useContext)(O).themecolor,c=d.a.auth().currentUser,n=Object(s.useState)(""),a=Object(l.a)(n,2),i=(a[0],a[1],e.handleLogout),o=Object(s.useState)(0),r=Object(l.a)(o,2),u=r[0],m=r[1],h=[{icon:"fal fa-comment-alt",txt:"chat"},{icon:"fal fa-bell",txt:"Notifications"},{icon:"fal fa-cog",txt:"Settings"},{icon:"fal fa-sign-out",txt:"Logout"}];return j.collection("users").doc().id,h&&h.map((function(e){return Object(f.jsx)(Le,{icon:e.icon,txt:e.txt,handleLogout:i})})),Object(s.useEffect)((function(){j.collection("notifications").doc(c.uid).onSnapshot((function(e){var t=e.data();m(t.notifications.length)}))}),[]),Object(f.jsxs)("div",{className:"home",children:[Object(f.jsx)("div",{className:"header flex sb",children:Object(f.jsx)("h2",{children:function(){if(c)return function(){var e=new Date;return e.getHours()>=6&&e.getHours()<12?"Good Morning,":e.getHours()>=12&&e.getHours()<17?"Good Afternoon,":e.getHours()>=17&&e.getHours()<20?"Good Evening,":e.getHours()>=20&&e.getHours()<=23||e.getHours()>=0&&e.getHours()<6?"Good Night,":void 0}()+" "+c.displayName}()})}),Object(f.jsx)("hr",{}),Object(f.jsxs)("div",{className:"flex fe sticky",children:[Object(f.jsx)("h2",{className:"marginBottom",children:"Navigate"}),Object(f.jsxs)("div",{className:"gridobjects bs marginBottom",children:[Object(f.jsx)(Le,{icon:"fal fa-comment-alt",txt:"Chat",classNames:"blueback one flexrow sa",lnk:"/chat"}),Object(f.jsxs)("div",{className:"bell",children:[Object(f.jsx)(Le,{icon:"fal fa-bell",txt:"Notifications",classNames:"blueback two flexrow sa",lnk:"/notifications"}),Object(f.jsx)("div",{className:"notificount flex",children:u})]}),Object(f.jsx)(Le,{icon:"fal fa-cog",txt:"Settings",classNames:"blueback three flexrow sa ",lnk:"/settings"}),Object(f.jsx)(Le,{icon:"fal fa-sign-out",txt:"Logout",classNames:"blueback four flexrow sa",lnk:"/",clk:function(){return e.handleLogout()}})]})]}),Object(f.jsx)("hr",{}),Object(f.jsxs)("div",{className:"homeside",children:[Object(f.jsxs)("div",{className:"notifications flex bs",children:[Object(f.jsx)("h2",{children:"Notifications"}),Object(f.jsx)("strong",{children:Object(f.jsxs)("p",{children:["Pending: ",u]})}),Object(f.jsxs)(b.b,{to:"/notifications",className:"flexrow sb",children:[Object(f.jsxs)("p",{children:["Go to notifications ",Object(f.jsx)("hr",{})]}),Object(f.jsx)("i",{className:"fal fa-arrow-right",style:{color:t}})]})]}),Object(f.jsx)("h2",{children:"Calendar"}),Object(f.jsx)(Te,{})]})]})};var Re=function(e){var t=Object(s.useContext)(O).themecolor,c=e.setChatuser,n=d.a.auth().currentUser,a=Object(s.useState)(""),i=Object(l.a)(a,2),o=i[0],r=i[1],u=Object(s.useState)(0),m=Object(l.a)(u,2),h=(m[0],m[1]),x=Object(s.useState)([]),p=Object(l.a)(x,2),g=p[0],v=p[1],N=/(?:https?|ftp):\/\/[\S]*\.(?:png|jpe?g|gif|svg|webp)/g;function y(e){g&&g.map((function(t){if(e.notifiid===t.notifiid){var c=g.indexOf(t);g.splice(c,1),j.collection("notifications").doc(n.uid).update({notifications:g})}}))}j.collection("users").doc().id;var S=g&&g.slice(0).reverse().map((function(e){return Object(f.jsxs)("div",{children:[Object(f.jsx)(b.b,{to:"/chat/"+e.id,onClick:function(){c(e.senderid),y(e)},children:Object(f.jsxs)("div",{className:"notification flex",children:[Object(f.jsx)("div",{className:"userprofile",children:Object(f.jsx)("img",{src:o,alt:""})}),Object(f.jsxs)("strong",{children:[" ",Object(f.jsxs)("p",{children:["From: ",e.sender]})]}),Object(f.jsxs)("span",{children:["Message: ",(t=e,t.gif?"Sent a GIF":t.file?"Sent a file":t.video?"Sent a video":t.base64||null!=t.notifimsg.match(N)?"Sent a photo":t.notifimsg)]}),Object(f.jsxs)("span",{children:["Sent: ",Object(f.jsx)(te.a,{date:e.notifidate.toDate(),locale:"en-US"})]})]})}),Object(f.jsx)("i",{className:"fal fa-times",onClick:function(){return y(e)}})]});var t}));return Object(s.useEffect)((function(){j.collection("notifications").doc(n.uid).onSnapshot((function(e){var t=e.data();h(t.notifications.length),v(t.notifications),r(t.notifications.cover)}))}),[]),Object(f.jsxs)("div",{className:"notificationspage",children:[Object(f.jsxs)("div",{className:"tp",children:[Object(f.jsxs)("div",{className:"header flexrow ",children:[Object(f.jsx)("i",{class:"far fa-inbox",style:{color:t,cursor:"auto"}}),Object(f.jsx)("h2",{children:"Your Notifications"})]}),Object(f.jsx)("hr",{style:{width:"100%"}})]}),Object(f.jsxs)("div",{className:"notificationsrow flex",children:[Object(f.jsx)("div",{className:"notifiBtnCont",children:Object(f.jsx)("button",{className:" themeBtn notifiBtn",onClick:function(){j.collection("notifications").doc(n.uid).update({notifications:[]})},children:"Clear Notifications "})}),S]})]})};var ze=function(e){var t=e.chatsettings,c=e.convoinfo,n=e.onedialogue,a=e.setConvoinfo,i=e.adduser,o=e.setAdduser,r=e.userprofile,l=e.chatuser,d=e.setChatuser,u=Object(s.useContext)(O),j=u.darkmode,b=u.themecolor;return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(m.b,{path:"/chat",children:Object(f.jsx)("div",{className:j?"conversations darkmode":"conversations",style:{backgroundColor:b},children:Object(f.jsxs)("div",{className:"chatcontainer",children:[Object(f.jsx)("div",{className:"userrow spanall ",children:Object(f.jsx)(y,{chatuser:l,setChatuser:d,convoinfo:c,setConvoinfo:a,setAdduser:function(){return o(!i)}})}),Object(f.jsx)("div",{className:"dialogue spanall",children:Object(f.jsx)(m.d,{children:n})}),Object(f.jsx)("div",{className:"userprofile spanall",children:Object(f.jsx)(m.d,{children:r})})]})})}),Object(f.jsx)(m.b,{path:"/home",children:Object(f.jsx)("div",{className:j?"conversations darkmode":"conversations",style:{backgroundColor:b},children:Object(f.jsx)(Ie,{handleLogout:e.handleLogout})})}),Object(f.jsx)(m.d,{children:t}),Object(f.jsx)(m.b,{path:"/notifications",children:Object(f.jsx)(Re,{setChatuser:d})}),Object(f.jsx)(m.b,{path:"/settings",children:Object(f.jsx)(Se,{settings:"settings",type:"settings",link:{link0:"settings",link1:"preferences",link2:"themes",link3:"support"},linklabel:{link0:"Account",link1:"Preferences",link2:"Customize",link3:"Support"}})})]})};var Pe,De=function(e){e.lnk,e.convoinfo,e.setConvoinfo;var t=e.el,c=e.setChatuser,n=e.chatuser,a=e.setChatstarted,i=e.setChatview,o=Object(s.useState)(""),r=Object(l.a)(o,2),u=r[0],O=r[1],h=Object(s.useState)(""),x=Object(l.a)(h,2),p=x[0],g=x[1],v=Object(s.useState)(""),N=Object(l.a)(v,2),y=N[0],S=N[1],w=Object(s.useState)(!1),k=Object(l.a)(w,2),C=(k[0],k[1]),F=Object(s.useState)(""),E=Object(l.a)(F,2),T=E[0],U=E[1],A=Object(s.useState)(!1),L=Object(l.a)(A,2),I=L[0],R=L[1],z=Object(s.useState)(!1),P=Object(l.a)(z,2),D=P[0],M=P[1],B=Object(s.useState)(!0),q=Object(l.a)(B,2),H=q[0],W=q[1],G=Object(s.useState)(""),_=Object(l.a)(G,2),Y=(_[0],_[1]),J=(Object(m.h)(),d.a.auth().currentUser);return Object(s.useEffect)((function(){j.collection("users").doc(t.convoinfo.recipientid).onSnapshot((function(e){var t=e.data();g(t.userinfo.name),O(t.userinfo.cover),C(t.userinfo.online),W(!1),M(t.online)})),j.collection("users").doc(t.convoinfo.creatorid).onSnapshot((function(e){var t=e.data();S(t.userinfo.name),U(t.userinfo.cover),W(!1),R(t.online)})),j.collection("conversations").doc(t.convoinfo.convoid).onSnapshot((function(e){var t=e.data();Y(t.messages[t.messages.length-1])}))}),[t.convoinfo.recipientid,t,n]),Object(f.jsx)(f.Fragment,{children:Object(f.jsxs)(b.b,{onClick:function(){c(t.convoinfo.creatorid===J.uid?t.convoinfo.recipientid:t.convoinfo.creatorid)},children:[H?Object(f.jsxs)("div",{class:"lds-ring",children:[Object(f.jsx)("div",{}),Object(f.jsx)("div",{}),Object(f.jsx)("div",{}),Object(f.jsx)("div",{})]}):Object(f.jsxs)("div",{className:"flexrow",onClick:function(){return a(!0)},children:[" ",Object(f.jsx)("img",{src:t.convoinfo.creatorid===J.uid?u:T,alt:""}),"  ",Object(f.jsx)("small",{children:t.convoinfo.creatorid===J.uid?p:y}),"    ",Object(f.jsx)("div",{className:"notifi",style:{backgroundColor:t.convoinfo.creatorid===J.uid?D?"rgb(44, 255, 44)":"#FF3D3D":I?"rgb(44, 255, 44)":"#FF3D3D"}})," "]}),Object(f.jsx)(V,{icon:"ellipsis-h-alt",classNames:"white",type:"link",lnk:"/chatsettings/".concat(t.convoinfo.convoid),setState:i,setState2:a})]})})},Me=F.a.div(Pe||(Pe=Object(v.a)([" \n      ::selection {\n        background-color: ",";\n        color: white;\n      }\n"])),(function(e){return e.color}));var Ve=function(e){var t=Object(m.h)(),c=d.a.auth().currentUser,n=Object(s.useState)({unreadmsgs:0}),a=Object(l.a)(n,2),i=a[0],o=a[1],r=Object(s.useState)([]),u=Object(l.a)(r,2),b=u[0],h=u[1],p=Object(s.useContext)(O),g=p.darkmode,v=p.widemode,N=p.themecolor,y=p.chatcolor,w=Object(s.useState)(""),k=Object(l.a)(w,2),C=k[0],F=k[1],E=e.handleLogout,T=e.setLoading,U=Object(s.useState)([]),A=Object(l.a)(U,2),L=A[0],I=A[1],R=Object(s.useState)(!1),z=Object(l.a)(R,2),P=z[0],D=z[1],M=Object(s.useState)([]),B=Object(l.a)(M,2),q=B[0],H=B[1],W=Object(s.useState)([]),G=Object(l.a)(W,2),_=(G[0],G[1]),Y=Object(s.useState)([]),J=Object(l.a)(Y,2),K=J[0],X=J[1],Z=Object(s.useState)(""),$=Object(l.a)(Z,2),Q=$[0],ee=$[1],te=Object(s.useState)(""),ce=Object(l.a)(te,2),se=ce[0],ne=ce[1],ae=Object(s.useState)(""),ie=Object(l.a)(ae,2),le=ie[0],ue=ie[1],je=Object(s.useState)(!1),be=Object(l.a)(je,2),me=be[0],fe=be[1],Oe=Object(s.useState)(!1),he=Object(l.a)(Oe,2),xe=he[0],pe=he[1],ge=Object(s.useState)(!1),ve=Object(l.a)(ge,2),Ne=(ve[0],ve[1],q&&q.map((function(e){return Object(f.jsx)(m.b,{exact:!0,path:"/chat/"+e.convoinfo.convoid,children:Object(f.jsx)(oe,{diag:e,chatuser:C})})}))),ye=Object(s.useState)(!1),we=Object(l.a)(ye,2),ke=we[0],Ce=we[1],Fe=q&&q.map((function(e){if(c&&C===(c.uid===e.convoinfo.creatorid?e.convoinfo.recipientid:e.convoinfo.creatorid))return Object(f.jsx)(oe,{type:"small",chatuser:C,diag:e,icon:"fal fa-times",setState:pe})})),Ee=b&&b.sort((function(e,t){return t.lastmsgdate-e.lastmsgdate})).map((function(e){return Object(f.jsx)("div",{className:"profilepic",children:Object(f.jsx)(De,{el:e,setChatopen:Ce,chatopen:ke,chatuser:C,setChatuser:F,convoinfo:i,lnk:t.pathname.split("/").slice(1,2)[0],setChatstarted:pe,setChatview:fe})})})),Te=q&&q.map((function(e){return Object(f.jsx)(m.b,{path:"/chatsettings/"+e.convoinfo.convoid,children:Object(f.jsx)(Se,{chatuser:C,diag:e,settings:"chat",type:"chatsettings",link:{link0:"chatsettings/"+e.convoinfo.convoid,link1:e.convoinfo.convoid+"/actions",link2:e.convoinfo.convoid+"/privacy",link3:e.convoinfo.convoid+"/support"},linklabel:{link0:"Themes",link1:"Actions",link2:"Privacy",link3:"About"}})})})),Ue=q&&q.map((function(e){return Object(f.jsx)(m.b,{exact:!0,path:"/chat/"+e.convoinfo.convoid,children:Object(f.jsx)(re,{diag:e,chatuser:C})})}));return Object(s.useEffect)((function(){j.collection("users").doc(c.uid).onSnapshot((function(e){var t=e.data();_(t),j.collection("conversations").onSnapshot((function(e){var c=[];e.forEach((function(e){t.msgids.includes(e.id)&&c.push(e.data())})),h(c)}))}))}),[]),Object(s.useEffect)((function(){c&&(j.collection("users").doc(c.uid).onSnapshot((function(e){var t=e.data();I(t.msgpersonids),_(t),j.collection("conversations").onSnapshot((function(e){var c=[];e.forEach((function(e){t.msgids.includes(e.id)&&c.push(e.data())})),H(c)}))})),j.collection("users").onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(e.data())})),X(t)})),j.collection("users").doc(c.uid).onSnapshot((function(e){var t=e.data();document.documentElement.style.setProperty("--theme-color",t.customization.themecolor),document.documentElement.style.setProperty("--chat-color",t.customization.color)}))),T(!1)}),[]),Object(f.jsxs)(Me,{color:N,className:v?"body widebody":"body",style:{backgroundColor:N},children:[Object(f.jsx)("div",{className:"sidebar",children:Object(f.jsx)(x,{updateProfile:function(){j.collection("users").doc(c.uid).update({customization:{widemode:!v,darkmode:g,color:y,themecolor:N}})},chatFuncDisplay:function(){pe(!1),setTimeout((function(){fe(!1)}),400)},setChatview:fe,setChatstarted:pe,handleLogout:E})}),Object(f.jsx)(m.d,{children:Object(f.jsx)(ze,{handleLogout:E,chatsettings:Te,chatuser:C,setChatuser:F,userprofile:Ue,onedialogue:Ne,convoinfo:i,setConvoinfo:o,adduser:P,setAdduser:function(){return D(!P)}})}),"/chat"===t.pathname.slice(0,5)?Object(f.jsx)("div",{className:"chattab"}):Object(f.jsx)(f.Fragment,{children:Object(f.jsx)(V,{classNames:"chatdiv flex bs",icon:"comment",state:me,setState:fe})}),Object(f.jsx)(S.a,{in:me,timeout:300,unmountOnExit:!0,classNames:"chatusers",children:Object(f.jsxs)("div",{className:"chatusers bs",children:[Object(f.jsx)("h2",{children:"Chat"}),Object(f.jsxs)("div",{className:"users flexrow",children:[Object(f.jsx)("i",{className:"fal fa-times",onClick:function(){return fe(!1)},style:{color:"var(--theme-color)",position:"absolute",top:"15px",right:"20px"}}),Ee]})]})}),Object(f.jsx)(S.a,{in:xe,classNames:"chatview",unmountOnExit:!0,timeout:300,children:Object(f.jsx)("div",{className:"chatview bs",style:{right:me?"330px":"50px"},children:Object(f.jsx)("div",{className:"",children:Object(f.jsx)("div",{className:"dialogue",children:Fe})})})}),Object(f.jsx)(S.a,{in:P,classNames:"adduser",unmountOnExit:!0,timeout:300,children:Object(f.jsx)(de,{setRecipientname:ue,message:Q,msgpersonids:L,sendMessage:function(){if(Q.length){D(!P);var e=j.collection("conversations").doc().id;!function(e,t,c,s){var n=d.a.auth().currentUser,a=d.a.firestore.FieldValue.serverTimestamp(),i={convoid:c,creatorid:n.uid,creatorname:n.displayName,recipientid:e,recipientname:s,typerid:n.uid,userref:j.collection("users").doc(e)},o={message:t,reaction1:"",reaction2:"",msgdate:d.a.firestore.Timestamp.now(),msgid:j.collection("conversations").doc().id,read:!1,senderid:n.uid,sendername:n.displayName,editing:!1},r={notifimsg:t,notifidate:d.a.firestore.Timestamp.now(),read:!1,sender:n.displayName,id:c,senderid:n.uid,notifiid:j.collection("users").doc().id};j.collection("notifications").doc(e).update({notifications:d.a.firestore.FieldValue.arrayUnion(r)}),j.collection("users").doc(n.uid).update({msgids:d.a.firestore.FieldValue.arrayUnion(c),msgpersonids:d.a.firestore.FieldValue.arrayUnion(e)}),j.collection("users").doc(e).update({msgids:d.a.firestore.FieldValue.arrayUnion(c),msgpersonids:d.a.firestore.FieldValue.arrayUnion(n.uid)}),j.collection("conversations").doc(c).set({lastmsgdate:a,convoinfo:i,messages:d.a.firestore.FieldValue.arrayUnion(o),customizedconvo:{theme:"https://i.imgur.com/4hzNTTq.png",emoji:"\ud83e\udd17"},nickname1:"",notifications1:!0,nickname2:"",notifications2:!0})}(se,Q,e,le)}},setMessage:ee,setRecipientid:ne,allusers:K,setAdduser:D,recipientid:se,adduser:P})})]})},Be=c(67);var qe=function(){var e=Object(s.useState)(0),t=Object(l.a)(e,2),c=(t[0],t[1],Object(s.useState)("")),n=Object(l.a)(c,2),a=n[0],i=n[1],o=Object(s.useState)(""),r=Object(l.a)(o,2),u=r[0],O=r[1],x=Object(s.useState)(""),p=Object(l.a)(x,2),v=p[0],N=p[1],y=Object(s.useState)(""),S=Object(l.a)(y,2),w=S[0],k=S[1],C=Object(s.useState)(""),F=Object(l.a)(C,2),E=F[0],T=F[1],U=Object(s.useState)(""),A=Object(l.a)(U,2),L=A[0],I=A[1],R=Object(s.useState)(!1),z=Object(l.a)(R,2),P=z[0],D=z[1],M=Object(s.useState)(""),V=Object(l.a)(M,2),B=V[0],q=V[1],H=Object(s.useState)([]),W=Object(l.a)(H,2),G=(W[0],W[1],Object(s.useState)([])),_=Object(l.a)(G,2),Y=(_[0],_[1],Object(s.useState)("https://www.gettyimages.ca/gi-resources/images/500px/983794168.jpg")),J=Object(l.a)(Y,2),K=J[0],X=(J[1],Object(s.useState)(!1)),Z=Object(l.a)(X,2),$=(Z[0],Z[1],Object(s.useState)([""])),Q=Object(l.a)($,2),ee=Q[0],te=(Q[1],Object(s.useState)(!1)),ce=Object(l.a)(te,2),se=ce[0],ne=ce[1],ae=function(){T(""),I("")},ie=function(){d.a.auth().onAuthStateChanged((function(e){e?(N(""),k(""),i(e),j.collection("users").doc(e.uid).update({online:!0})):(i(""),j.collection("users").doc(e.uid).update({online:!1}))}))};function oe(){var e=new d.a.auth.GoogleAuthProvider;e.addScope("email"),d.a.auth().signInWithPopup(e).then((function(e){if(e.additionalUserInfo.isNewUser){e.credential.accessToken;var t=e.user;j.collection("users").doc(t.uid).set({created:new Date,msgids:ee,uid:t.uid,online:!0,userinfo:{name:t.displayName,cover:t.photoURL,age:"",phone:t.phoneNumber,city:"",country:"",website:"https://",job:"",email:t.email},customization:{color:"#10325c",themecolor:"#0f6ce6",darkmode:!1,widemode:!1}}),j.collection("notifications").doc(t.uid).set({notifications:[]})}})).catch((function(e){e.code,e.message,e.email,e.credential;T(e.message),setTimeout((function(){T("")}),3e3)}))}function re(){var e=new d.a.auth.OAuthProvider("yahoo.com");e.addScope("email"),d.a.auth().signInWithPopup(e).then((function(e){console.log(e.additionalUserInfo.profile);var t=e.credential,c=e.user;t.accessToken,t.idToken;e.additionalUserInfo.isNewUser&&(j.collection("users").doc(c.uid).set({created:new Date,msgids:ee,uid:c.uid,online:!0,userinfo:{name:c.displayName,cover:c.photoURL,age:"",phone:c.phoneNumber,city:"",country:"",website:"https://",job:"",email:c.email},customization:{color:"#10325c",themecolor:"#0f6ce6",darkmode:!1,widemode:!1}}),j.collection("notifications").doc(c.uid).set({notifications:[]}))})).catch((function(e){T("Email already in use, possibly with another method."),setTimeout((function(){T("")}),3e3)}))}function le(){var e=new d.a.auth.FacebookAuthProvider;e.addScope("email"),d.a.auth().signInWithPopup(e).then((function(e){if(e.additionalUserInfo.isNewUser){e.credential.accessToken;var t=e.user;j.collection("users").doc(t.uid).set({created:new Date,msgids:ee,uid:t.uid,online:!0,userinfo:{name:t.displayName,cover:t.photoURL,age:"",phone:t.phoneNumber,city:"",country:"",website:"https://",job:"",email:t.email},customization:{color:"#10325c",themecolor:"#0f6ce6",darkmode:!1,widemode:!1}}),j.collection("notifications").doc(t.uid).set({notifications:[]})}})).catch((function(e){var t=e.code,c=(e.message,e.email);e.credential;T(c),setTimeout((function(){T("")}),3e3),console.log(t)}))}return Object(Be.a)((function(){a&&j.collection("users").doc(a.uid).update({online:!1})})),Object(s.useEffect)((function(){ie(),window.addEventListener("onbeforeunload",(function(){a&&j.collection("users").doc(a.uid).update({online:!1})})),a&&j.collection("users").doc(a.uid).update({online:!0})}),[]),Object(f.jsx)(b.a,{children:Object(f.jsx)("div",{className:"App",children:a?Object(f.jsx)(h,{children:Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(Ve,{setLoading:ne,handleLogout:function(){a&&j.collection("users").doc(a.uid).update({online:!1}),window.location.reload(),d.a.auth().signOut()}}),Object(f.jsx)(m.a,{to:"/home"})]})}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(g,{loginwithYahoo:function(){return re},loginwithFacebook:function(){return le},loginwithGoogle:function(){return oe},loading:se,name:u,setName:O,lname:B,setlName:q,email:v,setEmail:N,password:w,setPassword:k,handleLogin:function(){ae(),d.a.auth().signInWithEmailAndPassword(v,w).then((function(){ne(!0)})).catch((function(e){switch(e.code){case"auth/invalid-email":T(e.message);break;case"auth/user/disabled":case"auth/user-not-found":T("Email does not exist");break;case"auth/wrong-password":I("Incorrect Password")}}))},handleSignup:function(){console.log("signup"),ae(),d.a.auth().createUserWithEmailAndPassword(v,w).catch((function(e){switch(e.code){case"auth/email-already-in-use":case"auth/invalid-email":T(e.message);break;case"auth/weak-password":I(e.message);break;default:T("Invalid")}})),d.a.auth().onAuthStateChanged((function(e){e?(e.updateProfile({displayName:u}),j.collection("users").doc(e.uid).set({created:new Date,msgids:ee,uid:d.a.auth().currentUser.uid,online:!0,userinfo:{name:u,cover:K,age:"",phone:"",city:"",country:"",website:"https://",job:"",email:v},customization:{color:"#10325c",themecolor:"#0f6ce6",darkmode:!1,widemode:!1}}),j.collection("notifications").doc(e.uid).set({notifications:[]})):i("")}))},hasAccount:P,setHasAccount:D,emailError:E,passwordError:L}),Object(f.jsx)(m.a,{to:"/"})]})})})};o.a.addDefaultLocale(r),o.a.addLocale(r);var He=document.getElementById("root");i.a.render(Object(f.jsx)(s.StrictMode,{children:Object(f.jsx)(qe,{})}),He)},76:function(e,t,c){}},[[139,1,2]]]);
//# sourceMappingURL=main.3baa02ca.chunk.js.map